{"version":3,"file":"js/3875-5295a349bb30790884e2.js","mappings":"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","sources":["webpack://decidim-sb-app/../../../.rvm/gems/ruby-3.0.2/gems/decidim-core-0.27.3/app/packs/src/decidim/ajax_modals.js","webpack://decidim-sb-app/../../../.rvm/gems/ruby-3.0.2/gems/decidim-core-0.27.3/app/packs/src/decidim/autocomplete.js","webpack://decidim-sb-app/../../../.rvm/gems/ruby-3.0.2/gems/decidim-core-0.27.3/app/packs/src/decidim/data_picker.js","webpack://decidim-sb-app/../../../.rvm/gems/ruby-3.0.2/gems/decidim-core-0.27.3/app/packs/src/decidim/form_datepicker.js","webpack://decidim-sb-app/../../../.rvm/gems/ruby-3.0.2/gems/decidim-core-0.27.3/app/packs/src/decidim/delayed.js","webpack://decidim-sb-app/../../../.rvm/gems/ruby-3.0.2/gems/decidim-core-0.27.3/app/packs/src/decidim/check_boxes_tree.js","webpack://decidim-sb-app/../../../.rvm/gems/ruby-3.0.2/gems/decidim-core-0.27.3/app/packs/src/decidim/form_filter.js","webpack://decidim-sb-app/../../../.rvm/gems/ruby-3.0.2/gems/decidim-core-0.27.3/app/packs/src/decidim/foundation-datepicker/js/locales/foundation-datepicker.lb.js","webpack://decidim-sb-app/../../../.rvm/gems/ruby-3.0.2/gems/decidim-core-0.27.3/app/packs/src/decidim/gallery.js","webpack://decidim-sb-app/../../../.rvm/gems/ruby-3.0.2/gems/decidim-core-0.27.3/app/packs/src/decidim/input_hashtags.js","webpack://decidim-sb-app/../../../.rvm/gems/ruby-3.0.2/gems/decidim-core-0.27.3/app/packs/src/decidim/input_mentions.js","webpack://decidim-sb-app/../../../.rvm/gems/ruby-3.0.2/gems/decidim-core-0.27.3/app/packs/src/decidim/session_timeouter.js","webpack://decidim-sb-app/../../../.rvm/gems/ruby-3.0.2/gems/decidim-core-0.27.3/app/packs/src/decidim/vendor/foundation-datepicker.js","webpack://decidim-sb-app/../../../.rvm/gems/ruby-3.0.2/gems/decidim-core-0.27.3/app/packs/src/decidim/vendor/tribute.js","webpack://decidim-sb-app/../../../.rvm/gems/ruby-3.0.2/gems/decidim-core-0.27.3/app/packs/src/decidim/vizzs/index.js","webpack://decidim-sb-app/../../../.rvm/gems/ruby-3.0.2/gems/decidim-core-0.27.3/app/packs/src/decidim/vizzs/areachart.js"],"sourcesContent":["$(() => {\n  $(document).on(\"click\", \"a[data-open-url],button[data-open-url]\", (event) => {\n    event.preventDefault();\n    const link = event.currentTarget;\n    const $modal = $(`#${link.dataset.open}`);\n    $modal.html(\"<div class='loading-spinner'></div>\");\n    $.ajax({\n      type: \"get\",\n      url: link.dataset.openUrl,\n      success: (html) => {\n        const $html = $(html);\n        $modal.html($html);\n        $html.foundation();\n      },\n      error: function (request, status, error) {\n        $modal.html(`<h3>${status}</h3><p>${error}</p>`);\n      }\n    });\n  });\n});\n","import AutoCompleteJS from \"@tarekraafat/autocomplete.js\";\n\nexport default class AutoComplete {\n  constructor(el, options = {}) {\n    this.element = el;\n    this.stickySelectedSpan = null;\n    this.clearStickySelectionSpan = null;\n    this.stickyHiddenInput = null;\n    this.promptDiv = null;\n    const thresholdTemp = options.threshold || 2;\n    this.options = Object.assign({\n      // Defines name of the hidden input (e.g. assembly_member[user_id])\n      name: null,\n      // Placeholder of the visible input field\n      placeholder: \"\",\n      // Defines what happens after user has selected value from suggestions\n      // sticky - Allows selecting a single value and not editing the value after selected (e.g. as the admin autocomplete fields)\n      // single - Allows selecting a single value and editing the selected text after the selection (e.g. geocoding field)\n      // multi - Allows selecting multiple values\n      // null (default) - Disable selection event handling in this class\n      mode: null,\n      // Defines if we show input help (e.g. \"Type at least three characters to search\") or not.\n      searchPrompt: false,\n      // Defines search prompt message, only shown if showPrompt is enabled!\n      searchPromptText: `Type at least ${thresholdTemp} characters to search`,\n      // Defines items that are selected already when page is loaded before user selects them. (e.g. when form submit fails)\n      selected: null,\n      // Defines how many characters input has to have before we start searching\n      threshold: thresholdTemp,\n      // Defines how many results to show in the autocomplete selection list\n      // by maximum.\n      maxResults: 10,\n      // Defines the data keys against which to match the user input when\n      // searching through the results. For example, when the following\n      // data is returned by the API:\n      //   { id: 123, name: \"John\", nickname: \"john\", __typename: \"User\" }\n      //\n      // You can define the data keys array as [\"name\", \"nickname\"] in\n      // which case the results shown to user would be only those that\n      // have matching text in these defined fields.\n      dataMatchKeys: null,\n      // The data source is a method that gets the callback parameter as\n      // its first argument which should be called with the results array\n      // once they are returned by the API.\n      // For example:\n      //   (query, callback) => {\n      //     (async () => {\n      //       const results = await callAjax(`/api/url?query=${query}`);\n      //       callback(results);\n      //     })();\n      //   }\n      //\n      // Signature: (callback: Function)\n      dataSource: () => [],\n      // Filters the data list returned by the data source before it is shown\n      // to the user. Can be used e.g. to hide already selected values from\n      // the list.\n      dataFilter: null,\n      // Delay in milliseconds how long to wait after user action before\n      // doing a backend request.\n      delay: 200,\n      // Allows modifying the suggested items before they are displayed in the list\n      // Signature: (element: HTMLElement, value: Object)\n      modifyResult: null\n    }, options);\n\n    this.autocomplete = new AutoCompleteJS({\n      selector: () => this.element,\n      placeHolder: options.placeholder,\n      // Delay (milliseconds) before autocomplete engine starts. It's preventing many queries when user is typing fast.\n      debounce: 200,\n      threshold: this.options.threshold,\n      data: {\n        keys: this.options.dataMatchKeys,\n        src: async (query) => {\n          const fetchResults = () => {\n            return new Promise((resolve) => {\n              this.options.dataSource(query, resolve);\n            });\n          }\n\n          try {\n            return await fetchResults();\n          } catch (error) {\n            return error;\n          }\n        },\n        filter: (list) => {\n          if (this.options.dataFilter) {\n            return this.options.dataFilter(list);\n          }\n\n          return list;\n        }\n      },\n      resultsList: {\n        maxResults: this.options.maxResults\n      },\n      resultItem: {\n        element: (item, data) => {\n          if (!this.options.modifyResult) {\n            return;\n          }\n\n          this.options.modifyResult(item, data.value);\n        }\n      },\n      events: {\n        input: {\n          blur: () => {\n            this.promptDiv.style.display = \"none\";\n          }\n        }\n      }\n    });\n\n    this.acWrapper = this.element.closest(\".autoComplete_wrapper\");\n    this.element.ac = this.autocomplete;\n\n    // Stop input field from bubbling open and close events to parent elements,\n    // because foundation closes modal from these events.\n    const stopPropagation = (event) => {\n      event.stopPropagation();\n    }\n    this.element.addEventListener(\"close\", stopPropagation);\n    this.element.addEventListener(\"open\", stopPropagation);\n\n    this.createPromptDiv();\n\n    switch (this.options.mode) {\n    case \"sticky\":\n      this.createStickySelect(this.options.name);\n      break;\n    case \"multi\":\n      this.createMultiSelect(this.options.name);\n      break;\n    default:\n    }\n  }\n\n  setInput(value) {\n    this.autocomplete.input.value = value;\n  }\n\n  handleEvent(event) {\n    switch (this.options.mode) {\n    case \"single\":\n      this.setInput(event.detail.selection.value[event.detail.selection.key]);\n      break;\n    case \"sticky\":\n      this.handleStickyEvents(event);\n      break;\n    case \"multi\":\n      this.handleMultiEvents(event);\n      break;\n    default:\n    }\n  }\n\n  handleMultiEvents(event) {\n    switch (event.type) {\n    case \"selection\":\n      this.addMultiSelectItem(event.detail.selection);\n      break;\n    default:\n    }\n  }\n\n  handleStickyEvents(event) {\n    switch (event.type) {\n    case \"selection\":\n      this.addStickySelectItem(event.detail.selection);\n      break;\n    case \"click\":\n      if (event.target === this.clearStickySelectionSpan) {\n        this.removeStickySelection();\n      }\n      break;\n    case \"keyup\":\n      if (this.stickyHiddenInput.value !== \"\" && event.target === this.element && ([\"Escape\", \"Backspace\", \"Delete\"].includes(event.key) || (/^[a-z0-9]$/i).test(event.key))) {\n        this.removeStickySelection();\n      } else if (this.options.searchPrompt) {\n        if (this.stickyHiddenInput.value === \"\" && this.element.value.length < this.options.threshold) {\n          this.promptDiv.style.display = \"block\";\n        } else {\n          this.promptDiv.style.display = \"none\";\n        }\n      }\n      break;\n    default:\n    }\n  }\n\n  createHiddenInput(value) {\n    const hiddenInput = document.createElement(\"input\");\n    hiddenInput.name = this.options.name;\n    hiddenInput.type = \"hidden\";\n    if (value) {\n      hiddenInput.value = value;\n    }\n    this.acWrapper.prepend(hiddenInput);\n    return hiddenInput;\n  }\n\n  removeStickySelection() {\n    this.stickyHiddenInput.value = \"\";\n    this.element.placeholder = this.options.placeholder;\n    this.clearStickySelectionSpan.style.display = \"none\";\n    this.stickySelectedSpan.style.display = \"none\";\n  }\n\n  addStickySelectItem(selection) {\n    this.stickyHiddenInput.value = selection.value.value;\n    this.element.placeholder = \"\";\n    this.stickySelectedSpan.innerHTML = selection.value[selection.key];\n    this.stickySelectedSpan.style.display = \"block\";\n    this.clearStickySelectionSpan.style.display = \"block\";\n    this.setInput(\"\");\n  }\n\n  addMultiSelectItem(selection) {\n    this.setInput(\"\");\n    const chosen = document.createElement(\"span\");\n    chosen.classList.add(\"label\", \"primary\", \"autocomplete__selected-item\", \"multi\");\n    chosen.innerHTML = selection.value[selection.key];\n    const clearSelection = document.createElement(\"span\");\n    clearSelection.classList.add(\"clear-multi-selection\");\n    clearSelection.innerHTML = \"&times;\";\n    clearSelection.setAttribute(\"data-remove\", selection.value.value);\n    clearSelection.addEventListener(\"click\", (evt) => {\n      const hiddenInput = this.acWrapper.querySelector(`input[type='hidden'][value='${selection.value.value}']`);\n      if (hiddenInput) {\n        hiddenInput.remove();\n        evt.target.parentElement.remove();\n      }\n    });\n    chosen.appendChild(clearSelection);\n\n    const multiSelectWrapper = this.acWrapper.querySelector(\".multiselect\");\n    const inputContainer = multiSelectWrapper.querySelector(\"span.input-container\");\n    multiSelectWrapper.insertBefore(chosen, inputContainer);\n    this.createHiddenInput(selection.value.value);\n  }\n\n  createStickySelect() {\n    this.stickySelectedSpan = document.createElement(\"span\");\n    this.stickySelectedSpan.classList.add(\"autocomplete__selected-item\", \"sticky\");\n    this.stickySelectedSpan.style.display = \"none\";\n    this.stickySelectedSpan.addEventListener(\"click\", () => this.element.focus());\n    this.stickyHiddenInput = this.createHiddenInput();\n\n    this.clearStickySelectionSpan = document.createElement(\"span\");\n    this.clearStickySelectionSpan.className = \"clear-sticky-selection\";\n    this.clearStickySelectionSpan.innerHTML = \"&times;\";\n    this.clearStickySelectionSpan.style.display = \"none\";\n    this.clearStickySelectionSpan.addEventListener(\"click\", this);\n\n    this.element.addEventListener(\"selection\", this);\n    this.element.addEventListener(\"keyup\", this);\n\n    this.acWrapper.insertBefore(this.clearStickySelectionSpan, this.element);\n    this.acWrapper.insertBefore(this.stickySelectedSpan, this.element);\n    if (this.options.selected) {\n      this.addStickySelectItem(this.options.selected);\n    }\n  }\n\n  createMultiSelect() {\n    const multiSelectWrapper = document.createElement(\"div\");\n    multiSelectWrapper.classList.add(\"multiselect\");\n\n    const inputContainer = document.createElement(\"span\");\n    inputContainer.classList.add(\"input-container\");\n\n    multiSelectWrapper.appendChild(inputContainer);\n    this.acWrapper.prepend(multiSelectWrapper);\n    inputContainer.appendChild(this.element);\n\n    this.element.addEventListener(\"selection\", this);\n    multiSelectWrapper.addEventListener(\"click\", () => {\n      this.element.focus();\n    })\n\n    if (this.options.selected) {\n      this.options.selected.forEach((selection) => {\n        this.addMultiSelectItem(selection);\n      })\n    }\n  }\n\n  createPromptDiv() {\n    this.promptDiv = document.createElement(\"div\");\n    this.promptDiv.classList.add(\"search-prompt\");\n    this.promptDiv.style.display = \"none\";\n    this.promptDiv.innerHTML = this.options.searchPromptText;\n    this.acWrapper.appendChild(this.promptDiv);\n  }\n}\n","export default class DataPicker {\n  constructor(pickers) {\n    this.modal = this._createModalContainer();\n    this.modal.appendTo($(\"body\"));\n    this.current = null;\n\n    pickers.each((_index, picker) => {\n      this.activate(picker);\n    });\n  }\n\n  activate(picker) {\n    let $picker = $(picker);\n\n    this._setCurrentPicker($picker, null);\n\n    let input = \"hidden\",\n        name = this.current.name,\n        values = this.current.values;\n\n    if (this.current.multiple) {\n      name += \"[]\";\n    }\n\n    $(\"div\", values).each((_index2, div) => {\n      let value = $(\"a\", div).data(\"picker-value\");\n      $(div).prepend($(`<input type=\"${input}\" checked name=\"${name}\" value=\"${value}\"/>`));\n    });\n\n    $picker.on(\"click\", \"a\", (event) => {\n      event.preventDefault();\n      if ($picker.hasClass(\"disabled\")) {\n        return;\n      }\n      const isMultiPicker = $picker.hasClass(\"picker-multiple\");\n\n      if ($(this._targetFromEvent(event)).hasClass(\"picker-prompt\") || !isMultiPicker) {\n        this._openPicker($picker, this._targetFromEvent(event));\n      }  else if (this._targetFromEvent(event).tagName === \"A\") {\n        this._removeValue($picker, this._targetFromEvent(event).parentNode);\n      } else {\n        this._removeValue($picker, this._targetFromEvent(event));\n      }\n    });\n\n    $picker.on(\"click\", \"input\", (event) => {\n      this._removeValue($picker, this._targetFromEvent(event));\n    });\n\n    if (this.current.autosort) {\n      this._sort();\n    }\n  }\n\n  enabled(picker, value) {\n    $(picker).toggleClass(\"disabled\", !value);\n    $(\"input\", picker).attr(\"disabled\", !value);\n  }\n\n  clear(picker) {\n    $(\".picker-values\", picker).html(\"\");\n  }\n\n  save(picker) {\n    return $(\".picker-values div:has(input:checked)\", picker).map((_index, div) => {\n      let $link = $(\"a\", div);\n      return {\n        value: $(\"input\", div).val(),\n        text: $link.text(),\n        url: $link.attr(\"href\")\n      };\n    }).get();\n  }\n\n  load(picker, savedData) {\n    this._setCurrentPicker($(picker), null);\n    $.each(savedData, (_index, data) => {\n      this._choose(data, { interactive: false, modify: false });\n    });\n    if (this.current.autosort) {\n      this._sort();\n    }\n  }\n\n  _createModalContainer() {\n    // Add a header because we are referencing the title element with\n    // `aria-labelledby`. If the title doesn't exist, the \"labelled by\"\n    // reference is incorrect.\n    const headerHtml = '<div class=\"scope-picker picker-header\"><h6 id=\"data_picker-title\" class=\"h2\"></h6></div>';\n\n    return $(`<div class=\"small reveal\" id=\"data_picker-modal\" aria-hidden=\"true\" aria-live=\"assertive\" role=\"dialog\" aria-labelledby=\"data_picker-title\" data-reveal data-multiple-opened=\"true\">\n             <div class=\"data_picker-modal-content\">${headerHtml}</div>\n             <button class=\"close-button\" data-close type=\"button\" data-reveal-id=\"data_picker-modal\"><span aria-hidden=\"true\">&times;</span></button>\n             </div>`);\n  }\n\n  _openPicker($picker, target) {\n    this._setCurrentPicker($picker, target);\n    this._load($(\"a\", target).attr(\"href\"));\n  }\n\n  _setCurrentPicker($picker, target) {\n    let $target = false;\n    if (target && !$(target).hasClass(\"picker-prompt\")) {\n      $target = $(target);\n    }\n\n    this.current = {\n      picker: $picker,\n      name: $picker.data(\"picker-name\"),\n      values: $picker.find(\".picker-values\"),\n      multiple: $picker.hasClass(\"picker-multiple\"),\n      autosort: $picker.hasClass(\"picker-multiple\") && $picker.hasClass(\"picker-autosort\"),\n      target: $target\n    };\n  }\n\n  _load(url) {\n    $.ajax(url).done((resp) => {\n      let modalContent = $(\".data_picker-modal-content\", this.modal);\n      modalContent.html(resp);\n      this._handleLinks(modalContent);\n      this._handleCheckboxes(modalContent);\n      this.modal.foundation(\"open\");\n    });\n  }\n\n  _handleLinks(content) {\n    $(\"a\", content).each((_index, link) => {\n      let $link = $(link);\n      $link.click((event) => {\n        event.preventDefault();\n        if ($link.data(\"close\") || $link.data(\"close\") === \"\") {\n          return;\n        }\n\n        let chooseUrl = $link.attr(\"href\");\n        if (chooseUrl) {\n          if (typeof $link.data(\"picker-choose\") === \"undefined\") {\n            this._load(chooseUrl);\n          } else {\n            this._choose(\n              { url: chooseUrl, value: $link.data(\"picker-value\") || \"\", text: $link.data(\"picker-text\") || \"\" }\n            );\n          }\n        }\n      });\n    });\n  }\n\n  _handleCheckboxes(content) {\n    $(\"input[type=checkbox][data-picker-choose]\", content).each((_index, checkbox) => {\n      const $checkbox = $(checkbox);\n      checkbox.checked = this._targetFromValue($checkbox.val()) !== null;\n    }).change((event) => {\n      const $checkbox = $(event.target);\n      if (event.target.checked) {\n        this._choose(\n          { url: $checkbox.data(\"picker-url\"), value: $checkbox.val() || \"\", text: $checkbox.data(\"picker-text\") || \"\" },\n          { modify: false, close: false }\n        );\n      }\n      else {\n        this._removeValue(this.current.picker, this._targetFromValue($checkbox.val()));\n      }\n    });\n  }\n\n  _choose(data, opts = {}) {\n    const options = Object.assign({ interactive: true, modify: true, close: true }, opts);\n\n    let dataText = this._escape(data.text);\n    let choosenOption = null;\n\n    if (!this.current.target && options.modify) {\n      this.current.target = this._targetFromValue(data.value);\n    }\n\n    // Add or update value appearance\n    if (this.current.target && options.modify) {\n      let link = $(\"a\", this.current.target);\n      link.data(\"picker-value\", data.value);\n      link.attr(\"href\", data.url);\n      choosenOption = this.current.target;\n      if (this.current.multiple) {\n        link.html(`&times;&nbsp;${dataText}`);\n      } else {\n        link.text(dataText);\n      }\n    } else {\n      let input = \"hidden\",\n          name = this.current.name;\n\n      if (this.current.multiple) {\n        name += \"[]\";\n        choosenOption = $(`<div><input type=\"${input}\" checked name=\"${name}\"/><a href=\"${data.url}\" data-picker-value=\"${data.value}\" class=\"label primary\">&times;&nbsp;${dataText}</a></div>`);\n      } else {\n        choosenOption = $(`<div><input type=\"${input}\" checked name=\"${name}\"/><a href=\"${data.url}\" data-picker-value=\"${data.value}\">${dataText}</a></div>`);\n      }\n      choosenOption.appendTo(this.current.values);\n\n      if (!this.current.target) {\n        this.current.target = choosenOption;\n      }\n    }\n\n    // Set input value\n    let $input = $(\"input\", choosenOption);\n    $input.attr(\"value\", data.value);\n\n    if (this.current.autosort) {\n      this._sort();\n    }\n\n    if (options.interactive) {\n      // Raise changed event\n      $input.trigger(\"change\");\n      this._removeErrors();\n\n      if (options.close) {\n        this._close();\n      }\n    }\n  }\n\n  _sort() {\n    const values = $(\".picker-values\", this.current.picker);\n    values.children().sort((item1, item2) => $(\"input\", item1).val() - $(\"input\", item2).val()).detach().appendTo(values);\n  }\n\n  _close() {\n    // Close modal and unset target element\n    this.modal.foundation(\"close\");\n    this.current.target = null;\n  }\n\n  _removeValue($picker, target) {\n    if (target) {\n      this._setCurrentPicker($picker, target);\n      // Fadeout (with time) doesn't work in system tests\n      let fadeoutTime = 500;\n      if (navigator && navigator.webdriver) {\n        fadeoutTime = 0;\n      }\n      this.current.target.fadeOut(fadeoutTime, () => {\n        this.current.target.remove();\n        this.current.target = null;\n      });\n    }\n  }\n\n  _removeErrors() {\n    let parent = this.current.picker.parent();\n    $(\".is-invalid-input\", parent).removeClass(\"is-invalid-input\");\n    $(\".is-invalid-label\", parent).removeClass(\"is-invalid-label\");\n    $(\".form-error.is-visible\", parent).removeClass(\"is-visible\");\n  }\n\n  _escape(str) {\n    return str.replace(/[\\u00A0-\\u9999<>&]/gim, function (char) {\n      return `&#${char.charCodeAt(0)};`;\n    });\n  }\n\n  _targetFromEvent(event) {\n    return event.target.parentNode;\n  }\n\n  _targetFromValue(value) {\n    return $(`[data-picker-value=${value}]`, this.current.picker).parent()[0] || null;\n  }\n}\n","/* eslint-disable require-jsdoc */\n\nexport default function formDatePicker() {\n  $(\"[data-datepicker]\").each((_index, node) => {\n    const language = $(\"html\").attr(\"lang\") || \"en\";\n    const initialDate = $(node).data(\"startdate\") || \"\";\n    const pickTime = $(node).data(\"timepicker\") === \"\";\n    const languageProps = $(node).fdatepicker.dates[language] && $(node).fdatepicker.dates[language].format;\n    let format = $(node).data(\"date-format\") || languageProps || \"mm/dd/yyyy\";\n\n    $(node).fdatepicker({\n      format,\n      initialDate,\n      language,\n      pickTime,\n      disableDblClickSelection: true,\n      leftArrow: \"<<\",\n      rightArrow: \">>\"\n    });\n  });\n}\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds.\n * @param {Object} context - the context for the called function.\n * @param {Function} func - the function to be executed.\n * @param {int} wait - number of milliseconds to wait before executing the function.\n * @private\n * @returns {Void} - Returns nothing.\n */\nexport default function delayed(context, func, wait) {\n  let timeout = null;\n\n  return function(...args) {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => {\n      timeout = null;\n      Reflect.apply(func, context, args);\n    }, wait);\n  }\n}\n","/**\n * CheckBoxesTree component.\n */\nexport default class CheckBoxesTree {\n  constructor() {\n    this.checkboxesTree = document.querySelectorAll(\"[data-checkboxes-tree]\");\n    if (!this.checkboxesTree) {\n      return;\n    }\n\n    this.globalChecks = document.querySelectorAll(\"[data-global-checkbox] input\");\n    this.globalChecks.forEach((global) => {\n      if (global.value === \"\") {\n        global.classList.add(\"ignore-filter\")\n      }\n    });\n    this.checkGlobalCheck();\n\n    // Event listeners\n    this.checkboxesTree.forEach((input) => input.addEventListener(\"click\", (event) => this.checkTheCheckBoxes(event.target)));\n    document.querySelectorAll(\"[data-children-checkbox] input\").forEach((input) => {\n      input.addEventListener(\"change\", (event) => this.checkTheCheckParent(event.target));\n    });\n\n    // Review parent checkboxes on initial load\n    document.querySelectorAll(\"[data-children-checkbox] input\").forEach((input) => {\n      this.checkTheCheckParent(input);\n    });\n  }\n\n  /**\n   * Set checkboxes as checked if included in given values\n   * @public\n   * @param {Array} checkboxes - array of checkboxs to check\n   * @param {Array} values - values of checkboxes that should be checked\n   * @returns {Void} - Returns nothing.\n   */\n  updateChecked(checkboxes, values) {\n    checkboxes.each((index, checkbox) => {\n      if ((checkbox.value === \"\" && values.length === 1) || (checkbox.value !== \"\" && values.includes(checkbox.value))) {\n        checkbox.checked = true;\n        this.checkTheCheckBoxes(checkbox);\n        this.checkTheCheckParent(checkbox);\n      }\n    });\n  }\n\n  /**\n   * Set the container form(s) for the component, to disable ignored filters before submitting them\n   * @public\n   * @param {query} theForm - form or forms where the component will be used\n   * @returns {Void} - Returns nothing.\n   */\n  setContainerForm(theForm) {\n    theForm.on(\"submit ajax:before\", () => {\n      theForm.find(\".ignore-filters input, input.ignore-filter\").each((idx, elem) => {\n        elem.disabled = true;\n      });\n    });\n\n    theForm.on(\"ajax:send\", () => {\n      theForm.find(\".ignore-filters input, input.ignore-filter\").each((idx, elem) => {\n        elem.disabled = false;\n      });\n    });\n  }\n\n  /**\n   * Handles the click action on any checkbox.\n   * @private\n   * @param {Input} target - the input that has been checked\n   * @returns {Void} - Returns nothing.\n   */\n  checkTheCheckBoxes(target) {\n    // Quis custodiet ipsos custodes?\n    const targetChecks = target.dataset.checkboxesTree;\n    const checkStatus = target.checked;\n    const allChecks = document.querySelectorAll(`#${targetChecks} input[type='checkbox']`);\n\n    allChecks.forEach((input) => {\n      input.checked = checkStatus;\n      input.indeterminate = false;\n      input.classList.add(\"ignore-filter\");\n    });\n  }\n\n  /**\n   * Update global checkboxes state when the current selection changes\n   * @private\n   * @returns {Void} - Returns nothing.\n   */\n  checkGlobalCheck() {\n    this.globalChecks.forEach((global) => {\n      const checksContext = global.dataset.checkboxesTree;\n      const totalInputs = document.querySelectorAll(\n        `#${checksContext} input[type='checkbox']`\n      );\n      const checkedInputs = document.querySelectorAll(\n        `#${checksContext} input[type='checkbox']:checked`\n      );\n      const indeterminateInputs = Array.from(totalInputs).filter((checkbox) => checkbox.indeterminate)\n\n      if (checkedInputs.length === 0 && indeterminateInputs.length === 0) {\n        global.checked = false;\n        global.indeterminate = false;\n      } else if (checkedInputs.length === totalInputs.length && indeterminateInputs.length === 0) {\n        global.checked = true;\n        global.indeterminate = false;\n      } else {\n        global.checked = true;\n        global.indeterminate = true;\n      }\n\n      totalInputs.forEach((input) => {\n        if (global.indeterminate && !input.indeterminate) {\n          input.classList.remove(\"ignore-filter\");\n        } else {\n          input.classList.add(\"ignore-filter\");\n        }\n        const subfilters = input.parentNode.parentNode.nextElementSibling;\n        if (subfilters && subfilters.classList.contains(\"filters__subfilters\")) {\n          if (input.indeterminate) {\n            subfilters.classList.remove(\"ignore-filters\");\n          } else {\n            subfilters.classList.add(\"ignore-filters\");\n          }\n        }\n      });\n    });\n  }\n\n  /**\n   * Update children checkboxes state when the current selection changes\n   * @private\n   * @param {Input} input - the checkbox to check its parent\n   * @returns {Void} - Returns nothing.\n   */\n  checkTheCheckParent(input) {\n    const checkBoxContext = $(input).parents(\".filters__subfilters\").attr(\"id\");\n    if (!checkBoxContext) {\n      this.checkGlobalCheck();\n      return;\n    }\n\n    const parentCheck = document.querySelector(\n      `[data-checkboxes-tree=${checkBoxContext}]`\n    );\n    const totalCheckSiblings = document.querySelectorAll(\n      `#${checkBoxContext} > div > [data-children-checkbox] > input, #${checkBoxContext} > [data-children-checkbox] > input`\n    );\n    const checkedSiblings = document.querySelectorAll(\n      `#${checkBoxContext} > div > [data-children-checkbox] > input:checked, #${checkBoxContext} > [data-children-checkbox] > input:checked`\n    );\n    const indeterminateSiblings = Array.from(totalCheckSiblings).filter((checkbox) => checkbox.indeterminate)\n\n    if (checkedSiblings.length === 0 && indeterminateSiblings.length === 0) {\n      parentCheck.checked = false;\n      parentCheck.indeterminate = false;\n    } else if (checkedSiblings.length === totalCheckSiblings.length && indeterminateSiblings.length === 0) {\n      parentCheck.checked = true;\n      parentCheck.indeterminate = false;\n    } else {\n      parentCheck.checked = true;\n      parentCheck.indeterminate = true;\n    }\n\n    totalCheckSiblings.forEach((sibling) => {\n      if (parent.indeterminate && !sibling.indeterminate) {\n        sibling.classList.remove(\"ignore-filter\");\n      } else {\n        sibling.classList.add(\"ignore-filter\");\n      }\n      const subfilters = sibling.parentNode.parentNode.nextElementSibling;\n      if (subfilters && subfilters.classList.contains(\"filters__subfilters\")) {\n        if (sibling.indeterminate) {\n          subfilters.classList.remove(\"ignore-filters\");\n        } else {\n          subfilters.classList.add(\"ignore-filters\");\n        }\n      }\n    });\n\n    this.checkTheCheckParent(parentCheck);\n  }\n}\n","/* eslint-disable no-div-regex, no-useless-escape, no-param-reassign, id-length */\n/* eslint max-lines: [\"error\", {\"max\": 350, \"skipBlankLines\": true}] */\n\n/**\n * A plain Javascript component that handles the form filter.\n * @class\n * @augments Component\n */\n\nimport delayed from \"src/decidim/delayed\"\nimport CheckBoxesTree from \"src/decidim/check_boxes_tree\"\nimport { registerCallback, unregisterCallback, pushState, replaceState, state } from \"src/decidim/history\"\nimport DataPicker from \"src/decidim/data_picker\"\n\nexport default class FormFilterComponent {\n  constructor($form) {\n    this.$form = $form;\n    this.id = this.$form.attr(\"id\") || this._getUID();\n    this.mounted = false;\n    this.changeEvents = true;\n    this.theCheckBoxesTree = new CheckBoxesTree();\n    this.theDataPicker = window.theDataPicker || new DataPicker($(\".data-picker\"));\n\n    this._updateInitialState();\n    this._onFormChange = delayed(this, this._onFormChange.bind(this));\n    this._onFormSubmit = delayed(this, this._onFormSubmit.bind(this));\n    this._onPopState = this._onPopState.bind(this);\n\n    if (window.Decidim.PopStateHandler) {\n      this.popStateSubmiter = false;\n    } else {\n      this.popStateSubmiter = true;\n      window.Decidim.PopStateHandler = this.id;\n    }\n  }\n\n  /**\n   * Handles the logic for unmounting the component\n   * @public\n   * @returns {Void} - Returns nothing\n   */\n  unmountComponent() {\n    if (this.mounted) {\n      this.mounted = false;\n      this.$form.off(\"change\", \"input, select\", this._onFormChange);\n      this.$form.off(\"submit\", this._onFormSubmit);\n\n      unregisterCallback(`filters-${this.id}`)\n    }\n  }\n\n  /**\n   * Handles the logic for mounting the component\n   * @public\n   * @returns {Void} - Returns nothing\n   */\n  mountComponent() {\n    if (this.$form.length > 0 && !this.mounted) {\n      this.mounted = true;\n      let queue = 0;\n\n      let contentContainer = $(this.$form.closest(\".filters\").parent().find(\".skip\").attr(\"href\"));\n      if (contentContainer.length === 0 && this.$form.data(\"remoteFill\")) {\n        contentContainer = this.$form.data(\"remoteFill\");\n      }\n      this.$form.on(\"change\", \"input:not([data-disable-dynamic-change]), select:not([data-disable-dynamic-change])\", this._onFormChange);\n      this.$form.on(\"submit\", this._onFormSubmit);\n\n      this.currentFormRequest = null;\n      this.$form.on(\"ajax:beforeSend\", (e) => {\n        if (this.currentFormRequest) {\n          this.currentFormRequest.abort();\n        }\n        this.currentFormRequest = e.originalEvent.detail[0];\n        queue += 1;\n        if (queue > 0 && contentContainer.length > 0 && !contentContainer.hasClass(\"spinner-container\")) {\n          contentContainer.addClass(\"spinner-container\");\n        }\n      });\n\n      this.$form.on(\"ajax:success\", () => {\n        queue -= 1;\n        if (queue <= 0 && contentContainer.length > 0) {\n          contentContainer.removeClass(\"spinner-container\");\n        }\n      });\n\n      this.$form.on(\"ajax:error\", () => {\n        queue -= 1;\n        if (queue <= 0 && contentContainer.length > 0) {\n          contentContainer.removeClass(\"spinner-container\");\n        }\n        this.$form.find(\".spinner-container\").addClass(\"hide\");\n      });\n\n      this.theCheckBoxesTree.setContainerForm(this.$form);\n\n      registerCallback(`filters-${this.id}`, (currentState) => {\n        this._onPopState(currentState);\n      });\n    }\n  }\n\n  /**\n   * Sets path in the browser history with the initial filters state, to allow to restoring it when using browser history.\n   * @private\n   * @returns {Void} - Returns nothing.\n   */\n  _updateInitialState() {\n    const [initialPath, initialState] = this._currentStateAndPath();\n    initialState._path = initialPath\n    replaceState(null, initialState);\n  }\n\n  /**\n   * Finds the current location.\n   * @param {boolean} withHost - include the host part in the returned location\n   * @private\n   * @returns {String} - Returns the current location.\n   */\n  _getLocation(withHost = true) {\n    const currentState = state();\n    let path = \"\";\n\n    if (currentState && currentState._path) {\n      path = currentState._path;\n    } else {\n      path = window.location.pathname + window.location.search + window.location.hash;\n    }\n\n    if (withHost) {\n      return window.location.origin + path;\n    }\n    return path;\n  }\n\n  /**\n   * Parse current location and get filter values.\n   * @private\n   * @returns {Object} - An object where a key correspond to a filter field\n   *                     and the value is the current value for the filter.\n   */\n  _parseLocationFilterValues() {\n    // Every location param is constructed like this: filter[key]=value\n    let regexpResult = decodeURIComponent(this._getLocation()).match(/filter\\[([^\\]]*)\\](?:\\[\\])?=([^&]*)/g);\n\n    // The RegExp g flag returns null or an array of coincidences. It doesn't return the match groups\n    if (regexpResult) {\n      const filterParams = regexpResult.reduce((acc, result) => {\n        const [, key, array, value] = result.match(/filter\\[([^\\]]*)\\](\\[\\])?=([^&]*)/);\n        if (array) {\n          if (!acc[key]) {\n            acc[key] = [];\n          }\n          acc[key].push(value);\n        } else {\n          acc[key] = value;\n        }\n        return acc;\n      }, {});\n\n      return filterParams;\n    }\n\n    return null;\n  }\n\n  /**\n   * Parse current location and get the current order.\n   * @private\n   * @returns {string} - The current order\n   */\n  _parseLocationOrderValue() {\n    const url = this._getLocation();\n    const match = url.match(/order=([^&]*)/);\n    const $orderMenu = this.$form.find(\".order-by .menu\");\n    let order = $orderMenu.find(\".menu a:first\").data(\"order\");\n\n    if (match) {\n      order = match[1];\n    }\n\n    return order;\n  }\n\n  /**\n   * Clears the form to start with a clean state.\n   * @private\n   * @returns {Void} - Returns nothing.\n   */\n  _clearForm() {\n    this.$form.find(\"input[type=checkbox]\").each((index, element) => {\n      element.checked = element.indeterminate = false;\n    });\n    this.$form.find(\"input[type=radio]\").attr(\"checked\", false);\n    this.$form.find(\".data-picker\").each((_index, picker) => {\n      this.theDataPicker.clear(picker);\n    });\n\n    // This ensure the form is reset in a valid state where a fieldset of\n    // radio buttons has the first selected.\n    this.$form.find(\"fieldset input[type=radio]:first\").each(function () {\n      // I need the this to iterate a jQuery collection\n      $(this)[0].checked = true; // eslint-disable-line no-invalid-this\n    });\n  }\n\n  /**\n   * Handles the logic when going back to a previous state in the filter form.\n   * @private\n   * @param {Object} currentState - state stored along with location URL\n   * @returns {Void} - Returns nothing.\n   */\n  _onPopState(currentState) {\n    this.changeEvents = false;\n    this._clearForm();\n\n    const filterParams = this._parseLocationFilterValues();\n    const currentOrder = this._parseLocationOrderValue();\n\n    this.$form.find(\"input.order_filter\").val(currentOrder);\n\n    if (filterParams) {\n      const fieldIds = Object.keys(filterParams);\n\n      // Iterate the filter params and set the correct form values\n      fieldIds.forEach((fieldName) => {\n        let value = filterParams[fieldName];\n\n        if (Array.isArray(value)) {\n          let checkboxes = this.$form.find(`input[type=checkbox][name=\"filter[${fieldName}][]\"]`);\n          this.theCheckBoxesTree.updateChecked(checkboxes, value);\n        } else {\n          this.$form.find(`*[name=\"filter[${fieldName}]\"]`).each((index, element) => {\n            switch (element.type) {\n            case \"hidden\":\n              break;\n            case \"radio\":\n            case \"checkbox\":\n              element.checked = value === element.value;\n              break;\n            default:\n              element.value = value;\n            }\n          });\n        }\n      });\n    }\n\n    // Retrieves picker information for selected values (value, text and link) from the state object\n    $(\".data-picker\", this.$form).each((_index, picker) => {\n      let pickerState = currentState[picker.id];\n      if (pickerState) {\n        this.theDataPicker.load(picker, pickerState);\n      }\n    })\n\n    // Only one instance should submit the form on browser history navigation\n    if (this.popStateSubmiter) {\n      Rails.fire(this.$form[0], \"submit\", { from: \"pop\" });\n    }\n\n    this.changeEvents = true;\n  }\n\n  /**\n   * Handles the logic to decide whether the form should be submitted or not\n   * after a form change event. The form is only submitted when changes have\n   * occurred.\n   * @private\n   * @returns {Void} - Returns nothing.\n   */\n  _onFormChange() {\n    if (!this.changeEvents) {\n      return;\n    }\n\n    const [newPath] = this._currentStateAndPath();\n    const path = this._getLocation(false);\n\n    if (newPath === path) {\n      return;\n    }\n\n    Rails.fire(this.$form[0], \"submit\");\n  }\n\n  /**\n   * Saves the current state of the search on form submit to update the search\n   * parameters to the URL and store the picker states.\n   * @private\n   * @param {jQuery.Event} ev The event that caused the form to submit.\n   * @returns {Void} - Returns nothing.\n   */\n  _onFormSubmit(ev) {\n    const eventDetail = ev.originalEvent.detail;\n    if (eventDetail && eventDetail.from === \"pop\") {\n      return;\n    }\n\n    const [newPath, newState] = this._currentStateAndPath();\n\n    pushState(newPath, newState);\n    this._saveFilters(newPath);\n  }\n\n  /**\n   * Calculates the path and the state associated to the filters inputs.\n   * @private\n   * @returns {Array} - Returns an array with the path and the state for the current filters state.\n   */\n  _currentStateAndPath() {\n    const formAction = this.$form.attr(\"action\");\n    const params = this.$form.find(\":not(.ignore-filters)\").find(\"select:not(.ignore-filter), input:not(.ignore-filter)\").serialize();\n\n    let path = \"\";\n    let currentState = {};\n\n    if (formAction.indexOf(\"?\") < 0) {\n      path = `${formAction}?${params}`;\n    } else {\n      path = `${formAction}&${params}`;\n    }\n\n    // Stores picker information for selected values (value, text and link) in the currentState object\n    $(\".data-picker\", this.$form).each((_index, picker) => {\n      currentState[picker.id] = this.theDataPicker.save(picker);\n    })\n\n    return [path, currentState];\n  }\n\n  /**\n   * Generates a unique identifier for the form.\n   * @private\n   * @returns {String} - Returns a unique identifier\n   */\n  _getUID() {\n    return `filter-form-${new Date().getUTCMilliseconds()}-${Math.floor(Math.random() * 10000000)}`;\n  }\n\n  /**\n   * Saves the changed filters on sessionStorage API.\n   * @private\n   * @param {string} pathWithQueryStrings - path with all the query strings for filter. To be used with backToListLink().\n   * @returns {Void} - Returns nothing.\n   */\n  _saveFilters(pathWithQueryStrings) {\n    if (!window.sessionStorage) {\n      return;\n    }\n\n    const pathName = this.$form.attr(\"action\");\n    sessionStorage.setItem(\"filteredParams\", JSON.stringify({[pathName]: pathWithQueryStrings}));\n  }\n\n}\n","/**\n * Luxembourgish localisation\n */\n;(function(jQuery) {\n  jQuery.fn.fdatepicker.dates.lb = {\n    days: [\"Sonndeg\", \"Mindeg\", \"Dnschdeg\", \"Mttwoch\", \"Donneschdeg\", \"Freideg\", \"Samschdeg\", \"Sonndeg\"],\n    daysShort: [\"Son\", \"Mi\", \"Dn\", \"Mt\", \"Don\", \"Fre\", \"Sam\", \"Son\"],\n    daysMin: [\"So\", \"M\", \"D\", \"M\", \"Do\", \"Fr\", \"Sa\", \"So\"],\n    months: [\"Januar\", \"Februar\", \"Merz\", \"Abrll\", \"Mee\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"],\n    monthsShort: [\"Jan\", \"Febr\", \"Mrz\", \"Abr\", \"Mee\", \"Jun\", \"Jul\", \"Aug\", \"Sept\", \"Okt\", \"Nov\", \"Dez\"],\n    today: \"Haut\"\n  };\n}(jQuery));\n","$(() => {\n  $(\".gallery__container\").on(\"closed.zf.callout\", (event) => {\n    $(event.target).remove();\n  });\n});\n","/* eslint no-unused-vars: 0 */\nimport Tribute from \"src/decidim/vendor/tribute\"\n\n$(() => {\n  const $hashtagContainer = $(\".js-hashtags\");\n  const nodatafound = $hashtagContainer.attr(\"data-noresults\");\n\n  let noMatchTemplate = null\n  if (nodatafound) {\n    noMatchTemplate = () => `<li>${nodatafound}</li>`;\n  }\n\n  // Listener for the event triggered by quilljs\n  let cursor = \"\";\n  $hashtagContainer.on(\"quill-position\", function(event) {\n    if (event.detail !== null) {\n      // When replacing the text content after selecting a hashtag, we only need\n      // to know the hashtag's start position as that is the point which we want\n      // to replace.\n      let quill = event.target.__quill;\n      if (quill.getText(event.detail.index - 1, 1) === \"#\") {\n        cursor = event.detail.index;\n      }\n    }\n  });\n\n  /* eslint no-use-before-define: [\"error\", { \"variables\": false }]*/\n  let remoteSearch = function(text, cb) {\n    $.post(\"/api\", {query: `{hashtags(name:\"${text}\") {name}}`}).\n\n      then((response) => {\n        let data = response.data.hashtags || {};\n        cb(data)\n      }).fail(function() {\n        cb([])\n      }).always(() => {\n      // This function runs Tribute every single time you type something\n      // So we must evalute DOM properties after each\n        const $parent = $(tribute.current.element).parent()\n        $parent.addClass(\"is-active\")\n\n        // We need to move the container to the wrapper selected\n        const $tribute = $parent.find(\".tribute-container\");\n        // Remove the inline styles, relative to absolute positioning\n        $tribute.removeAttr(\"style\");\n      })\n  };\n\n  // tribute.js docs - http://github.com/zurb/tribute\n  /* global Tribute*/\n  let tribute = new Tribute({\n    trigger: \"#\",\n    values: function (text, cb) {\n      remoteSearch(text, (hashtags) => cb(hashtags));\n    },\n    positionMenu: true,\n    menuContainer: null,\n    fillAttr: \"name\",\n    noMatchTemplate: noMatchTemplate,\n    lookup: (item) => item.name,\n    selectTemplate: function(item) {\n      if (typeof item === \"undefined\") {\n        return null;\n      }\n      if (this.range.isContentEditable(this.current.element)) {\n        // Check quill.js\n        if ($(this.current.element).hasClass(\"ql-editor\")) {\n          let editorContainer = $(this.current.element).parent().get(0);\n          let quill = editorContainer.__quill;\n          quill.insertText(cursor - 1, `#${item.original.name} `, Quill.sources.API);\n          // cursor position + hashtag length + \"#\" sign + space\n          let position = cursor + item.original.name.length + 2;\n\n          let next = 0;\n          if (quill.getLength() > position) {\n            next = position\n          } else {\n            next = quill.getLength() - 1\n          }\n          // Workaround https://github.com/quilljs/quill/issues/731\n          setTimeout(function () {\n            quill.setSelection(next, 0);\n          }, 500);\n\n          return \"\"\n        }\n        return `<span contenteditable=\"false\">#${item.original.name}</span>`;\n      }\n      return `#${item.original.name}`;\n    },\n    menuItemTemplate: function(item) {\n      let tpl = `<strong>${item.original.name}</strong>`;\n      return tpl;\n    }\n  });\n\n  // Tribute needs to be attached to the `.ql-editor` element as said at:\n  // https://github.com/quilljs/quill/issues/1816\n  //\n  // For this reason we need to wait a bit for quill to initialize itself.\n  setTimeout(function() {\n    $hashtagContainer.each((index, item) => {\n      let $qlEditor = $(\".ql-editor\", item);\n      if ($qlEditor.length > 0) {\n        tribute.attach($qlEditor);\n      } else {\n        tribute.attach(item);\n      }\n    });\n  }, 1000);\n\n  // DOM manipulation\n  $hashtagContainer.on(\"focusin\", (event) => {\n    // Set the parent container relative to the current element\n\n    tribute.menuContainer = event.target.parentNode;\n  });\n  $hashtagContainer.on(\"focusout\", (event) => {\n    let $parent = $(event.target).parent();\n\n    if ($parent.hasClass(\"is-active\")) {\n      $parent.removeClass(\"is-active\");\n    }\n  });\n  $hashtagContainer.on(\"input\", (event) => {\n    let $parent = $(event.target).parent();\n\n    if (tribute.isActive) {\n      // We need to move the container to the wrapper selected\n      let $tribute = $(\".tribute-container\");\n      $tribute.appendTo($parent);\n      // Parent adaptation\n      $parent.addClass(\"is-active\");\n    } else {\n      $parent.removeClass(\"is-active\");\n    }\n  });\n});\n","/* eslint no-unused-vars: 0 */\nimport Tribute from \"src/decidim/vendor/tribute\"\n\n$(() => {\n  const $mentionContainer = $(\".js-mentions\");\n  const nodatafound = $mentionContainer.attr(\"data-noresults\");\n\n  let noMatchTemplate = null\n  if (nodatafound) {\n    noMatchTemplate = () => `<li>${nodatafound}</li>`;\n  }\n\n  // Listener for the event triggered by quilljs\n  let cursor = \"\";\n  $mentionContainer.on(\"quill-position\", (event) => {\n    if (event.detail !== null) {\n      // When replacing the text content after selecting a hashtag, we only need\n      // to know the hashtag's start position as that is the point which we want\n      // to replace.\n      let quill = event.target.__quill;\n      if (quill.getText(event.detail.index - 1, 1) === \"@\") {\n        cursor = event.detail.index;\n      }\n    }\n  });\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds\n  /* eslint no-invalid-this: 0 */\n  /* eslint consistent-this: 0 */\n  /* eslint prefer-reflect: 0 */\n  const debounce = function(callback, wait) {\n    let timeout = null;\n    return (...args) => {\n      const context = this;\n      clearTimeout(timeout);\n      timeout = setTimeout(() => callback.apply(context, args), wait);\n    };\n  }\n\n  /* eslint no-use-before-define: [\"error\", { \"variables\": false }]*/\n  let remoteSearch = function(text, cb) {\n    let query = `{users(filter:{wildcard:\"${text}\"}){nickname,name,avatarUrl,__typename,...on UserGroup{membersCount}}}`;\n    $.post(\"/api\", {query: query}).\n      then((response) => {\n        let data = response.data.users || {};\n        cb(data)\n      }).fail(function() {\n        cb([])\n      }).always(() => {\n      // This function runs Tribute every single time you type something\n      // So we must evalute DOM properties after each\n        const $parent = $(tribute.current.element).parent();\n        $parent.addClass(\"is-active\");\n\n        // We need to move the container to the wrapper selected\n        const $tribute = $parent.find(\".tribute-container\");\n        // Remove the inline styles, relative to absolute positioning\n        $tribute.removeAttr(\"style\");\n      })\n  };\n\n  // tribute.js docs - http://github.com/zurb/tribute\n  /* global Tribute*/\n  let tribute = new Tribute({\n    trigger: \"@\",\n    // avoid overloading the API if the user types too fast\n    values: debounce(function (text, cb) {\n      remoteSearch(text, (users) => cb(users));\n    }, 250),\n    positionMenu: true,\n    menuContainer: null,\n    allowSpaces: true,\n    menuItemLimit: 5,\n    fillAttr: \"nickname\",\n    selectClass: \"highlight\",\n    noMatchTemplate: noMatchTemplate,\n    lookup: (item) => item.nickname + item.name,\n    selectTemplate: function(item) {\n      if (typeof item === \"undefined\") {\n        return null;\n      }\n      if (this.range.isContentEditable(this.current.element)) {\n        // Check quill.js\n        if ($(this.current.element).hasClass(\"ql-editor\")) {\n          let editorContainer = $(this.current.element).parent().get(0);\n          let quill = editorContainer.__quill;\n          quill.insertText(cursor - 1, `${item.original.nickname} `, Quill.sources.API);\n          // cursor position + nickname length + \"@\" sign + space\n          let position = cursor + item.original.nickname.length + 2\n\n          let next = 0;\n          if (quill.getLength() > position) {\n            next = position\n          } else {\n            next = quill.getLength() - 1\n          }\n          // Workaround https://github.com/quilljs/quill/issues/731\n          setTimeout(function () {\n            quill.setSelection(next, 0);\n          }, 500);\n\n          return \"\"\n        }\n        return `<span contenteditable=\"false\">${item.original.nickname}</span>`;\n      }\n      return item.original.nickname;\n    },\n    menuItemTemplate: function(item) {\n      let svg = \"\";\n      if (window.Decidim && item.original.__typename === \"UserGroup\") {\n        const iconsPath =  window.Decidim.config.get(\"icons_path\");\n\n        svg = `<span class=\"is-group\">${item.original.membersCount}x <svg class=\"icon--members icon\"><use href=\"${iconsPath}#icon-members\"/></svg></span>`;\n      }\n      return `<div class=\"tribute-item ${item.original.__typename}\">\n      <span class=\"author__avatar\"><img src=\"${item.original.avatarUrl}\" alt=\"author-avatar\"></span>\n        <strong>${item.original.nickname}</strong>\n        <small>${item.original.name}</small>\n        ${svg}\n      </div>`;\n    }\n  });\n\n  let setupEvents = function($element) {\n    // DOM manipulation\n    $element.on(\"focusin\", (event) => {\n      // Set the parent container relative to the current element\n      tribute.menuContainer = event.target.parentNode;\n    });\n    $element.on(\"focusout\", (event) => {\n      let $parent = $(event.target).parent();\n\n      if ($parent.hasClass(\"is-active\")) {\n        $parent.removeClass(\"is-active\");\n      }\n    });\n    $element.on(\"input\", (event) => {\n      let $parent = $(event.target).parent();\n\n      if (tribute.isActive) {\n        // We need to move the container to the wrapper selected\n        let $tribute = $(\".tribute-container\");\n        $tribute.appendTo($parent);\n\n        // Parent adaptation\n        $parent.addClass(\"is-active\");\n      } else {\n        $parent.removeClass(\"is-active\");\n      }\n    });\n  };\n\n  setupEvents($mentionContainer);\n\n  // This allows external libraries (like React) to use the component\n  // by simply firing and event targeting the element where to attach Tribute\n  $(document).on(\"attach-mentions-element\", (event, element) => {\n    if (!element) {\n      return;\n    }\n    tribute.attach(element);\n    // Due a bug in Tribute, re-add menu to DOM if it has been removed\n    // See https://github.com/zurb/tribute/issues/140\n    if (tribute.menu && !document.body.contains(tribute.menu)) {\n      tribute.range.getDocument().body.appendChild(tribute.menu);\n    }\n    setupEvents($(element));\n  });\n\n  // tribute.attach($mentionContainer);\n  // Tribute needs to be attached to the `.ql-editor` element as said at:\n  // https://github.com/quilljs/quill/issues/1816\n  //\n  // For this reason we need to wait a bit for quill to initialize itself.\n  setTimeout(function() {\n    $mentionContainer.each((index, item) => {\n      let $qlEditor = $(\".ql-editor\", item);\n      if ($qlEditor.length > 0) {\n        tribute.attach($qlEditor);\n      } else {\n        tribute.attach(item);\n      }\n    });\n  }, 1000);\n});\n\n","import dayjs from \"dayjs\"\n\n$(() => {\n  let sessionTimeOutEnabled = true;\n  const $timeoutModal = $(\"#timeoutModal\");\n  const timeoutInSeconds = parseInt($timeoutModal.data(\"session-timeout\"), 10);\n  const secondsUntilTimeoutPath = $timeoutModal.data(\"seconds-until-timeout-path\");\n  const heartbeatPath = $timeoutModal.data(\"heartbeat-path\");\n  const interval = parseInt($timeoutModal.data(\"session-timeout-interval\"), 10);\n  const preventTimeOutSeconds = $timeoutModal.data(\"prevent-timeout-seconds\");\n  let endsAt = dayjs().add(timeoutInSeconds, \"seconds\");\n  let lastAction = dayjs();\n  const $continueSessionButton = $(\"#continueSession\");\n  let lastActivityCheck = dayjs();\n  // 5 * 60 seconds = 5 Minutes\n  const activityCheckInterval = 5 * 60;\n  const preventTimeOutUntil = dayjs().add(preventTimeOutSeconds, \"seconds\");\n\n  // Ajax request is made at timeout_modal.html.erb\n  $continueSessionButton.on(\"click\", () => {\n    $timeoutModal.foundation(\"close\");\n    // In admin panel we have to hide all overlays\n    $(\".reveal-overlay\").css(\"display\", \"none\");\n    lastActivityCheck = dayjs();\n  })\n\n  if (isNaN(interval)) {\n    return;\n  }\n  if (!timeoutInSeconds) {\n    return;\n  }\n\n  const disableSessionTimeout = () => {\n    sessionTimeOutEnabled = false;\n  }\n\n  const enableSessionTimeout = () => {\n    sessionTimeOutEnabled = true;\n  }\n\n  const setTimer = (secondsUntilExpiration) => {\n    if (!secondsUntilExpiration) {\n      return;\n    }\n    endsAt = dayjs().add(secondsUntilExpiration, \"seconds\");\n  }\n\n  const sessionTimeLeft = () => {\n    return $.ajax({\n      method: \"GET\",\n      url: secondsUntilTimeoutPath,\n      contentType: \"application/json\",\n      headers: {\n        \"X-CSRF-Token\": $(\"meta[name=csrf-token]\").attr(\"content\")\n      }\n    });\n  }\n\n  const heartbeat = () => {\n    return $.ajax({\n      method: \"POST\",\n      url: heartbeatPath,\n      contentType: \"application/javascript\"\n    });\n  }\n\n  const userBeenActiveSince = (seconds) => {\n    return (dayjs() - lastAction) / 1000 < seconds;\n  }\n\n  const exitInterval = setInterval(() => {\n    const timeSinceLastActivityCheckInSeconds = Math.round((dayjs() - lastActivityCheck) / 1000);\n\n    const popupOpen = $(\"#timeoutModal\").parent().css(\"display\") === \"block\";\n    if (!popupOpen && timeSinceLastActivityCheckInSeconds >= activityCheckInterval) {\n      lastActivityCheck = dayjs();\n      if (userBeenActiveSince(activityCheckInterval)) {\n        heartbeat();\n        return;\n      }\n    }\n\n    const timeRemaining = Math.round((endsAt - dayjs()) / 1000);\n    if (timeRemaining > 170) {\n      return;\n    }\n\n    if (dayjs() < preventTimeOutUntil) {\n      heartbeat();\n      return;\n    }\n\n    sessionTimeLeft().then((result) => {\n      const secondsUntilSessionExpires = result.seconds_remaining;\n      setTimer(secondsUntilSessionExpires);\n\n      if (!sessionTimeOutEnabled) {\n        heartbeat();\n      } else if (secondsUntilSessionExpires <= 90) {\n        $timeoutModal.find(\"#reveal-hidden-sign-out\")[0].click();\n      } else if (secondsUntilSessionExpires <= 150) {\n        $timeoutModal.foundation(\"open\");\n      }\n    });\n  }, interval);\n\n  $(document).mousemove(() => {\n    lastAction = dayjs();\n  })\n  $(document).scroll(() => {\n    lastAction = dayjs();\n  })\n  $(document).keypress(() => {\n    lastAction = dayjs();\n  })\n\n  // Devise restarts its own timer on ajax requests,\n  // so here we restart our.\n  $(document).on(\"ajax:complete\", () => {\n    setTimer(timeoutInSeconds);\n  });\n\n  $(document).ajaxComplete((_event, _xhr, settings) => {\n    if (settings && settings.url === secondsUntilTimeoutPath) {\n      return;\n    }\n    setTimer(timeoutInSeconds);\n  });\n\n  window.addEventListener(\"beforeunload\", () => {\n    clearInterval(exitInterval);\n    return;\n  });\n\n  window.Decidim.enableSessionTimeout = enableSessionTimeout\n  window.Decidim.disableSessionTimeout = disableSessionTimeout\n});\n","/* eslint-disable */\n\n/* =========================================================\n * foundation-datepicker.js\n * Copyright 2015 Peter Beno, najlepsiwebdesigner@gmail.com, @benopeter\n * project website http://foundation-datepicker.peterbeno.com\n * ========================================================= */\n\n// This file is a modified version of the original file\n// See\n//  - https://github.com/decidim/decidim/pull/1207\n//  - https://github.com/decidim/decidim/pull/2512\n//  - https://github.com/decidim/decidim/pull/3515\n\n!(function($) {\n\n  function UTCDate() {\n    return new Date(Date.UTC(...arguments));\n  }\n\n  function UTCToday() {\n    let today = new Date();\n    return UTCDate(today.getUTCFullYear(), today.getUTCMonth(), today.getUTCDate());\n  }\n\n  let Datepicker = function(element, options) {\n    let that = this;\n\n    this.element = $(element);\n    this.autoShow = (options.autoShow == undefined ? true : options.autoShow);\n    this.appendTo = options.appendTo || \"body\";\n    this.closeButton = options.closeButton;\n    this.language = options.language || this.element.data(\"date-language\") || \"en\";\n    this.language = this.language in dates ? this.language : this.language.split(\"-\")[0]; // Check if \"de-DE\" style date is available, if not language should fallback to 2 letter code eg \"de\"\n    this.language = this.language in dates ? this.language : \"en\";\n    this.isRTL = dates[this.language].rtl || false;\n    this.format = DPGlobal.parseFormat(options.format || this.element.data(\"date-format\") || dates[this.language].format || \"mm/dd/yyyy\");\n    this.formatText = options.format || this.element.data(\"date-format\") || dates[this.language].format || \"mm/dd/yyyy\";\n    this.isInline = false;\n    this.isInput = this.element.is(\"input\");\n    this.component = this.element.is(\".date\") ? this.element.find(\".prefix, .postfix\") : false;\n    this.hasInput = this.component && this.element.find(\"input\").length;\n    this.disableDblClickSelection = options.disableDblClickSelection;\n    this.onRender = options.onRender || function() {};\n    if (this.component && this.component.length === 0) {\n      this.component = false;\n    }\n    this.linkField = options.linkField || this.element.data(\"link-field\") || false;\n    this.linkFormat = DPGlobal.parseFormat(options.linkFormat || this.element.data(\"link-format\") || \"yyyy-mm-dd hh:ii:ss\");\n    this.minuteStep = options.minuteStep || this.element.data(\"minute-step\") || 5;\n    this.pickerPosition = options.pickerPosition || this.element.data(\"picker-position\") || \"bottom-right\";\n    this.initialDate = options.initialDate || null;\n    this.faCSSprefix = options.faCSSprefix || \"fa\";\n    this.leftArrow = options.leftArrow || `<i class=\"${this.faCSSprefix} ${this.faCSSprefix}-chevron-left fi-arrow-left\"/>`;\n    this.rightArrow = options.rightArrow || `<i class=\"${this.faCSSprefix} ${this.faCSSprefix}-chevron-right fi-arrow-right\"/>`;\n    this.closeIcon = options.closeIcon || `<i class=\"${this.faCSSprefix} ${this.faCSSprefix}-remove ${this.faCSSprefix}-times fi-x\"></i>`;\n\n\n    this.minView = 0;\n    if (\"minView\" in options) {\n      this.minView = options.minView;\n    } else if (\"minView\" in this.element.data()) {\n      this.minView = this.element.data(\"min-view\");\n    }\n    this.minView = DPGlobal.convertViewMode(this.minView);\n\n    this.maxView = DPGlobal.modes.length - 1;\n    if (\"maxView\" in options) {\n      this.maxView = options.maxView;\n    } else if (\"maxView\" in this.element.data()) {\n      this.maxView = this.element.data(\"max-view\");\n    }\n    this.maxView = DPGlobal.convertViewMode(this.maxView);\n\n    this.startViewMode = \"month\";\n    if (\"startView\" in options) {\n      this.startViewMode = options.startView;\n    } else if (\"startView\" in this.element.data()) {\n      this.startViewMode = this.element.data(\"start-view\");\n    }\n    this.startViewMode = DPGlobal.convertViewMode(this.startViewMode);\n    this.viewMode = this.startViewMode;\n\n    if (!(\"minView\" in options) && !(\"maxView\" in options) && !(this.element.data(\"min-view\")) && !(this.element.data(\"max-view\"))) {\n      this.pickTime = false;\n      if (\"pickTime\" in options) {\n        this.pickTime = options.pickTime;\n      }\n      if (this.pickTime == true) {\n        this.minView = 0;\n        this.maxView = 4;\n      } else {\n        this.minView = 2;\n        this.maxView = 4;\n      }\n    }\n\n    this.forceParse = true;\n    if (\"forceParse\" in options) {\n      this.forceParse = options.forceParse;\n    } else if (\"dateForceParse\" in this.element.data()) {\n      this.forceParse = this.element.data(\"date-force-parse\");\n    }\n\n\n    this.picker = $(DPGlobal.template(this.leftArrow, this.rightArrow, this.closeIcon)).\n      appendTo(this.isInline ? this.element : this.appendTo).\n      on({\n        click: $.proxy(this.click, this),\n        mousedown: $.proxy(this.mousedown, this)\n      });\n    if (this.closeButton) {\n      this.picker.find(\"a.datepicker-close\").show();\n    } else {\n      this.picker.find(\"a.datepicker-close\").hide();\n    }\n\n    if (this.isInline) {\n      this.picker.addClass(\"datepicker-inline\");\n    } else {\n      this.picker.addClass(\"datepicker-dropdown dropdown-menu\");\n    }\n    if (this.isRTL) {\n      this.picker.addClass(\"datepicker-rtl\");\n\n      this.picker.find(\".date-switch\").each(function() {\n        $(this).parent().prepend($(this).siblings(\".next\"));\n        $(this).parent().append($(this).siblings(\".prev\"));\n      })\n      this.picker.find(\".prev, .next\").toggleClass(\"prev next\");\n\n    }\n    $(document).on(\"mousedown\", function(e) {\n      if (that.isInput && e.target === that.element[0]) {\n        return;\n      }\n\n      // Clicked outside the datepicker, hide it\n      if ($(e.target).closest(\".datepicker.datepicker-inline, .datepicker.datepicker-dropdown\").length === 0) {\n        that.hide();\n      }\n    });\n\n    this.autoclose = true;\n    if (\"autoclose\" in options) {\n      this.autoclose = options.autoclose;\n    } else if (\"dateAutoclose\" in this.element.data()) {\n      this.autoclose = this.element.data(\"date-autoclose\");\n    }\n\n    this.keyboardNavigation = true;\n    if (\"keyboardNavigation\" in options) {\n      this.keyboardNavigation = options.keyboardNavigation;\n    } else if (\"dateKeyboardNavigation\" in this.element.data()) {\n      this.keyboardNavigation = this.element.data(\"date-keyboard-navigation\");\n    }\n\n    this.todayBtn = (options.todayBtn || this.element.data(\"date-today-btn\") || false);\n    this.todayHighlight = (options.todayHighlight || this.element.data(\"date-today-highlight\") || false);\n\n    this.calendarWeeks = false;\n    if (\"calendarWeeks\" in options) {\n      this.calendarWeeks = options.calendarWeeks;\n    } else if (\"dateCalendarWeeks\" in this.element.data()) {\n      this.calendarWeeks = this.element.data(\"date-calendar-weeks\");\n    }\n    if (this.calendarWeeks)\n    {this.picker.find(\"tfoot th.today\").\n      attr(\"colspan\", function(i, val) {\n        return parseInt(val) + 1;\n      });}\n\n    this.weekStart = ((options.weekStart || this.element.data(\"date-weekstart\") || dates[this.language].weekStart || 0) % 7);\n    this.weekEnd = ((this.weekStart + 6) % 7);\n    this.startDate = -Infinity;\n    this.endDate = Infinity;\n    this.daysOfWeekDisabled = [];\n    this.datesDisabled = [];\n    this.setStartDate(options.startDate || this.element.data(\"date-startdate\"));\n    this.setEndDate(options.endDate || this.element.data(\"date-enddate\"));\n    this.setDaysOfWeekDisabled(options.daysOfWeekDisabled || this.element.data(\"date-days-of-week-disabled\"));\n    this.setDatesDisabled(options.datesDisabled || this.element.data(\"dates-disabled\"));\n\n    if (this.initialDate != null) {\n      this.date = this.viewDate = DPGlobal.parseDate(this.initialDate, this.format, this.language);\n      this.setValue();\n    }\n\n    this.fillDow();\n    this.fillMonths();\n    this.update();\n\n    this.showMode();\n\n    if (this.isInline) {\n      this.show();\n    }\n\n    this._attachEvents();\n  };\n\n  Datepicker.prototype = {\n    constructor: Datepicker,\n\n    _events: [],\n    _attachEvents: function() {\n      this._detachEvents();\n      if (this.isInput) { // single input\n        if (!this.keyboardNavigation) {\n          this._events = [\n            [this.element, {\n              focus: (this.autoShow) ? $.proxy(this.show, this) : function() {}\n            }]\n          ];\n        } else {\n          this._events = [\n            [this.element, {\n              focus: (this.autoShow) ? $.proxy(this.show, this) : function() {},\n              keyup: $.proxy(this.update, this),\n              keydown: $.proxy(this.keydown, this),\n              click: (this.element.attr(\"readonly\")) ? $.proxy(this.show, this) : function() {}\n            }]\n          ];\n        }\n      }\n      else if (this.component && this.hasInput) { // component: input + button\n        this._events = [\n          // For components that are not readonly, allow keyboard nav\n          [this.element.find(\"input\"), {\n            focus: (this.autoShow) ? $.proxy(this.show, this) : function() {},\n            keyup: $.proxy(this.update, this),\n            keydown: $.proxy(this.keydown, this)\n          }],\n          [this.component, {\n            click: $.proxy(this.show, this)\n          }]\n        ];\n      } else if (this.element.is(\"div\")) { // inline datepicker\n        this.isInline = true;\n      } else {\n        this._events = [\n          [this.element, {\n            click: $.proxy(this.show, this)\n          }]\n        ];\n      }\n\n      if (this.disableDblClickSelection) {\n        this._events[this._events.length] = [\n          this.element, {\n            dblclick: function(e) {\n              e.preventDefault();\n              e.stopPropagation();\n              $(this).blur()\n            }\n          }\n        ];\n      }\n\n      for (var el, ev, i = 0; i < this._events.length; i++) {\n        el = this._events[i][0];\n        ev = this._events[i][1];\n        el.on(ev);\n      }\n    },\n    _detachEvents: function() {\n      for (var el, ev, i = 0; i < this._events.length; i++) {\n        el = this._events[i][0];\n        ev = this._events[i][1];\n        el.off(ev);\n      }\n      this._events = [];\n    },\n\n    show: function(e) {\n      this.picker.show();\n      this.height = this.component ? this.component.outerHeight() : this.element.outerHeight();\n      this.update();\n      this.place();\n      $(window).on(\"resize\", $.proxy(this.place, this));\n      if (e) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n      this.element.trigger({\n        type: \"show\",\n        date: this.date\n      });\n    },\n\n    hide: function(e) {\n      if (this.isInline) {return;}\n      if (!this.picker.is(\":visible\")) {return;}\n      this.picker.hide();\n      $(window).off(\"resize\", this.place);\n      this.viewMode = this.startViewMode;\n      this.showMode();\n      if (!this.isInput) {\n        $(document).off(\"mousedown\", this.hide);\n      }\n\n      if (\n        this.forceParse &&\n                (\n                  this.isInput && this.element.val() ||\n                    this.hasInput && this.element.find(\"input\").val()\n                )\n      )\n      {this.setValue();}\n      this.element.trigger({\n        type: \"hide\",\n        date: this.date\n      });\n    },\n\n    remove: function() {\n      this._detachEvents();\n      this.picker.remove();\n      delete this.element.data().datepicker;\n    },\n\n    getDate: function() {\n      let d = this.getUTCDate();\n      return new Date(d.getTime() + (d.getTimezoneOffset() * 60000));\n    },\n\n    getUTCDate: function() {\n      return this.date;\n    },\n\n    setDate: function(d) {\n      this.setUTCDate(new Date(d.getTime() - (d.getTimezoneOffset() * 60000)));\n    },\n\n    setUTCDate: function(d) {\n      this.date = d;\n      this.setValue();\n    },\n\n    setValue: function() {\n      let formatted = this.getFormattedDate();\n      if (!this.isInput) {\n        if (this.component) {\n          this.element.find(\"input\").val(formatted);\n        }\n        this.element.data(\"date\", formatted);\n      } else {\n        this.element.val(formatted);\n      }\n    },\n\n    getFormattedDate: function(format) {\n      if (format === undefined)\n      {format = this.format;}\n      return DPGlobal.formatDate(this.date, format, this.language);\n    },\n\n    setStartDate: function(startDate) {\n      this.startDate = startDate || -Infinity;\n      if (this.startDate !== -Infinity) {\n        this.startDate = DPGlobal.parseDate(this.startDate, this.format, this.language);\n      }\n      this.update();\n      this.updateNavArrows();\n    },\n\n    setEndDate: function(endDate) {\n      this.endDate = endDate || Infinity;\n      if (this.endDate !== Infinity) {\n        this.endDate = DPGlobal.parseDate(this.endDate, this.format, this.language);\n      }\n      this.update();\n      this.updateNavArrows();\n    },\n\n    setDaysOfWeekDisabled: function(daysOfWeekDisabled) {\n      this.daysOfWeekDisabled = daysOfWeekDisabled || [];\n      if (!$.isArray(this.daysOfWeekDisabled)) {\n        this.daysOfWeekDisabled = this.daysOfWeekDisabled.split(/,\\s*/);\n      }\n      this.daysOfWeekDisabled = $.map(this.daysOfWeekDisabled, function(d) {\n        return parseInt(d, 10);\n      });\n      this.update();\n      this.updateNavArrows();\n    },\n\n    setDatesDisabled: function(datesDisabled) {\n      this.datesDisabled = datesDisabled || [];\n      if (!$.isArray(this.datesDisabled)) {\n        this.datesDisabled = this.datesDisabled.split(/,\\s*/);\n      }\n      this.datesDisabled = $.map(this.datesDisabled, function(d) {\n        return DPGlobal.parseDate(d, this.format, this.language).valueOf();\n      });\n      this.update();\n      this.updateNavArrows();\n    },\n\n    place: function() {\n      if (this.isInline) {return;}\n      let zIndexes = [];\n      this.element.parents().map(function() {\n        if ($(this).css(\"z-index\") != \"auto\") {\n          zIndexes.push(parseInt($(this).css(\"z-index\")));\n        }\n      });\n      let zIndex = zIndexes.sort(function(a, b) { return a - b; }).pop() + 10;\n      let textbox = this.component ? this.component : this.element;\n      let offset = textbox.offset();\n      let height = textbox.outerHeight() + parseInt(textbox.css(\"margin-top\"));\n      let width = textbox.outerWidth() + parseInt(textbox.css(\"margin-left\"));\n      let fullOffsetTop = offset.top + height;\n      let offsetLeft = offset.left;\n      this.picker.removeClass(\"datepicker-top datepicker-bottom\");\n      // can we show it on top?\n      let canShowTop = ($(window).scrollTop() < offset.top - this.picker.outerHeight());\n      let canShowBottom = (fullOffsetTop + this.picker.outerHeight()) < $(window).scrollTop() + $(window).height();\n      // If the datepicker is going to be below the window, show it on top of the input if it fits\n      if (!canShowBottom && canShowTop) {\n        fullOffsetTop = offset.top - this.picker.outerHeight();\n        this.picker.addClass(\"datepicker-top\");\n      }\n      else {\n        // Scroll up if we cannot show it on bottom or top (for mobile devices)\n        if (!canShowBottom) {$(window).scrollTop(offset.top);}\n        this.picker.addClass(\"datepicker-bottom\");\n      }\n\n      // if the datepicker is going to go past the right side of the window, we want\n      // to set the right position so the datepicker lines up with the textbox\n      if (offset.left + this.picker.width() >= $(window).width()) {\n        offsetLeft = (offset.left + width) - this.picker.width();\n      }\n      this.picker.css({\n        top: fullOffsetTop,\n        left: offsetLeft,\n        zIndex: zIndex\n      });\n    },\n\n    update: function() {\n      let date,\n          fromArgs = false;\n      let currentVal = this.isInput ? this.element.val() : this.element.data(\"date\") || this.element.find(\"input\").val();\n      if (arguments && arguments.length && (typeof arguments[0] === \"string\" || arguments[0] instanceof Date)) {\n        date = arguments[0];\n        fromArgs = true;\n      }\n      else {\n        date = this.isInput ? this.element.val() : this.element.data(\"date\") || this.element.find(\"input\").val();\n      }\n\n      this.date = DPGlobal.parseDate(date, this.format, this.language);\n\n      if (fromArgs) {\n        this.setValue();\n      } else if (currentVal == \"\") {\n        this.element.trigger({\n          type: \"changeDate\",\n          date: null\n        });\n      }\n\n      if (this.date < this.startDate) {\n        this.viewDate = new Date(this.startDate.valueOf());\n      } else if (this.date > this.endDate) {\n        this.viewDate = new Date(this.endDate.valueOf());\n      } else {\n        this.viewDate = new Date(this.date.valueOf());\n      }\n      this.fill();\n    },\n\n    fillDow: function() {\n      let dowCnt = this.weekStart,\n          html = \"<tr>\";\n      if (this.calendarWeeks) {\n        let cell = '<th class=\"cw\">&nbsp;</th>';\n        html += cell;\n        this.picker.find(\".datepicker-days thead tr:first-child\").prepend(cell);\n      }\n      while (dowCnt < this.weekStart + 7) {\n        html += `<th class=\"dow\">${dates[this.language].daysMin[(dowCnt++) % 7]}</th>`;\n      }\n      html += \"</tr>\";\n      this.picker.find(\".datepicker-days thead\").append(html);\n    },\n\n    fillMonths: function() {\n      let html = \"\",\n          i = 0;\n      while (i < 12) {\n        html += `<span class=\"month\">${dates[this.language].monthsShort[i++]}</span>`;\n      }\n      this.picker.find(\".datepicker-months td\").html(html);\n    },\n\n    fill: function() {\n      if (this.date == null || this.viewDate == null) {\n        return;\n      }\n\n      let d = new Date(this.viewDate.valueOf()),\n          year = d.getUTCFullYear(),\n          month = d.getUTCMonth(),\n          dayMonth = d.getUTCDate(),\n          hours = d.getUTCHours(),\n          minutes = d.getUTCMinutes(),\n          startYear = this.startDate !== -Infinity ? this.startDate.getUTCFullYear() : -Infinity,\n          startMonth = this.startDate !== -Infinity ? this.startDate.getUTCMonth() : -Infinity,\n          endYear = this.endDate !== Infinity ? this.endDate.getUTCFullYear() : Infinity,\n          endMonth = this.endDate !== Infinity ? this.endDate.getUTCMonth() : Infinity,\n          currentDate = this.date && UTCDate(this.date.getUTCFullYear(), this.date.getUTCMonth(), this.date.getUTCDate()).valueOf(),\n          today = new Date(),\n          titleFormat = dates[this.language].titleFormat || dates.en.titleFormat;\n      // this.picker.find('.datepicker-days thead th.date-switch')\n      //          .text(DPGlobal.formatDate(new UTCDate(year, month), titleFormat, this.language));\n\n      this.picker.find(\".datepicker-days thead th:eq(1)\").\n        text(`${dates[this.language].months[month]} ${year}`);\n      this.picker.find(\".datepicker-hours thead th:eq(1)\").\n        text(`${dayMonth} ${dates[this.language].months[month]} ${year}`);\n      this.picker.find(\".datepicker-minutes thead th:eq(1)\").\n        text(`${dayMonth} ${dates[this.language].months[month]} ${year}`);\n\n\n      this.picker.find(\"tfoot th.today\").\n        text(dates[this.language].today).\n        toggle(this.todayBtn !== false);\n      this.updateNavArrows();\n      this.fillMonths();\n      let prevMonth = UTCDate(year, month - 1, 28, 0, 0, 0, 0),\n          day = DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth());\n      prevMonth.setUTCDate(day);\n      prevMonth.setUTCDate(day - (prevMonth.getUTCDay() - this.weekStart + 7) % 7);\n      let nextMonth = new Date(prevMonth.valueOf());\n      nextMonth.setUTCDate(nextMonth.getUTCDate() + 42);\n      nextMonth = nextMonth.valueOf();\n      let html = [];\n      let clsName;\n      while (prevMonth.valueOf() < nextMonth) {\n        if (prevMonth.getUTCDay() == this.weekStart) {\n          html.push(\"<tr>\");\n          if (this.calendarWeeks) {\n            // adapted from https://github.com/timrwood/moment/blob/master/moment.js#L128\n            let a = new Date(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth(), prevMonth.getUTCDate() - prevMonth.getDay() + 10 - (this.weekStart && this.weekStart % 7 < 5 && 7)),\n                b = new Date(a.getFullYear(), 0, 4),\n                calWeek = ~~((a - b) / 864e5 / 7 + 1.5);\n            html.push(`<td class=\"cw\">${calWeek}</td>`);\n          }\n        }\n        clsName = ` ${this.onRender(prevMonth)} `;\n        if (prevMonth.getUTCFullYear() < year || (prevMonth.getUTCFullYear() == year && prevMonth.getUTCMonth() < month)) {\n          clsName += \" old\";\n        } else if (prevMonth.getUTCFullYear() > year || (prevMonth.getUTCFullYear() == year && prevMonth.getUTCMonth() > month)) {\n          clsName += \" new\";\n        }\n        // Compare internal UTC date with local today, not UTC today\n        if (this.todayHighlight &&\n                    prevMonth.getUTCFullYear() == today.getFullYear() &&\n                    prevMonth.getUTCMonth() == today.getMonth() &&\n                    prevMonth.getUTCDate() == today.getDate()) {\n          clsName += \" today\";\n        }\n        if (currentDate && prevMonth.valueOf() == currentDate) {\n          clsName += \" active\";\n        }\n        if (prevMonth.valueOf() < this.startDate || prevMonth.valueOf() > this.endDate ||\n                    $.inArray(prevMonth.getUTCDay(), this.daysOfWeekDisabled) !== -1 ||\n                    $.inArray(prevMonth.valueOf(), this.datesDisabled) !== -1) {\n          clsName += \" disabled\";\n        }\n        html.push(`<td class=\"day${clsName}\">${prevMonth.getUTCDate()}</td>`);\n        if (prevMonth.getUTCDay() == this.weekEnd) {\n          html.push(\"</tr>\");\n        }\n        prevMonth.setUTCDate(prevMonth.getUTCDate() + 1);\n      }\n      this.picker.find(\".datepicker-days tbody\").empty().append(html.join(\"\"));\n\n      html = [];\n      for (var i = 0; i < 24; i++) {\n        var actual = UTCDate(year, month, dayMonth, i);\n        clsName = \"\";\n        // We want the previous hour for the startDate\n        if ((actual.valueOf() + 3600000) < this.startDate || actual.valueOf() > this.endDate) {\n          clsName += \" disabled\";\n        } else if (hours == i) {\n          clsName += \" active\";\n        }\n        html.push(`<span class=\"hour${clsName}\">${i}:00</span>`);\n      }\n      this.picker.find(\".datepicker-hours td\").html(html.join(\"\"));\n\n      html = [];\n      for (var i = 0; i < 60; i += this.minuteStep) {\n        var actual = UTCDate(year, month, dayMonth, hours, i);\n        clsName = \"\";\n        if (actual.valueOf() < this.startDate || actual.valueOf() > this.endDate) {\n          clsName += \" disabled\";\n        } else if (Math.floor(minutes / this.minuteStep) == Math.floor(i / this.minuteStep)) {\n          clsName += \" active\";\n        }\n        html.push(`<span class=\"minute${clsName}\">${hours}:${i < 10 ? `0${i}` : i}</span>`);\n      }\n      this.picker.find(\".datepicker-minutes td\").html(html.join(\"\"));\n\n\n      let currentYear = this.date && this.date.getUTCFullYear();\n      let months = this.picker.find(\".datepicker-months\").\n        find(\"th:eq(1)\").\n        text(year).\n        end().\n        find(\"span\").removeClass(\"active\");\n      if (currentYear && currentYear == year) {\n        months.eq(this.date.getUTCMonth()).addClass(\"active\");\n      }\n      if (year < startYear || year > endYear) {\n        months.addClass(\"disabled\");\n      }\n      if (year == startYear) {\n        months.slice(0, startMonth).addClass(\"disabled\");\n      }\n      if (year == endYear) {\n        months.slice(endMonth + 1).addClass(\"disabled\");\n      }\n\n      html = \"\";\n      year = parseInt(year / 10, 10) * 10;\n      let yearCont = this.picker.find(\".datepicker-years\").\n        find(\"th:eq(1)\").\n        text(`${year}-${year + 9}`).\n        end().\n        find(\"td\");\n      year -= 1;\n      for (var i = -1; i < 11; i++) {\n        html += `<span class=\"year${i == -1 || i == 10 ? \" old\" : \"\"}${currentYear == year ? \" active\" : \"\"}${year < startYear || year > endYear ? \" disabled\" : \"\"}\">${year}</span>`;\n        year += 1;\n      }\n      yearCont.html(html);\n    },\n\n    updateNavArrows: function() {\n      let d = new Date(this.viewDate),\n          year = d.getUTCFullYear(),\n          month = d.getUTCMonth(),\n          day = d.getUTCDate(),\n          hour = d.getUTCHours();\n      switch (this.viewMode) {\n      case 0:\n        if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear() && month <= this.startDate.getUTCMonth() && day <= this.startDate.getUTCDate() && hour <= this.startDate.getUTCHours()) {\n          this.picker.find(\".prev\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".prev\").css({\n            visibility: \"visible\"\n          });\n        }\n        if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear() && month >= this.endDate.getUTCMonth() && day >= this.endDate.getUTCDate() && hour >= this.endDate.getUTCHours()) {\n          this.picker.find(\".next\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".next\").css({\n            visibility: \"visible\"\n          });\n        }\n        break;\n      case 1:\n        if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear() && month <= this.startDate.getUTCMonth() && day <= this.startDate.getUTCDate()) {\n          this.picker.find(\".prev\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".prev\").css({\n            visibility: \"visible\"\n          });\n        }\n        if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear() && month >= this.endDate.getUTCMonth() && day >= this.endDate.getUTCDate()) {\n          this.picker.find(\".next\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".next\").css({\n            visibility: \"visible\"\n          });\n        }\n        break;\n      case 2:\n        if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear() && month <= this.startDate.getUTCMonth()) {\n          this.picker.find(\".prev\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".prev\").css({\n            visibility: \"visible\"\n          });\n        }\n        if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear() && month >= this.endDate.getUTCMonth()) {\n          this.picker.find(\".next\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".next\").css({\n            visibility: \"visible\"\n          });\n        }\n        break;\n      case 3:\n      case 4:\n        if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear()) {\n          this.picker.find(\".prev\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".prev\").css({\n            visibility: \"visible\"\n          });\n        }\n        if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear()) {\n          this.picker.find(\".next\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".next\").css({\n            visibility: \"visible\"\n          });\n        }\n        break;\n      }\n    },\n\n    click: function(e) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      if ($(e.target).hasClass(\"datepicker-close\") || $(e.target).parent().hasClass(\"datepicker-close\")) {\n        this.hide();\n      }\n\n      let target = $(e.target).closest(\"span, td, th\");\n      if (target.length == 1) {\n        if (target.is(\".disabled\")) {\n          this.element.trigger({\n            type: \"outOfRange\",\n            date: this.viewDate,\n            startDate: this.startDate,\n            endDate: this.endDate\n          });\n          return;\n        }\n\n        switch (target[0].nodeName.toLowerCase()) {\n        case \"th\":\n          switch (target[0].className) {\n          case \"date-switch\":\n            this.showMode(1);\n            break;\n          case \"prev\":\n          case \"next\":\n            var dir = DPGlobal.modes[this.viewMode].navStep * (target[0].className == \"prev\" ? -1 : 1);\n            switch (this.viewMode) {\n            case 0:\n              this.viewDate = this.moveHour(this.viewDate, dir);\n              break;\n            case 1:\n              this.viewDate = this.moveDate(this.viewDate, dir);\n              break;\n            case 2:\n              this.viewDate = this.moveMonth(this.viewDate, dir);\n              break;\n            case 3:\n            case 4:\n              this.viewDate = this.moveYear(this.viewDate, dir);\n              break;\n            }\n            this.fill();\n            break;\n          case \"today\":\n            var date = new Date();\n            date = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds());\n\n            this.viewMode = this.startViewMode;\n            this.showMode(0);\n            this._setDate(date);\n            break;\n          }\n          break;\n        case \"span\":\n          if (!target.is(\".disabled\")) {\n            if (target.is(\".month\")) {\n              if (this.minView === 3) {\n                var month = target.parent().find(\"span\").index(target) || 0;\n                var year = this.viewDate.getUTCFullYear(),\n                    day = 1,\n                    hours = this.viewDate.getUTCHours(),\n                    minutes = this.viewDate.getUTCMinutes(),\n                    seconds = this.viewDate.getUTCSeconds();\n                this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n              } else {\n                this.viewDate.setUTCDate(1);\n                var month = target.parent().find(\"span\").index(target);\n                this.viewDate.setUTCMonth(month);\n                this.element.trigger({\n                  type: \"changeMonth\",\n                  date: this.viewDate\n                });\n              }\n            } else if (target.is(\".year\")) {\n              if (this.minView === 4) {\n                var year = parseInt(target.text(), 10) || 0;\n                var month = 0,\n                    day = 1,\n                    hours = this.viewDate.getUTCHours(),\n                    minutes = this.viewDate.getUTCMinutes(),\n                    seconds = this.viewDate.getUTCSeconds();\n                this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n              } else {\n                this.viewDate.setUTCDate(1);\n                var year = parseInt(target.text(), 10) || 0;\n                this.viewDate.setUTCFullYear(year);\n                this.element.trigger({\n                  type: \"changeYear\",\n                  date: this.viewDate\n                });\n              }\n            } else if (target.is(\".hour\")) {\n              var hours = parseInt(target.text(), 10) || 0;\n              var year = this.viewDate.getUTCFullYear(),\n                  month = this.viewDate.getUTCMonth(),\n                  day = this.viewDate.getUTCDate(),\n                  minutes = this.viewDate.getUTCMinutes(),\n                  seconds = this.viewDate.getUTCSeconds();\n              this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n            } else if (target.is(\".minute\")) {\n              var minutes = parseInt(target.text().substr(target.text().indexOf(\":\") + 1), 10) || 0;\n              var year = this.viewDate.getUTCFullYear(),\n                  month = this.viewDate.getUTCMonth(),\n                  day = this.viewDate.getUTCDate(),\n                  hours = this.viewDate.getUTCHours(),\n                  seconds = this.viewDate.getUTCSeconds();\n              this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n            }\n\n\n            if (this.viewMode != 0) {\n\n\n              var oldViewMode = this.viewMode;\n              this.showMode(-1);\n              this.fill();\n              if (oldViewMode == this.viewMode && this.autoclose) {\n                this.hide();\n              }\n            } else {\n              this.fill();\n              if (this.autoclose) {\n                this.hide();\n              }\n            }\n          }\n          break;\n        case \"td\":\n\n\n          if (target.is(\".day\") && !target.is(\".disabled\")) {\n            var day = parseInt(target.text(), 10) || 1;\n            var year = this.viewDate.getUTCFullYear(),\n                month = this.viewDate.getUTCMonth(),\n                hours = this.viewDate.getUTCHours(),\n                minutes = this.viewDate.getUTCMinutes(),\n                seconds = this.viewDate.getUTCSeconds();\n            if (target.is(\".old\")) {\n              if (month === 0) {\n                month = 11;\n                year -= 1;\n              } else {\n                month -= 1;\n              }\n            } else if (target.is(\".new\")) {\n              if (month == 11) {\n                month = 0;\n                year += 1;\n              } else {\n                month += 1;\n              }\n            }\n            this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n          }\n\n\n          var oldViewMode = this.viewMode;\n\n\n          this.showMode(-1);\n\n\n          this.fill();\n          if (oldViewMode == this.viewMode && this.autoclose) {\n            this.hide();\n          }\n          break;\n        }\n      }\n    },\n\n    _setDate: function(date, which) {\n\n      if (!which || which == \"date\")\n      {this.date = date;}\n      if (!which || which == \"view\")\n      {this.viewDate = date;}\n      this.fill();\n      this.setValue();\n      this.element.trigger({\n        type: \"changeDate\",\n        date: this.date\n      });\n      let element;\n      if (this.isInput) {\n        element = this.element;\n      } else if (this.component) {\n        element = this.element.find(\"input\");\n      }\n      if (element) {\n        element.change();\n        if (this.autoclose && (!which || which == \"date\")) {\n          // this.hide();\n        }\n      }\n    },\n\n    moveHour: function(date, dir) {\n      if (!dir) {return date;}\n      let new_date = new Date(date.valueOf());\n      dir = dir > 0 ? 1 : -1;\n      new_date.setUTCHours(new_date.getUTCHours() + dir);\n      return new_date;\n    },\n\n    moveDate: function(date, dir) {\n      if (!dir) {return date;}\n      let new_date = new Date(date.valueOf());\n      dir = dir > 0 ? 1 : -1;\n      new_date.setUTCDate(new_date.getUTCDate() + dir);\n      return new_date;\n    },\n\n    moveMonth: function(date, dir) {\n      if (!dir) {return date;}\n      let new_date = new Date(date.valueOf()),\n          day = new_date.getUTCDate(),\n          month = new_date.getUTCMonth(),\n          mag = Math.abs(dir),\n          new_month, test;\n      dir = dir > 0 ? 1 : -1;\n      if (mag == 1) {\n        test = dir == -1\n        // If going back one month, make sure month is not current month\n        // (eg, Mar 31 -> Feb 31 == Feb 28, not Mar 02)\n          ? function() {\n            return new_date.getUTCMonth() == month;\n          }\n        // If going forward one month, make sure month is as expected\n        // (eg, Jan 31 -> Feb 31 == Feb 28, not Mar 02)\n          : function() {\n            return new_date.getUTCMonth() != new_month;\n          };\n        new_month = month + dir;\n        new_date.setUTCMonth(new_month);\n        // Dec -> Jan (12) or Jan -> Dec (-1) -- limit expected date to 0-11\n        if (new_month < 0 || new_month > 11)\n        {new_month = (new_month + 12) % 12;}\n      } else {\n        // For magnitudes >1, move one month at a time...\n        for (let i = 0; i < mag; i++)\n        // ...which might decrease the day (eg, Jan 31 to Feb 28, etc)...\n        {new_date = this.moveMonth(new_date, dir);}\n        // ...then reset the day, keeping it in the new month\n        new_month = new_date.getUTCMonth();\n        new_date.setUTCDate(day);\n        test = function() {\n          return new_month != new_date.getUTCMonth();\n        };\n      }\n      // Common date-resetting loop -- if date is beyond end of month, make it\n      // end of month\n      while (test()) {\n        new_date.setUTCDate(--day);\n        new_date.setUTCMonth(new_month);\n      }\n      return new_date;\n    },\n\n    moveYear: function(date, dir) {\n      return this.moveMonth(date, dir * 12);\n    },\n\n    dateWithinRange: function(date) {\n      return date >= this.startDate && date <= this.endDate;\n    },\n\n    keydown: function(e) {\n      if (!this.keyboardNavigation) {\n        return true;\n      }\n      if (this.picker.is(\":not(:visible)\")) {\n        if (e.keyCode == 27) // allow escape to hide and re-show picker\n        {this.show();}\n        return;\n      }\n      let dateChanged = false,\n          day, dir, month,\n          newDate, newViewDate;\n      switch (e.keyCode) {\n      case 27: // escape\n        this.hide();\n        e.preventDefault();\n        break;\n      case 37: // left\n      case 39: // right\n        if (!this.keyboardNavigation) {break;}\n        dir = e.keyCode == 37 ? -1 : 1;\n        if (e.ctrlKey) {\n          newDate = this.moveYear(this.date, dir);\n          newViewDate = this.moveYear(this.viewDate, dir);\n        } else if (e.shiftKey) {\n          newDate = this.moveMonth(this.date, dir);\n          newViewDate = this.moveMonth(this.viewDate, dir);\n        } else {\n          newDate = new Date(this.date.valueOf());\n          newDate.setUTCDate(this.date.getUTCDate() + dir);\n          newViewDate = new Date(this.viewDate.valueOf());\n          newViewDate.setUTCDate(this.viewDate.getUTCDate() + dir);\n        }\n        if (this.dateWithinRange(newDate)) {\n          this.date = newDate;\n          this.viewDate = newViewDate;\n          this.setValue();\n          this.update();\n          e.preventDefault();\n          dateChanged = true;\n        }\n        break;\n      case 38: // up\n      case 40: // down\n        if (!this.keyboardNavigation) {break;}\n        dir = e.keyCode == 38 ? -1 : 1;\n        if (e.ctrlKey) {\n          newDate = this.moveYear(this.date, dir);\n          newViewDate = this.moveYear(this.viewDate, dir);\n        } else if (e.shiftKey) {\n          newDate = this.moveMonth(this.date, dir);\n          newViewDate = this.moveMonth(this.viewDate, dir);\n        } else {\n          newDate = new Date(this.date.valueOf());\n          newDate.setUTCDate(this.date.getUTCDate() + dir * 7);\n          newViewDate = new Date(this.viewDate.valueOf());\n          newViewDate.setUTCDate(this.viewDate.getUTCDate() + dir * 7);\n        }\n        if (this.dateWithinRange(newDate)) {\n          this.date = newDate;\n          this.viewDate = newViewDate;\n          this.setValue();\n          this.update();\n          e.preventDefault();\n          dateChanged = true;\n        }\n        break;\n      case 13: // enter\n        this.hide();\n        e.preventDefault();\n        break;\n      case 9: // tab\n        this.hide();\n        break;\n      }\n      if (dateChanged) {\n        this.element.trigger({\n          type: \"changeDate\",\n          date: this.date\n        });\n        let element;\n        if (this.isInput) {\n          element = this.element;\n        } else if (this.component) {\n          element = this.element.find(\"input\");\n        }\n        if (element) {\n          element.change();\n        }\n      }\n    },\n\n    showMode: function(dir) {\n\n      if (dir) {\n        let newViewMode = Math.max(0, Math.min(DPGlobal.modes.length - 1, this.viewMode + dir));\n        if (newViewMode >= this.minView && newViewMode <= this.maxView) {\n          this.viewMode = newViewMode;\n        }\n      }\n\n      /*\n                vitalets: fixing bug of very special conditions:\n                jquery 1.7.1 + webkit + show inline datepicker in bootstrap popover.\n                Method show() does not set display css correctly and datepicker is not shown.\n                Changed to .css('display', 'block') solve the problem.\n                See https://github.com/vitalets/x-editable/issues/37\n\n                In jquery 1.7.2+ everything works fine.\n            */\n      // this.picker.find('>div').hide().filter('.datepicker-'+DPGlobal.modes[this.viewMode].clsName).show();\n      this.picker.find(\">div\").hide().filter(`.datepicker-${DPGlobal.modes[this.viewMode].clsName}`).css(\"display\", \"block\");\n      this.updateNavArrows();\n    },\n\n    changeViewDate: function(date) {\n      this.date = date;\n      this.viewDate = date;\n      this.fill();\n    },\n\n    reset: function(e) {\n      this._setDate(null, \"date\");\n    }\n  };\n\n  $.fn.fdatepicker = function(option) {\n    let args = Array(...arguments);\n    args.shift();\n    return this.each(function() {\n      let $this = $(this),\n          data = $this.data(\"datepicker\"),\n          options = typeof option === \"object\" && option;\n      if (!data) {\n        $this.data(\"datepicker\", (data = new Datepicker(this, $.extend({}, $.fn.fdatepicker.defaults, options))));\n      }\n      if (typeof option === \"string\" && typeof data[option] === \"function\") {\n        data[option](...args);\n      }\n    });\n  };\n\n  $.fn.fdatepicker.defaults = {\n    onRender: function(date) {\n      return \"\";\n    }\n  };\n  $.fn.fdatepicker.Constructor = Datepicker;\n  var dates = $.fn.fdatepicker.dates = {\n    \"en\": {\n      days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"],\n      daysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\n      daysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\n      months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n      monthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n      today: \"Today\",\n      titleFormat: \"MM yyyy\"\n    }\n  };\n\n  var DPGlobal = {\n    modes: [{\n      clsName: \"minutes\",\n      navFnc: \"Hours\",\n      navStep: 1\n    }, {\n      clsName: \"hours\",\n      navFnc: \"Date\",\n      navStep: 1\n    }, {\n      clsName: \"days\",\n      navFnc: \"Month\",\n      navStep: 1\n    }, {\n      clsName: \"months\",\n      navFnc: \"FullYear\",\n      navStep: 1\n    }, {\n      clsName: \"years\",\n      navFnc: \"FullYear\",\n      navStep: 10\n    }],\n    isLeapYear: function(year) {\n      return (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0));\n    },\n    getDaysInMonth: function(year, month) {\n      return [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n    },\n    validParts: /hh?|ii?|ss?|dd?|mm?|MM?|yy(?:yy)?/g,\n    nonpunctuation: /[^ -\\/:-@\\[\\u3400-\\u9fff-`{-~\\t\\n\\r]+/g,\n    parseFormat: function(format) {\n      // IE treats \\0 as a string end in inputs (truncating the value),\n      // so it's a bad format delimiter, anyway\n      let separators = format.replace(this.validParts, \"\\0\").split(\"\\0\"),\n          parts = format.match(this.validParts);\n      if (!separators || !separators.length || !parts || parts.length === 0) {\n        throw new Error(\"Invalid date format.\");\n      }\n      this.formatText = format;\n      return {\n        separators: separators,\n        parts: parts\n      };\n    },\n    parseDate: function(date, format, language) {\n      if (date instanceof Date) {return new Date(date.valueOf() - date.getTimezoneOffset() * 60000);}\n      if (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}$/.test(date)) {\n        format = this.parseFormat(\"yyyy-mm-dd\");\n      }\n      if (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}[T ]\\d{1,2}\\:\\d{1,2}$/.test(date)) {\n        format = this.parseFormat(\"yyyy-mm-dd hh:ii\");\n      }\n      if (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}[T ]\\d{1,2}\\:\\d{1,2}\\:\\d{1,2}[Z]{0,1}$/.test(date)) {\n        format = this.parseFormat(\"yyyy-mm-dd hh:ii:ss\");\n      }\n      if (/^[-+]\\d+[dmwy]([\\s,]+[-+]\\d+[dmwy])*$/.test(date)) {\n        var part_re = /([-+]\\d+)([dmwy])/,\n            parts = date.match(/([-+]\\d+)([dmwy])/g),\n            part, dir;\n        date = new Date();\n        for (var i = 0; i < parts.length; i++) {\n          part = part_re.exec(parts[i]);\n          dir = parseInt(part[1]);\n          switch (part[2]) {\n          case \"d\":\n            date.setUTCDate(date.getUTCDate() + dir);\n            break;\n          case \"m\":\n            date = Datetimepicker.prototype.moveMonth.call(Datetimepicker.prototype, date, dir);\n            break;\n          case \"w\":\n            date.setUTCDate(date.getUTCDate() + dir * 7);\n            break;\n          case \"y\":\n            date = Datetimepicker.prototype.moveYear.call(Datetimepicker.prototype, date, dir);\n            break;\n          }\n        }\n        return UTCDate(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\n      }\n      var parts = date && date.match(this.nonpunctuation) || [],\n          date = new Date(),\n          parsed = {},\n          setters_order = [\"hh\", \"h\", \"ii\", \"i\", \"ss\", \"s\", \"yyyy\", \"yy\", \"M\", \"MM\", \"m\", \"mm\", \"d\", \"dd\"],\n          setters_map = {\n            hh: function(d, v) {\n              return d.setUTCHours(v);\n            },\n            h: function(d, v) {\n              return d.setUTCHours(v);\n            },\n            ii: function(d, v) {\n              return d.setUTCMinutes(v);\n            },\n            i: function(d, v) {\n              return d.setUTCMinutes(v);\n            },\n            ss: function(d, v) {\n              return d.setUTCSeconds(v);\n            },\n            s: function(d, v) {\n              return d.setUTCSeconds(v);\n            },\n            yyyy: function(d, v) {\n              return d.setUTCFullYear(v);\n            },\n            yy: function(d, v) {\n              return d.setUTCFullYear(2000 + v);\n            },\n            m: function(d, v) {\n              v -= 1;\n              while (v < 0) {v += 12;}\n              v %= 12;\n              d.setUTCMonth(v);\n              while (d.getUTCMonth() != v)\n              {d.setUTCDate(d.getUTCDate() - 1);}\n              return d;\n            },\n            d: function(d, v) {\n              return d.setUTCDate(v);\n            }\n          },\n          val, filtered, part;\n      setters_map.M = setters_map.MM = setters_map.mm = setters_map.m;\n      setters_map.dd = setters_map.d;\n      date = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0); // date.getHours(), date.getMinutes(), date.getSeconds());\n      if (parts.length == format.parts.length) {\n        for (var i = 0, cnt = format.parts.length; i < cnt; i++) {\n          val = parseInt(parts[i], 10);\n          part = format.parts[i];\n          if (isNaN(val)) {\n            switch (part) {\n            case \"MM\":\n              filtered = $(dates[language].months).filter(function() {\n                let m = this.slice(0, parts[i].length),\n                    p = parts[i].slice(0, m.length);\n                return m == p;\n              });\n              val = $.inArray(filtered[0], dates[language].months) + 1;\n              break;\n            case \"M\":\n              filtered = $(dates[language].monthsShort).filter(function() {\n                let m = this.slice(0, parts[i].length),\n                    p = parts[i].slice(0, m.length);\n                return m == p;\n              });\n              val = $.inArray(filtered[0], dates[language].monthsShort) + 1;\n              break;\n            }\n          }\n          parsed[part] = val;\n        }\n        for (var i = 0, s; i < setters_order.length; i++) {\n          s = setters_order[i];\n          if (s in parsed && !isNaN(parsed[s]))\n          {setters_map[s](date, parsed[s])}\n        }\n      }\n      return date;\n    },\n    formatDate: function(date, format, language) {\n      if (date == null) {\n        return \"\";\n      }\n      let val = {\n        h: date.getUTCHours(),\n        i: date.getUTCMinutes(),\n        s: date.getUTCSeconds(),\n        d: date.getUTCDate(),\n        m: date.getUTCMonth() + 1,\n        M: dates[language].monthsShort[date.getUTCMonth()],\n        MM: dates[language].months[date.getUTCMonth()],\n        yy: date.getUTCFullYear().toString().substring(2),\n        yyyy: date.getUTCFullYear()\n      };\n      val.hh = (val.h < 10 ? \"0\" : \"\") + val.h;\n      val.ii = (val.i < 10 ? \"0\" : \"\") + val.i;\n      val.ss = (val.s < 10 ? \"0\" : \"\") + val.s;\n      val.dd = (val.d < 10 ? \"0\" : \"\") + val.d;\n      val.mm = (val.m < 10 ? \"0\" : \"\") + val.m;\n      var date = [],\n          seps = $.extend([], format.separators);\n      for (let i = 0, cnt = format.parts.length; i < cnt; i++) {\n        if (seps.length)\n        {date.push(seps.shift())}\n        date.push(val[format.parts[i]]);\n      }\n      return date.join(\"\");\n    },\n    convertViewMode: function(viewMode) {\n      switch (viewMode) {\n      case 4:\n      case \"decade\":\n        viewMode = 4;\n        break;\n      case 3:\n      case \"year\":\n        viewMode = 3;\n        break;\n      case 2:\n      case \"month\":\n        viewMode = 2;\n        break;\n      case 1:\n      case \"day\":\n        viewMode = 1;\n        break;\n      case 0:\n      case \"hour\":\n        viewMode = 0;\n        break;\n      }\n\n      return viewMode;\n    },\n    headTemplate: function(leftArrow, rightArrow) {return (`${\"<thead>\" +\n            \"<tr>\" +\n            '<th class=\"prev\">'}${leftArrow}</th>` +\n            \"<th colspan=\\\"5\\\" class=\\\"date-switch\\\"></th>\" +\n            `<th class=\"next\">${rightArrow}</th>` +\n            \"</tr>\" +\n            \"</thead>\")},\n    contTemplate: '<tbody><tr><td colspan=\"7\"></td></tr></tbody>',\n    footTemplate: '<tfoot><tr><th colspan=\"7\" class=\"today\"></th></tr></tfoot>'\n  };\n  DPGlobal.template = function(leftArrow, rightArrow, closeIcon) {return (`${'<div class=\"datepicker\">' +\n        '<div class=\"datepicker-minutes\">' +\n        '<table class=\" table-condensed\">'}${\n    DPGlobal.headTemplate(leftArrow, rightArrow)\n  }${DPGlobal.contTemplate\n  }${DPGlobal.footTemplate\n  }</table>` +\n        \"</div>\" +\n        \"<div class=\\\"datepicker-hours\\\">\" +\n        `<table class=\" table-condensed\">${\n          DPGlobal.headTemplate(leftArrow, rightArrow)\n        }${DPGlobal.contTemplate\n        }${DPGlobal.footTemplate\n        }</table>` +\n        \"</div>\" +\n        \"<div class=\\\"datepicker-days\\\">\" +\n        `<table class=\" table-condensed\">${\n          DPGlobal.headTemplate(leftArrow, rightArrow)\n        }<tbody></tbody>${\n          DPGlobal.footTemplate\n        }</table>` +\n        \"</div>\" +\n        \"<div class=\\\"datepicker-months\\\">\" +\n        `<table class=\"table-condensed\">${\n          DPGlobal.headTemplate(leftArrow, rightArrow)\n        }${DPGlobal.contTemplate\n        }${DPGlobal.footTemplate\n        }</table>` +\n        \"</div>\" +\n        \"<div class=\\\"datepicker-years\\\">\" +\n        `<table class=\"table-condensed\">${\n          DPGlobal.headTemplate(leftArrow, rightArrow)\n        }${DPGlobal.contTemplate\n        }${DPGlobal.footTemplate\n        }</table>` +\n        \"</div>\" +\n        `<a class=\"button datepicker-close tiny alert right\" style=\"width:auto;\">${closeIcon}</a>` +\n        \"</div>\")};\n\n  $.fn.fdatepicker.DPGlobal = DPGlobal;\n\n}(window.jQuery));\n","/* eslint-disable */\n\n/*\n  Modified file from the original tribute.js\n  Adding inside click event the conditional if the li element has no disabled-tribute-element class name. if true, then it must continue with normal behaviour.\n*/\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Tribute = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nrequire(\"./utils\");\n\nvar _TributeEvents = _interopRequireDefault(require(\"./TributeEvents\"));\n\nvar _TributeMenuEvents = _interopRequireDefault(require(\"./TributeMenuEvents\"));\n\nvar _TributeRange = _interopRequireDefault(require(\"./TributeRange\"));\n\nvar _TributeSearch = _interopRequireDefault(require(\"./TributeSearch\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Tribute =\n/*#__PURE__*/\nfunction () {\n  function Tribute(_ref) {\n    var _this = this;\n\n    var _ref$values = _ref.values,\n        values = _ref$values === void 0 ? null : _ref$values,\n        _ref$iframe = _ref.iframe,\n        iframe = _ref$iframe === void 0 ? null : _ref$iframe,\n        _ref$selectClass = _ref.selectClass,\n        selectClass = _ref$selectClass === void 0 ? 'highlight' : _ref$selectClass,\n        _ref$trigger = _ref.trigger,\n        trigger = _ref$trigger === void 0 ? '@' : _ref$trigger,\n        _ref$autocompleteMode = _ref.autocompleteMode,\n        autocompleteMode = _ref$autocompleteMode === void 0 ? false : _ref$autocompleteMode,\n        _ref$selectTemplate = _ref.selectTemplate,\n        selectTemplate = _ref$selectTemplate === void 0 ? null : _ref$selectTemplate,\n        _ref$menuItemTemplate = _ref.menuItemTemplate,\n        menuItemTemplate = _ref$menuItemTemplate === void 0 ? null : _ref$menuItemTemplate,\n        _ref$lookup = _ref.lookup,\n        lookup = _ref$lookup === void 0 ? 'key' : _ref$lookup,\n        _ref$fillAttr = _ref.fillAttr,\n        fillAttr = _ref$fillAttr === void 0 ? 'value' : _ref$fillAttr,\n        _ref$collection = _ref.collection,\n        collection = _ref$collection === void 0 ? null : _ref$collection,\n        _ref$menuContainer = _ref.menuContainer,\n        menuContainer = _ref$menuContainer === void 0 ? null : _ref$menuContainer,\n        _ref$noMatchTemplate = _ref.noMatchTemplate,\n        noMatchTemplate = _ref$noMatchTemplate === void 0 ? null : _ref$noMatchTemplate,\n        _ref$requireLeadingSp = _ref.requireLeadingSpace,\n        requireLeadingSpace = _ref$requireLeadingSp === void 0 ? true : _ref$requireLeadingSp,\n        _ref$allowSpaces = _ref.allowSpaces,\n        allowSpaces = _ref$allowSpaces === void 0 ? false : _ref$allowSpaces,\n        _ref$replaceTextSuffi = _ref.replaceTextSuffix,\n        replaceTextSuffix = _ref$replaceTextSuffi === void 0 ? null : _ref$replaceTextSuffi,\n        _ref$positionMenu = _ref.positionMenu,\n        positionMenu = _ref$positionMenu === void 0 ? true : _ref$positionMenu,\n        _ref$spaceSelectsMatc = _ref.spaceSelectsMatch,\n        spaceSelectsMatch = _ref$spaceSelectsMatc === void 0 ? false : _ref$spaceSelectsMatc,\n        _ref$searchOpts = _ref.searchOpts,\n        searchOpts = _ref$searchOpts === void 0 ? {} : _ref$searchOpts,\n        _ref$menuItemLimit = _ref.menuItemLimit,\n        menuItemLimit = _ref$menuItemLimit === void 0 ? null : _ref$menuItemLimit;\n\n    _classCallCheck(this, Tribute);\n\n    this.autocompleteMode = autocompleteMode;\n    this.menuSelected = 0;\n    this.current = {};\n    this.inputEvent = false;\n    this.isActive = false;\n    this.menuContainer = menuContainer;\n    this.allowSpaces = allowSpaces;\n    this.replaceTextSuffix = replaceTextSuffix;\n    this.positionMenu = positionMenu;\n    this.hasTrailingSpace = false;\n    this.spaceSelectsMatch = spaceSelectsMatch;\n\n    if (this.autocompleteMode) {\n      trigger = '';\n      allowSpaces = false;\n    }\n\n    if (values) {\n      this.collection = [{\n        // symbol that starts the lookup\n        trigger: trigger,\n        // is it wrapped in an iframe\n        iframe: iframe,\n        // class applied to selected item\n        selectClass: selectClass,\n        // function called on select that retuns the content to insert\n        selectTemplate: (selectTemplate || Tribute.defaultSelectTemplate).bind(this),\n        // function called that returns content for an item\n        menuItemTemplate: (menuItemTemplate || Tribute.defaultMenuItemTemplate).bind(this),\n        // function called when menu is empty, disables hiding of menu.\n        noMatchTemplate: function (t) {\n          if (typeof t === 'function') {\n            return t.bind(_this);\n          }\n\n          return noMatchTemplate || function () {\n            return '';\n          }.bind(_this);\n        }(noMatchTemplate),\n        // column to search against in the object\n        lookup: lookup,\n        // column that contains the content to insert by default\n        fillAttr: fillAttr,\n        // array of objects or a function returning an array of objects\n        values: values,\n        requireLeadingSpace: requireLeadingSpace,\n        searchOpts: searchOpts,\n        menuItemLimit: menuItemLimit\n      }];\n    } else if (collection) {\n      if (this.autocompleteMode) console.warn('Tribute in autocomplete mode does not work for collections');\n      this.collection = collection.map(function (item) {\n        return {\n          trigger: item.trigger || trigger,\n          iframe: item.iframe || iframe,\n          selectClass: item.selectClass || selectClass,\n          selectTemplate: (item.selectTemplate || Tribute.defaultSelectTemplate).bind(_this),\n          menuItemTemplate: (item.menuItemTemplate || Tribute.defaultMenuItemTemplate).bind(_this),\n          // function called when menu is empty, disables hiding of menu.\n          noMatchTemplate: function (t) {\n            if (typeof t === 'function') {\n              return t.bind(_this);\n            }\n\n            return null;\n          }(noMatchTemplate),\n          lookup: item.lookup || lookup,\n          fillAttr: item.fillAttr || fillAttr,\n          values: item.values,\n          requireLeadingSpace: item.requireLeadingSpace,\n          searchOpts: item.searchOpts || searchOpts,\n          menuItemLimit: item.menuItemLimit || menuItemLimit\n        };\n      });\n    } else {\n      throw new Error('[Tribute] No collection specified.');\n    }\n\n    new _TributeRange[\"default\"](this);\n    new _TributeEvents[\"default\"](this);\n    new _TributeMenuEvents[\"default\"](this);\n    new _TributeSearch[\"default\"](this);\n  }\n\n  _createClass(Tribute, [{\n    key: \"triggers\",\n    value: function triggers() {\n      return this.collection.map(function (config) {\n        return config.trigger;\n      });\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(el) {\n      if (!el) {\n        throw new Error('[Tribute] Must pass in a DOM node or NodeList.');\n      } // Check if it is a jQuery collection\n\n\n      if (typeof jQuery !== 'undefined' && el instanceof jQuery) {\n        el = el.get();\n      } // Is el an Array/Array-like object?\n\n\n      if (el.constructor === NodeList || el.constructor === HTMLCollection || el.constructor === Array) {\n        var length = el.length;\n\n        for (var i = 0; i < length; ++i) {\n          this._attach(el[i]);\n        }\n      } else {\n        this._attach(el);\n      }\n    }\n  }, {\n    key: \"_attach\",\n    value: function _attach(el) {\n      if (el.hasAttribute('data-tribute')) {\n        console.warn('Tribute was already bound to ' + el.nodeName);\n      }\n\n      this.ensureEditable(el);\n      this.events.bind(el);\n      el.setAttribute('data-tribute', true);\n    }\n  }, {\n    key: \"ensureEditable\",\n    value: function ensureEditable(element) {\n      if (Tribute.inputTypes().indexOf(element.nodeName) === -1) {\n        if (element.contentEditable) {\n          element.contentEditable = true;\n        } else {\n          throw new Error('[Tribute] Cannot bind to ' + element.nodeName);\n        }\n      }\n    }\n  }, {\n    key: \"createMenu\",\n    value: function createMenu() {\n      var wrapper = this.range.getDocument().createElement('div'),\n          ul = this.range.getDocument().createElement('ul');\n      wrapper.className = 'tribute-container';\n      wrapper.setAttribute('aria-expanded','true');\n      ul.setAttribute('id','results');\n      wrapper.appendChild(ul);\n\n      if (this.menuContainer) {\n        return this.menuContainer.appendChild(wrapper);\n      }\n\n      return this.range.getDocument().body.appendChild(wrapper);\n    }\n  }, {\n    key: \"showMenuFor\",\n    value: function showMenuFor(element, scrollTo) {\n      var _this2 = this;\n\n      // Only proceed if menu isn't already shown for the current element & mentionText\n      if (this.isActive && this.current.element === element && this.current.mentionText === this.currentMentionTextSnapshot) {\n        return;\n      }\n\n      this.currentMentionTextSnapshot = this.current.mentionText; // create the menu if it doesn't exist.\n\n      if (!this.menu) {\n        this.menu = this.createMenu();\n        element.tributeMenu = this.menu;\n        this.menuEvents.bind(this.menu);\n      }\n\n      this.isActive = true;\n      this.menuSelected = 0;\n\n      if (!this.current.mentionText) {\n        this.current.mentionText = '';\n      }\n\n      var processValues = function processValues(values) {\n        // Tribute may not be active any more by the time the value callback returns\n        if (!_this2.isActive) {\n          return;\n        }\n\n        var items = _this2.search.filter(_this2.current.mentionText, values, {\n          pre: _this2.current.collection.searchOpts.pre || '<span>',\n          post: _this2.current.collection.searchOpts.post || '</span>',\n          skip: _this2.current.collection.searchOpts.skip,\n          extract: function extract(el) {\n            if (typeof _this2.current.collection.lookup === 'string') {\n              return el[_this2.current.collection.lookup];\n            } else if (typeof _this2.current.collection.lookup === 'function') {\n              return _this2.current.collection.lookup(el, _this2.current.mentionText);\n            } else {\n              throw new Error('Invalid lookup attribute, lookup must be string or function.');\n            }\n          }\n        });\n\n        if (_this2.current.collection.menuItemLimit) {\n          items = items.slice(0, _this2.current.collection.menuItemLimit);\n        }\n\n        _this2.current.filteredItems = items;\n\n        var ul = _this2.menu.querySelector('ul');\n\n        _this2.range.positionMenuAtCaret(scrollTo);\n\n        if (!items.length) {\n          var noMatchEvent = new CustomEvent('tribute-no-match', {\n            detail: _this2.menu\n          });\n\n          _this2.current.element.dispatchEvent(noMatchEvent);\n\n          if (typeof _this2.current.collection.noMatchTemplate === 'function' && !_this2.current.collection.noMatchTemplate() || !_this2.current.collection.noMatchTemplate) {\n            _this2.hideMenu();\n          } else {\n            typeof _this2.current.collection.noMatchTemplate === 'function' ? ul.innerHTML = _this2.current.collection.noMatchTemplate() : ul.innerHTML = _this2.current.collection.noMatchTemplate;\n          }\n\n          return;\n        }\n\n        ul.innerHTML = '';\n\n        var fragment = _this2.range.getDocument().createDocumentFragment();\n\n        items.forEach(function (item, index) {\n          var li = _this2.range.getDocument().createElement('li');\n          li.setAttribute('role', 'option');\n          li.setAttribute('data-index', index);\n          li.addEventListener('mousemove', function (e) {\n            var _this2$_findLiTarget = _this2._findLiTarget(e.target),\n                _this2$_findLiTarget2 = _slicedToArray(_this2$_findLiTarget, 2),\n                li = _this2$_findLiTarget2[0],\n                index = _this2$_findLiTarget2[1];\n\n            if (e.movementY !== 0) {\n              _this2.events.setActiveLi(index);\n            }\n          });\n\n          if (_this2.menuSelected === index) {\n            li.className = _this2.current.collection.selectClass;\n          }\n\n          li.innerHTML = _this2.current.collection.menuItemTemplate(item);\n          fragment.appendChild(li);\n        });\n        ul.appendChild(fragment);\n      };\n\n      if (typeof this.current.collection.values === 'function') {\n        this.current.collection.values(this.current.mentionText, processValues);\n      } else {\n        processValues(this.current.collection.values);\n      }\n    }\n  }, {\n    key: \"_findLiTarget\",\n    value: function _findLiTarget(el) {\n      if (!el) return [];\n      var index = el.getAttribute('data-index');\n      return !index ? this._findLiTarget(el.parentNode) : [el, index];\n    }\n  }, {\n    key: \"showMenuForCollection\",\n    value: function showMenuForCollection(element, collectionIndex) {\n      if (element !== document.activeElement) {\n        this.placeCaretAtEnd(element);\n      }\n\n      this.current.collection = this.collection[collectionIndex || 0];\n      this.current.externalTrigger = true;\n      this.current.element = element;\n      if (element.isContentEditable) this.insertTextAtCursor(this.current.collection.trigger);else this.insertAtCaret(element, this.current.collection.trigger);\n      this.showMenuFor(element);\n    } // TODO: make sure this works for inputs/textareas\n\n  }, {\n    key: \"placeCaretAtEnd\",\n    value: function placeCaretAtEnd(el) {\n      el.focus();\n\n      if (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n        var range = document.createRange();\n        range.selectNodeContents(el);\n        range.collapse(false);\n        var sel = window.getSelection();\n        sel.removeAllRanges();\n        sel.addRange(range);\n      } else if (typeof document.body.createTextRange != \"undefined\") {\n        var textRange = document.body.createTextRange();\n        textRange.moveToElementText(el);\n        textRange.collapse(false);\n        textRange.select();\n      }\n    } // for contenteditable\n\n  }, {\n    key: \"insertTextAtCursor\",\n    value: function insertTextAtCursor(text) {\n      var sel, range, html;\n      sel = window.getSelection();\n      range = sel.getRangeAt(0);\n      range.deleteContents();\n      var textNode = document.createTextNode(text);\n      range.insertNode(textNode);\n      range.selectNodeContents(textNode);\n      range.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range);\n    } // for regular inputs\n\n  }, {\n    key: \"insertAtCaret\",\n    value: function insertAtCaret(textarea, text) {\n      var scrollPos = textarea.scrollTop;\n      var caretPos = textarea.selectionStart;\n      var front = textarea.value.substring(0, caretPos);\n      var back = textarea.value.substring(textarea.selectionEnd, textarea.value.length);\n      textarea.value = front + text + back;\n      caretPos = caretPos + text.length;\n      textarea.selectionStart = caretPos;\n      textarea.selectionEnd = caretPos;\n      textarea.focus();\n      textarea.scrollTop = scrollPos;\n    }\n  }, {\n    key: \"hideMenu\",\n    value: function hideMenu() {\n      if (this.menu) {\n        this.menu.style.cssText = 'display: none;';\n        this.isActive = false;\n        this.menuSelected = 0;\n        this.current = {};\n      }\n    }\n  }, {\n    key: \"selectItemAtIndex\",\n    value: function selectItemAtIndex(index, originalEvent) {\n      index = parseInt(index);\n      if (typeof index !== 'number' || isNaN(index)) return;\n      var item = this.current.filteredItems[index];\n      var content = this.current.collection.selectTemplate(item);\n      if (content !== null) this.replaceText(content, originalEvent, item);\n    }\n  }, {\n    key: \"replaceText\",\n    value: function replaceText(content, originalEvent, item) {\n      this.range.replaceTriggerText(content, true, true, originalEvent, item);\n    }\n  }, {\n    key: \"_append\",\n    value: function _append(collection, newValues, replace) {\n      if (typeof collection.values === 'function') {\n        throw new Error('Unable to append to values, as it is a function.');\n      } else if (!replace) {\n        collection.values = collection.values.concat(newValues);\n      } else {\n        collection.values = newValues;\n      }\n    }\n  }, {\n    key: \"append\",\n    value: function append(collectionIndex, newValues, replace) {\n      var index = parseInt(collectionIndex);\n      if (typeof index !== 'number') throw new Error('please provide an index for the collection to update.');\n      var collection = this.collection[index];\n\n      this._append(collection, newValues, replace);\n    }\n  }, {\n    key: \"appendCurrent\",\n    value: function appendCurrent(newValues, replace) {\n      if (this.isActive) {\n        this._append(this.current.collection, newValues, replace);\n      } else {\n        throw new Error('No active state. Please use append instead and pass an index.');\n      }\n    }\n  }, {\n    key: \"detach\",\n    value: function detach(el) {\n      if (!el) {\n        throw new Error('[Tribute] Must pass in a DOM node or NodeList.');\n      } // Check if it is a jQuery collection\n\n\n      if (typeof jQuery !== 'undefined' && el instanceof jQuery) {\n        el = el.get();\n      } // Is el an Array/Array-like object?\n\n\n      if (el.constructor === NodeList || el.constructor === HTMLCollection || el.constructor === Array) {\n        var length = el.length;\n\n        for (var i = 0; i < length; ++i) {\n          this._detach(el[i]);\n        }\n      } else {\n        this._detach(el);\n      }\n    }\n  }, {\n    key: \"_detach\",\n    value: function _detach(el) {\n      var _this3 = this;\n\n      this.events.unbind(el);\n\n      if (el.tributeMenu) {\n        this.menuEvents.unbind(el.tributeMenu);\n      }\n\n      setTimeout(function () {\n        el.removeAttribute('data-tribute');\n        _this3.isActive = false;\n\n        if (el.tributeMenu) {\n          el.tributeMenu.remove();\n        }\n      });\n    }\n  }], [{\n    key: \"defaultSelectTemplate\",\n    value: function defaultSelectTemplate(item) {\n      if (typeof item === 'undefined') return null;\n\n      if (this.range.isContentEditable(this.current.element)) {\n        return '<span class=\"tribute-mention\">' + (this.current.collection.trigger + item.original[this.current.collection.fillAttr]) + '</span>';\n      }\n\n      return this.current.collection.trigger + item.original[this.current.collection.fillAttr];\n    }\n  }, {\n    key: \"defaultMenuItemTemplate\",\n    value: function defaultMenuItemTemplate(matchItem) {\n      return matchItem.string;\n    }\n  }, {\n    key: \"inputTypes\",\n    value: function inputTypes() {\n      return ['TEXTAREA', 'INPUT'];\n    }\n  }]);\n\n  return Tribute;\n}();\n\nvar _default = Tribute;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{\"./TributeEvents\":2,\"./TributeMenuEvents\":3,\"./TributeRange\":4,\"./TributeSearch\":5,\"./utils\":7}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar TributeEvents =\n/*#__PURE__*/\nfunction () {\n  function TributeEvents(tribute) {\n    _classCallCheck(this, TributeEvents);\n\n    this.tribute = tribute;\n    this.tribute.events = this;\n  }\n\n  _createClass(TributeEvents, [{\n    key: \"bind\",\n    value: function bind(element) {\n      element.boundKeydown = this.keydown.bind(element, this);\n      element.boundKeyup = this.keyup.bind(element, this);\n      element.boundInput = this.input.bind(element, this);\n      element.addEventListener('keydown', element.boundKeydown, false);\n      element.addEventListener('keyup', element.boundKeyup, false);\n      element.addEventListener('input', element.boundInput, false);\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind(element) {\n      element.removeEventListener('keydown', element.boundKeydown, false);\n      element.removeEventListener('keyup', element.boundKeyup, false);\n      element.removeEventListener('input', element.boundInput, false);\n      delete element.boundKeydown;\n      delete element.boundKeyup;\n      delete element.boundInput;\n    }\n  }, {\n    key: \"keydown\",\n    value: function keydown(instance, event) {\n      if (instance.shouldDeactivate(event)) {\n        instance.tribute.isActive = false;\n        instance.tribute.hideMenu();\n      }\n\n      var element = this;\n      instance.commandEvent = false;\n      TributeEvents.keys().forEach(function (o) {\n        if (o.key === event.keyCode) {\n          instance.commandEvent = true;\n          instance.callbacks()[o.value.toLowerCase()](event, element);\n        }\n      });\n    }\n  }, {\n    key: \"input\",\n    value: function input(instance, event) {\n      instance.inputEvent = true;\n      instance.keyup.call(this, instance, event);\n    }\n  }, {\n    key: \"click\",\n    value: function click(instance, event) {\n      var tribute = instance.tribute;\n\n      if (tribute.menu && tribute.menu.contains(event.target)) {\n        var li = event.target;\n        event.preventDefault();\n        event.stopPropagation();\n\n        while (li.nodeName.toLowerCase() !== 'li') {\n          li = li.parentNode;\n\n          if (!li || li === tribute.menu) {\n            throw new Error('cannot find the <li> container for the click');\n          }\n        }\n\n        if (li.getElementsByClassName(\"disabled-tribute-element\")[0]==undefined){\n          tribute.selectItemAtIndex(li.getAttribute('data-index'), event);\n          tribute.hideMenu(); // TODO: should fire with externalTrigger and target is outside of menu\n        }\n      } else if (tribute.current.element && !tribute.current.externalTrigger) {\n        tribute.current.externalTrigger = false;\n        setTimeout(function () {\n          return tribute.hideMenu();\n        });\n      }\n    }\n  }, {\n    key: \"keyup\",\n    value: function keyup(instance, event) {\n      if (instance.inputEvent) {\n        instance.inputEvent = false;\n      }\n\n      instance.updateSelection(this);\n      if (event.keyCode === 27) return;\n\n      if (!instance.tribute.allowSpaces && instance.tribute.hasTrailingSpace) {\n        instance.tribute.hasTrailingSpace = false;\n        instance.commandEvent = true;\n        instance.callbacks()[\"space\"](event, this);\n        return;\n      }\n\n      if (!instance.tribute.isActive) {\n        if (instance.tribute.autocompleteMode) {\n          instance.callbacks().triggerChar(event, this, '');\n        } else {\n          var keyCode = instance.getKeyCode(instance, this, event);\n          if (isNaN(keyCode) || !keyCode) return;\n          var trigger = instance.tribute.triggers().find(function (trigger) {\n            return trigger.charCodeAt(0) === keyCode;\n          });\n\n          if (typeof trigger !== 'undefined') {\n            instance.callbacks().triggerChar(event, this, trigger);\n          }\n        }\n      }\n\n      if ((instance.tribute.current.trigger || instance.tribute.autocompleteMode) && instance.commandEvent === false || instance.tribute.isActive && event.keyCode === 8) {\n        instance.tribute.showMenuFor(this, true);\n      }\n    }\n  }, {\n    key: \"shouldDeactivate\",\n    value: function shouldDeactivate(event) {\n      if (!this.tribute.isActive) return false;\n\n      if (this.tribute.current.mentionText.length === 0) {\n        var eventKeyPressed = false;\n        TributeEvents.keys().forEach(function (o) {\n          if (event.keyCode === o.key) eventKeyPressed = true;\n        });\n        return !eventKeyPressed;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"getKeyCode\",\n    value: function getKeyCode(instance, el, event) {\n      var _char;\n\n      var tribute = instance.tribute;\n      var info = tribute.range.getTriggerInfo(false, tribute.hasTrailingSpace, true, tribute.allowSpaces, tribute.autocompleteMode);\n\n      if (info) {\n        return info.mentionTriggerChar.charCodeAt(0);\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"updateSelection\",\n    value: function updateSelection(el) {\n      this.tribute.current.element = el;\n      var info = this.tribute.range.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n      if (info) {\n        this.tribute.current.selectedPath = info.mentionSelectedPath;\n        this.tribute.current.mentionText = info.mentionText;\n        this.tribute.current.selectedOffset = info.mentionSelectedOffset;\n      }\n    }\n  }, {\n    key: \"callbacks\",\n    value: function callbacks() {\n      var _this = this;\n\n      return {\n        triggerChar: function triggerChar(e, el, trigger) {\n          var tribute = _this.tribute;\n          tribute.current.trigger = trigger;\n          var collectionItem = tribute.collection.find(function (item) {\n            return item.trigger === trigger;\n          });\n          tribute.current.collection = collectionItem;\n          if (tribute.inputEvent) tribute.showMenuFor(el, true);\n        },\n        enter: function enter(e, el) {\n          // choose selection\n          if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n            e.preventDefault();\n            e.stopPropagation();\n            setTimeout(function () {\n              _this.tribute.selectItemAtIndex(_this.tribute.menuSelected, e);\n\n              _this.tribute.hideMenu();\n            }, 0);\n          }\n        },\n        escape: function escape(e, el) {\n          if (_this.tribute.isActive) {\n            e.preventDefault();\n            e.stopPropagation();\n            _this.tribute.isActive = false;\n\n            _this.tribute.hideMenu();\n          }\n        },\n        tab: function tab(e, el) {\n          // choose first match\n          _this.callbacks().enter(e, el);\n        },\n        space: function space(e, el) {\n          if (_this.tribute.isActive) {\n            if (_this.tribute.spaceSelectsMatch) {\n              _this.callbacks().enter(e, el);\n            } else if (!_this.tribute.allowSpaces) {\n              e.stopPropagation();\n              setTimeout(function () {\n                _this.tribute.hideMenu();\n\n                _this.tribute.isActive = false;\n              }, 0);\n            }\n          }\n        },\n        up: function up(e, el) {\n          // navigate up ul\n          if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n            e.preventDefault();\n            e.stopPropagation();\n            var count = _this.tribute.current.filteredItems.length,\n                selected = _this.tribute.menuSelected;\n\n            if (count > selected && selected > 0) {\n              _this.tribute.menuSelected--;\n\n              _this.setActiveLi();\n            } else if (selected === 0) {\n              _this.tribute.menuSelected = count - 1;\n\n              _this.setActiveLi();\n\n              _this.tribute.menu.scrollTop = _this.tribute.menu.scrollHeight;\n            }\n          }\n        },\n        down: function down(e, el) {\n          // navigate down ul\n          if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n            e.preventDefault();\n            e.stopPropagation();\n            var count = _this.tribute.current.filteredItems.length - 1,\n                selected = _this.tribute.menuSelected;\n\n            if (count > selected) {\n              _this.tribute.menuSelected++;\n\n              _this.setActiveLi();\n            } else if (count === selected) {\n              _this.tribute.menuSelected = 0;\n\n              _this.setActiveLi();\n\n              _this.tribute.menu.scrollTop = 0;\n            }\n          }\n        },\n        \"delete\": function _delete(e, el) {\n          if (_this.tribute.isActive && _this.tribute.current.mentionText.length < 1) {\n            _this.tribute.hideMenu();\n          } else if (_this.tribute.isActive) {\n            _this.tribute.showMenuFor(el);\n          }\n        }\n      };\n    }\n  }, {\n    key: \"setActiveLi\",\n    value: function setActiveLi(index) {\n      var lis = this.tribute.menu.querySelectorAll('li'),\n          length = lis.length >>> 0;\n      if (index) this.tribute.menuSelected = parseInt(index);\n\n      for (var i = 0; i < length; i++) {\n        var li = lis[i];\n\n        if (i === this.tribute.menuSelected) {\n          li.classList.add(this.tribute.current.collection.selectClass);\n          var liClientRect = li.getBoundingClientRect();\n          var menuClientRect = this.tribute.menu.getBoundingClientRect();\n\n          if (liClientRect.bottom > menuClientRect.bottom) {\n            var scrollDistance = liClientRect.bottom - menuClientRect.bottom;\n            this.tribute.menu.scrollTop += scrollDistance;\n          } else if (liClientRect.top < menuClientRect.top) {\n            var _scrollDistance = menuClientRect.top - liClientRect.top;\n\n            this.tribute.menu.scrollTop -= _scrollDistance;\n          }\n        } else {\n          li.classList.remove(this.tribute.current.collection.selectClass);\n        }\n      }\n    }\n  }, {\n    key: \"getFullHeight\",\n    value: function getFullHeight(elem, includeMargin) {\n      var height = elem.getBoundingClientRect().height;\n\n      if (includeMargin) {\n        var style = elem.currentStyle || window.getComputedStyle(elem);\n        return height + parseFloat(style.marginTop) + parseFloat(style.marginBottom);\n      }\n\n      return height;\n    }\n  }], [{\n    key: \"keys\",\n    value: function keys() {\n      return [{\n        key: 9,\n        value: 'TAB'\n      }, {\n        key: 8,\n        value: 'DELETE'\n      }, {\n        key: 13,\n        value: 'ENTER'\n      }, {\n        key: 27,\n        value: 'ESCAPE'\n      }, {\n        key: 32,\n        value: 'SPACE'\n      }, {\n        key: 38,\n        value: 'UP'\n      }, {\n        key: 40,\n        value: 'DOWN'\n      }];\n    }\n  }]);\n\n  return TributeEvents;\n}();\n\nvar _default = TributeEvents;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar TributeMenuEvents =\n/*#__PURE__*/\nfunction () {\n  function TributeMenuEvents(tribute) {\n    _classCallCheck(this, TributeMenuEvents);\n\n    this.tribute = tribute;\n    this.tribute.menuEvents = this;\n    this.menu = this.tribute.menu;\n  }\n\n  _createClass(TributeMenuEvents, [{\n    key: \"bind\",\n    value: function bind(menu) {\n      var _this = this;\n\n      this.menuClickEvent = this.tribute.events.click.bind(null, this);\n      this.menuContainerScrollEvent = this.debounce(function () {\n        if (_this.tribute.isActive) {\n          _this.tribute.showMenuFor(_this.tribute.current.element, false);\n        }\n      }, 300, false);\n      this.windowResizeEvent = this.debounce(function () {\n        if (_this.tribute.isActive) {\n          _this.tribute.range.positionMenuAtCaret(true);\n        }\n      }, 300, false); // fixes IE11 issues with mousedown\n\n      this.tribute.range.getDocument().addEventListener('MSPointerDown', this.menuClickEvent, false);\n      this.tribute.range.getDocument().addEventListener('mousedown', this.menuClickEvent, false);\n      window.addEventListener('resize', this.windowResizeEvent);\n\n      if (this.menuContainer) {\n        this.menuContainer.addEventListener('scroll', this.menuContainerScrollEvent, false);\n      } else {\n        window.addEventListener('scroll', this.menuContainerScrollEvent);\n      }\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind(menu) {\n      this.tribute.range.getDocument().removeEventListener('mousedown', this.menuClickEvent, false);\n      this.tribute.range.getDocument().removeEventListener('MSPointerDown', this.menuClickEvent, false);\n      window.removeEventListener('resize', this.windowResizeEvent);\n\n      if (this.menuContainer) {\n        this.menuContainer.removeEventListener('scroll', this.menuContainerScrollEvent, false);\n      } else {\n        window.removeEventListener('scroll', this.menuContainerScrollEvent);\n      }\n    }\n  }, {\n    key: \"debounce\",\n    value: function debounce(func, wait, immediate) {\n      var _this2 = this,\n          _arguments = arguments;\n\n      var timeout;\n      return function () {\n        var context = _this2,\n            args = _arguments;\n\n        var later = function later() {\n          timeout = null;\n          if (!immediate) func.apply(context, args);\n        };\n\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) func.apply(context, args);\n      };\n    }\n  }]);\n\n  return TributeMenuEvents;\n}();\n\nvar _default = TributeMenuEvents;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// Thanks to https://github.com/jeff-collins/ment.io\nvar TributeRange =\n/*#__PURE__*/\nfunction () {\n  function TributeRange(tribute) {\n    _classCallCheck(this, TributeRange);\n\n    this.tribute = tribute;\n    this.tribute.range = this;\n  }\n\n  _createClass(TributeRange, [{\n    key: \"getDocument\",\n    value: function getDocument() {\n      var iframe;\n\n      if (this.tribute.current.collection) {\n        iframe = this.tribute.current.collection.iframe;\n      }\n\n      if (!iframe) {\n        return document;\n      }\n\n      return iframe.contentWindow.document;\n    }\n  }, {\n    key: \"positionMenuAtCaret\",\n    value: function positionMenuAtCaret(scrollTo) {\n      var _this = this;\n\n      var context = this.tribute.current,\n          coordinates;\n      var info = this.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n      if (typeof info !== 'undefined') {\n        if (!this.tribute.positionMenu) {\n          this.tribute.menu.style.cssText = \"display: block;\";\n          return;\n        }\n\n        if (!this.isContentEditable(context.element)) {\n          coordinates = this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element, info.mentionPosition);\n        } else {\n          coordinates = this.getContentEditableCaretPosition(info.mentionPosition);\n        }\n\n        this.tribute.menu.style.cssText = \"top: \".concat(coordinates.top, \"px;\\n                                     left: \").concat(coordinates.left, \"px;\\n                                     right: \").concat(coordinates.right, \"px;\\n                                     bottom: \").concat(coordinates.bottom, \"px;\\n                                     position: absolute;\\n                                     display: block;\");\n\n        if (coordinates.left === 'auto') {\n          this.tribute.menu.style.left = 'auto';\n        }\n\n        if (coordinates.top === 'auto') {\n          this.tribute.menu.style.top = 'auto';\n        }\n\n        if (scrollTo) this.scrollIntoView();\n        window.setTimeout(function () {\n          var menuDimensions = {\n            width: _this.tribute.menu.offsetWidth,\n            height: _this.tribute.menu.offsetHeight\n          };\n\n          var menuIsOffScreen = _this.isMenuOffScreen(coordinates, menuDimensions);\n\n          var menuIsOffScreenHorizontally = window.innerWidth > menuDimensions.width && (menuIsOffScreen.left || menuIsOffScreen.right);\n          var menuIsOffScreenVertically = window.innerHeight > menuDimensions.height && (menuIsOffScreen.top || menuIsOffScreen.bottom);\n\n          if (menuIsOffScreenHorizontally || menuIsOffScreenVertically) {\n            _this.tribute.menu.style.cssText = 'display: none';\n\n            _this.positionMenuAtCaret(scrollTo);\n          }\n        }, 0);\n      } else {\n        this.tribute.menu.style.cssText = 'display: none';\n      }\n    }\n  }, {\n    key: \"selectElement\",\n    value: function selectElement(targetElement, path, offset) {\n      var range;\n      var elem = targetElement;\n\n      if (path) {\n        for (var i = 0; i < path.length; i++) {\n          elem = elem.childNodes[path[i]];\n\n          if (elem === undefined) {\n            return;\n          }\n\n          while (elem.length < offset) {\n            offset -= elem.length;\n            elem = elem.nextSibling;\n          }\n\n          if (elem.childNodes.length === 0 && !elem.length) {\n            elem = elem.previousSibling;\n          }\n        }\n      }\n\n      var sel = this.getWindowSelection();\n      range = this.getDocument().createRange();\n      range.setStart(elem, offset);\n      range.setEnd(elem, offset);\n      range.collapse(true);\n\n      try {\n        sel.removeAllRanges();\n      } catch (error) {}\n\n      sel.addRange(range);\n      targetElement.focus();\n    }\n  }, {\n    key: \"replaceTriggerText\",\n    value: function replaceTriggerText(text, requireLeadingSpace, hasTrailingSpace, originalEvent, item) {\n      var info = this.getTriggerInfo(true, hasTrailingSpace, requireLeadingSpace, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n      if (info !== undefined) {\n        var context = this.tribute.current;\n        var replaceEvent = new CustomEvent('tribute-replaced', {\n          detail: {\n            item: item,\n            instance: context,\n            context: info,\n            event: originalEvent\n          }\n        });\n\n        if (!this.isContentEditable(context.element)) {\n          var myField = this.tribute.current.element;\n          var textSuffix = typeof this.tribute.replaceTextSuffix == 'string' ? this.tribute.replaceTextSuffix : ' ';\n          text += textSuffix;\n          var startPos = info.mentionPosition;\n          var endPos = info.mentionPosition + info.mentionText.length + textSuffix.length;\n          myField.value = myField.value.substring(0, startPos) + text + myField.value.substring(endPos, myField.value.length);\n          myField.selectionStart = startPos + text.length;\n          myField.selectionEnd = startPos + text.length;\n        } else {\n          // add a space to the end of the pasted text\n          var _textSuffix = typeof this.tribute.replaceTextSuffix == 'string' ? this.tribute.replaceTextSuffix : '\\xA0';\n\n          text += _textSuffix;\n          this.pasteHtml(text, info.mentionPosition, info.mentionPosition + info.mentionText.length + !this.tribute.autocompleteMode);\n        }\n\n        context.element.dispatchEvent(replaceEvent);\n      }\n    }\n  }, {\n    key: \"pasteHtml\",\n    value: function pasteHtml(html, startPos, endPos) {\n      var range, sel;\n      sel = this.getWindowSelection();\n      range = this.getDocument().createRange();\n      range.setStart(sel.anchorNode, startPos);\n      range.setEnd(sel.anchorNode, endPos);\n      range.deleteContents();\n      var el = this.getDocument().createElement('div');\n      el.innerHTML = html;\n      var frag = this.getDocument().createDocumentFragment(),\n          node,\n          lastNode;\n\n      while (node = el.firstChild) {\n        lastNode = frag.appendChild(node);\n      }\n\n      range.insertNode(frag); // Preserve the selection\n\n      if (lastNode) {\n        range = range.cloneRange();\n        range.setStartAfter(lastNode);\n        range.collapse(true);\n        sel.removeAllRanges();\n        sel.addRange(range);\n      }\n    }\n  }, {\n    key: \"getWindowSelection\",\n    value: function getWindowSelection() {\n      if (this.tribute.collection.iframe) {\n        return this.tribute.collection.iframe.contentWindow.getSelection();\n      }\n\n      return window.getSelection();\n    }\n  }, {\n    key: \"getNodePositionInParent\",\n    value: function getNodePositionInParent(element) {\n      if (element.parentNode === null) {\n        return 0;\n      }\n\n      for (var i = 0; i < element.parentNode.childNodes.length; i++) {\n        var node = element.parentNode.childNodes[i];\n\n        if (node === element) {\n          return i;\n        }\n      }\n    }\n  }, {\n    key: \"getContentEditableSelectedPath\",\n    value: function getContentEditableSelectedPath(ctx) {\n      var sel = this.getWindowSelection();\n      var selected = sel.anchorNode;\n      var path = [];\n      var offset;\n\n      if (selected != null) {\n        var i;\n        var ce = selected.contentEditable;\n\n        while (selected !== null && ce !== 'true') {\n          i = this.getNodePositionInParent(selected);\n          path.push(i);\n          selected = selected.parentNode;\n\n          if (selected !== null) {\n            ce = selected.contentEditable;\n          }\n        }\n\n        path.reverse(); // getRangeAt may not exist, need alternative\n\n        offset = sel.getRangeAt(0).startOffset;\n        return {\n          selected: selected,\n          path: path,\n          offset: offset\n        };\n      }\n    }\n  }, {\n    key: \"getTextPrecedingCurrentSelection\",\n    value: function getTextPrecedingCurrentSelection() {\n      var context = this.tribute.current,\n          text = '';\n\n      if (!this.isContentEditable(context.element)) {\n        var textComponent = this.tribute.current.element;\n\n        if (textComponent) {\n          var startPos = textComponent.selectionStart;\n\n          if (textComponent.value && startPos >= 0) {\n            text = textComponent.value.substring(0, startPos);\n          }\n        }\n      } else {\n        var selectedElem = this.getWindowSelection().anchorNode;\n\n        if (selectedElem != null) {\n          var workingNodeContent = selectedElem.textContent;\n          var selectStartOffset = this.getWindowSelection().getRangeAt(0).startOffset;\n\n          if (workingNodeContent && selectStartOffset >= 0) {\n            text = workingNodeContent.substring(0, selectStartOffset);\n          }\n        }\n      }\n\n      return text;\n    }\n  }, {\n    key: \"getLastWordInText\",\n    value: function getLastWordInText(text) {\n      text = text.replace(/\\u00A0/g, ' '); // https://stackoverflow.com/questions/29850407/how-do-i-replace-unicode-character-u00a0-with-a-space-in-javascript\n\n      var wordsArray = text.split(/\\s+/);\n      var worldsCount = wordsArray.length - 1;\n      return wordsArray[worldsCount].trim();\n    }\n  }, {\n    key: \"getTriggerInfo\",\n    value: function getTriggerInfo(menuAlreadyActive, hasTrailingSpace, requireLeadingSpace, allowSpaces, isAutocomplete) {\n      var _this2 = this;\n\n      var ctx = this.tribute.current;\n      var selected, path, offset;\n\n      if (!this.isContentEditable(ctx.element)) {\n        selected = this.tribute.current.element;\n      } else {\n        var selectionInfo = this.getContentEditableSelectedPath(ctx);\n\n        if (selectionInfo) {\n          selected = selectionInfo.selected;\n          path = selectionInfo.path;\n          offset = selectionInfo.offset;\n        }\n      }\n\n      var effectiveRange = this.getTextPrecedingCurrentSelection();\n      var lastWordOfEffectiveRange = this.getLastWordInText(effectiveRange);\n\n      if (isAutocomplete) {\n        return {\n          mentionPosition: effectiveRange.length - lastWordOfEffectiveRange.length,\n          mentionText: lastWordOfEffectiveRange,\n          mentionSelectedElement: selected,\n          mentionSelectedPath: path,\n          mentionSelectedOffset: offset\n        };\n      }\n\n      if (effectiveRange !== undefined && effectiveRange !== null) {\n        var mostRecentTriggerCharPos = -1;\n        var triggerChar;\n        this.tribute.collection.forEach(function (config) {\n          var c = config.trigger;\n          var idx = config.requireLeadingSpace ? _this2.lastIndexWithLeadingSpace(effectiveRange, c) : effectiveRange.lastIndexOf(c);\n\n          if (idx > mostRecentTriggerCharPos) {\n            mostRecentTriggerCharPos = idx;\n            triggerChar = c;\n            requireLeadingSpace = config.requireLeadingSpace;\n          }\n        });\n\n        if (mostRecentTriggerCharPos >= 0 && (mostRecentTriggerCharPos === 0 || !requireLeadingSpace || /[\\xA0\\s]/g.test(effectiveRange.substring(mostRecentTriggerCharPos - 1, mostRecentTriggerCharPos)))) {\n          var currentTriggerSnippet = effectiveRange.substring(mostRecentTriggerCharPos + 1, effectiveRange.length);\n          triggerChar = effectiveRange.substring(mostRecentTriggerCharPos, mostRecentTriggerCharPos + 1);\n          var firstSnippetChar = currentTriggerSnippet.substring(0, 1);\n          var leadingSpace = currentTriggerSnippet.length > 0 && (firstSnippetChar === ' ' || firstSnippetChar === '\\xA0');\n\n          if (hasTrailingSpace) {\n            currentTriggerSnippet = currentTriggerSnippet.trim();\n          }\n\n          var regex = allowSpaces ? /[^\\S ]/g : /[\\xA0\\s]/g;\n          this.tribute.hasTrailingSpace = regex.test(currentTriggerSnippet);\n\n          if (!leadingSpace && (menuAlreadyActive || !regex.test(currentTriggerSnippet))) {\n            return {\n              mentionPosition: mostRecentTriggerCharPos,\n              mentionText: currentTriggerSnippet,\n              mentionSelectedElement: selected,\n              mentionSelectedPath: path,\n              mentionSelectedOffset: offset,\n              mentionTriggerChar: triggerChar\n            };\n          }\n        }\n      }\n    }\n  }, {\n    key: \"lastIndexWithLeadingSpace\",\n    value: function lastIndexWithLeadingSpace(str, _char) {\n      var reversedStr = str.split('').reverse().join('');\n      var index = -1;\n\n      for (var cidx = 0, len = str.length; cidx < len; cidx++) {\n        var firstChar = cidx === str.length - 1;\n        var leadingSpace = /\\s/.test(reversedStr[cidx + 1]);\n        var match = _char === reversedStr[cidx];\n\n        if (match && (firstChar || leadingSpace)) {\n          index = str.length - 1 - cidx;\n          break;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: \"isContentEditable\",\n    value: function isContentEditable(element) {\n      return element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA';\n    }\n  }, {\n    key: \"isMenuOffScreen\",\n    value: function isMenuOffScreen(coordinates, menuDimensions) {\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight;\n      var doc = document.documentElement;\n      var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n      var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n      var menuTop = typeof coordinates.top === 'number' ? coordinates.top : windowTop + windowHeight - coordinates.bottom - menuDimensions.height;\n      var menuRight = typeof coordinates.right === 'number' ? coordinates.right : coordinates.left + menuDimensions.width;\n      var menuBottom = typeof coordinates.bottom === 'number' ? coordinates.bottom : coordinates.top + menuDimensions.height;\n      var menuLeft = typeof coordinates.left === 'number' ? coordinates.left : windowLeft + windowWidth - coordinates.right - menuDimensions.width;\n      return {\n        top: menuTop < Math.floor(windowTop),\n        right: menuRight > Math.ceil(windowLeft + windowWidth),\n        bottom: menuBottom > Math.ceil(windowTop + windowHeight),\n        left: menuLeft < Math.floor(windowLeft)\n      };\n    }\n  }, {\n    key: \"getMenuDimensions\",\n    value: function getMenuDimensions() {\n      // Width of the menu depends of its contents and position\n      // We must check what its width would be without any obstruction\n      // This way, we can achieve good positioning for flipping the menu\n      var dimensions = {\n        width: null,\n        height: null\n      };\n      this.tribute.menu.style.cssText = \"top: 0px;\\n                                 left: 0px;\\n                                 position: fixed;\\n                                 display: block;\\n                                 visibility; hidden;\";\n      dimensions.width = this.tribute.menu.offsetWidth;\n      dimensions.height = this.tribute.menu.offsetHeight;\n      this.tribute.menu.style.cssText = \"display: none;\";\n      return dimensions;\n    }\n  }, {\n    key: \"getTextAreaOrInputUnderlinePosition\",\n    value: function getTextAreaOrInputUnderlinePosition(element, position, flipped) {\n      var properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX', 'overflowY', 'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration', 'letterSpacing', 'wordSpacing'];\n      var isFirefox = window.mozInnerScreenX !== null;\n      var div = this.getDocument().createElement('div');\n      div.id = 'input-textarea-caret-position-mirror-div';\n      this.getDocument().body.appendChild(div);\n      var style = div.style;\n      var computed = window.getComputedStyle ? getComputedStyle(element) : element.currentStyle;\n      style.whiteSpace = 'pre-wrap';\n\n      if (element.nodeName !== 'INPUT') {\n        style.wordWrap = 'break-word';\n      } // position off-screen\n\n\n      style.position = 'absolute';\n      style.visibility = 'hidden'; // transfer the element's properties to the div\n\n      properties.forEach(function (prop) {\n        style[prop] = computed[prop];\n      });\n\n      if (isFirefox) {\n        style.width = \"\".concat(parseInt(computed.width) - 2, \"px\");\n        if (element.scrollHeight > parseInt(computed.height)) style.overflowY = 'scroll';\n      } else {\n        style.overflow = 'hidden';\n      }\n\n      div.textContent = element.value.substring(0, position);\n\n      if (element.nodeName === 'INPUT') {\n        div.textContent = div.textContent.replace(/\\s/g, ' ');\n      }\n\n      var span = this.getDocument().createElement('span');\n      span.textContent = element.value.substring(position) || '.';\n      div.appendChild(span);\n      var rect = element.getBoundingClientRect();\n      var doc = document.documentElement;\n      var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n      var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n      var top = 0;\n      var left = 0;\n\n      if (this.menuContainerIsBody) {\n        top = rect.top;\n        left = rect.left;\n      }\n\n      var coordinates = {\n        top: top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth) + parseInt(computed.fontSize) - element.scrollTop,\n        left: left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth)\n      };\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight;\n      var menuDimensions = this.getMenuDimensions();\n      var menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n      if (menuIsOffScreen.right) {\n        coordinates.right = windowWidth - coordinates.left;\n        coordinates.left = 'auto';\n      }\n\n      var parentHeight = this.tribute.menuContainer ? this.tribute.menuContainer.offsetHeight : this.getDocument().body.offsetHeight;\n\n      if (menuIsOffScreen.bottom) {\n        var parentRect = this.tribute.menuContainer ? this.tribute.menuContainer.getBoundingClientRect() : this.getDocument().body.getBoundingClientRect();\n        var scrollStillAvailable = parentHeight - (windowHeight - parentRect.top);\n        coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top - span.offsetTop);\n        coordinates.top = 'auto';\n      }\n\n      menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n      if (menuIsOffScreen.left) {\n        coordinates.left = windowWidth > menuDimensions.width ? windowLeft + windowWidth - menuDimensions.width : windowLeft;\n        delete coordinates.right;\n      }\n\n      if (menuIsOffScreen.top) {\n        coordinates.top = windowHeight > menuDimensions.height ? windowTop + windowHeight - menuDimensions.height : windowTop;\n        delete coordinates.bottom;\n      }\n\n      this.getDocument().body.removeChild(div);\n      return coordinates;\n    }\n  }, {\n    key: \"getContentEditableCaretPosition\",\n    value: function getContentEditableCaretPosition(selectedNodePosition) {\n      var markerTextChar = '';\n      var markerEl,\n          markerId = \"sel_\".concat(new Date().getTime(), \"_\").concat(Math.random().toString().substr(2));\n      var range;\n      var sel = this.getWindowSelection();\n      var prevRange = sel.getRangeAt(0);\n      range = this.getDocument().createRange();\n      range.setStart(sel.anchorNode, selectedNodePosition);\n      range.setEnd(sel.anchorNode, selectedNodePosition);\n      range.collapse(false); // Create the marker element containing a single invisible character using DOM methods and insert it\n\n      markerEl = this.getDocument().createElement('span');\n      markerEl.id = markerId;\n      markerEl.appendChild(this.getDocument().createTextNode(markerTextChar));\n      range.insertNode(markerEl);\n      sel.removeAllRanges();\n      sel.addRange(prevRange);\n      var rect = markerEl.getBoundingClientRect();\n      var doc = document.documentElement;\n      var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n      var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n      var left = 0;\n      var top = 0;\n\n      if (this.menuContainerIsBody) {\n        left = rect.left;\n        top = rect.top;\n      } else {\n        left = markerEl.offsetLeft;\n        top = markerEl.offsetTop;\n      }\n\n      var coordinates = {\n        left: left + windowLeft,\n        top: top + markerEl.offsetHeight + windowTop\n      };\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight;\n      var menuDimensions = this.getMenuDimensions();\n      var menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n      if (menuIsOffScreen.right) {\n        coordinates.left = 'auto';\n        coordinates.right = windowWidth - rect.left - windowLeft;\n      }\n\n      var parentHeight = this.tribute.menuContainer ? this.tribute.menuContainer.offsetHeight : this.getDocument().body.offsetHeight;\n\n      if (menuIsOffScreen.bottom) {\n        var parentRect = this.tribute.menuContainer ? this.tribute.menuContainer.getBoundingClientRect() : this.getDocument().body.getBoundingClientRect();\n        var scrollStillAvailable = parentHeight - (windowHeight - parentRect.top);\n        coordinates.top = 'auto';\n        coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top);\n      }\n\n      menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n      if (menuIsOffScreen.left) {\n        coordinates.left = windowWidth > menuDimensions.width ? windowLeft + windowWidth - menuDimensions.width : windowLeft;\n        delete coordinates.right;\n      }\n\n      if (menuIsOffScreen.top) {\n        coordinates.top = windowHeight > menuDimensions.height ? windowTop + windowHeight - menuDimensions.height : windowTop;\n        delete coordinates.bottom;\n      }\n\n      markerEl.parentNode.removeChild(markerEl);\n      return coordinates;\n    }\n  }, {\n    key: \"scrollIntoView\",\n    value: function scrollIntoView(elem) {\n      var reasonableBuffer = 20,\n          clientRect;\n      var maxScrollDisplacement = 100;\n      var e = this.menu;\n      if (typeof e === 'undefined') return;\n\n      while (clientRect === undefined || clientRect.height === 0) {\n        clientRect = e.getBoundingClientRect();\n\n        if (clientRect.height === 0) {\n          e = e.childNodes[0];\n\n          if (e === undefined || !e.getBoundingClientRect) {\n            return;\n          }\n        }\n      }\n\n      var elemTop = clientRect.top;\n      var elemBottom = elemTop + clientRect.height;\n\n      if (elemTop < 0) {\n        window.scrollTo(0, window.pageYOffset + clientRect.top - reasonableBuffer);\n      } else if (elemBottom > window.innerHeight) {\n        var maxY = window.pageYOffset + clientRect.top - reasonableBuffer;\n\n        if (maxY - window.pageYOffset > maxScrollDisplacement) {\n          maxY = window.pageYOffset + maxScrollDisplacement;\n        }\n\n        var targetY = window.pageYOffset - (window.innerHeight - elemBottom);\n\n        if (targetY > maxY) {\n          targetY = maxY;\n        }\n\n        window.scrollTo(0, targetY);\n      }\n    }\n  }, {\n    key: \"menuContainerIsBody\",\n    get: function get() {\n      return this.tribute.menuContainer === document.body || !this.tribute.menuContainer;\n    }\n  }]);\n\n  return TributeRange;\n}();\n\nvar _default = TributeRange;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// Thanks to https://github.com/mattyork/fuzzy\nvar TributeSearch =\n/*#__PURE__*/\nfunction () {\n  function TributeSearch(tribute) {\n    _classCallCheck(this, TributeSearch);\n\n    this.tribute = tribute;\n    this.tribute.search = this;\n  }\n\n  _createClass(TributeSearch, [{\n    key: \"simpleFilter\",\n    value: function simpleFilter(pattern, array) {\n      var _this = this;\n\n      return array.filter(function (string) {\n        return _this.test(pattern, string);\n      });\n    }\n  }, {\n    key: \"test\",\n    value: function test(pattern, string) {\n      return this.match(pattern, string) !== null;\n    }\n  }, {\n    key: \"match\",\n    value: function match(pattern, string, opts) {\n      opts = opts || {};\n      var patternIdx = 0,\n          result = [],\n          len = string.length,\n          totalScore = 0,\n          currScore = 0,\n          pre = opts.pre || '',\n          post = opts.post || '',\n          compareString = opts.caseSensitive && string || string.toLowerCase(),\n          ch,\n          compareChar;\n\n      if (opts.skip) {\n        return {\n          rendered: string,\n          score: 0\n        };\n      }\n\n      pattern = opts.caseSensitive && pattern || pattern.toLowerCase();\n      var patternCache = this.traverse(compareString, pattern, 0, 0, []);\n\n      if (!patternCache) {\n        return null;\n      }\n\n      return {\n        rendered: this.render(string, patternCache.cache, pre, post),\n        score: patternCache.score\n      };\n    }\n  }, {\n    key: \"traverse\",\n    value: function traverse(string, pattern, stringIndex, patternIndex, patternCache) {\n      // if the pattern search at end\n      if (pattern.length === patternIndex) {\n        // calculate score and copy the cache containing the indices where it's found\n        return {\n          score: this.calculateScore(patternCache),\n          cache: patternCache.slice()\n        };\n      } // if string at end or remaining pattern > remaining string\n\n\n      if (string.length === stringIndex || pattern.length - patternIndex > string.length - stringIndex) {\n        return undefined;\n      }\n\n      var c = pattern[patternIndex];\n      var index = string.indexOf(c, stringIndex);\n      var best, temp;\n\n      while (index > -1) {\n        patternCache.push(index);\n        temp = this.traverse(string, pattern, index + 1, patternIndex + 1, patternCache);\n        patternCache.pop(); // if downstream traversal failed, return best answer so far\n\n        if (!temp) {\n          return best;\n        }\n\n        if (!best || best.score < temp.score) {\n          best = temp;\n        }\n\n        index = string.indexOf(c, index + 1);\n      }\n\n      return best;\n    }\n  }, {\n    key: \"calculateScore\",\n    value: function calculateScore(patternCache) {\n      var score = 0;\n      var temp = 1;\n      patternCache.forEach(function (index, i) {\n        if (i > 0) {\n          if (patternCache[i - 1] + 1 === index) {\n            temp += temp + 1;\n          } else {\n            temp = 1;\n          }\n        }\n\n        score += temp;\n      });\n      return score;\n    }\n  }, {\n    key: \"render\",\n    value: function render(string, indices, pre, post) {\n      var rendered = string.substring(0, indices[0]);\n      indices.forEach(function (index, i) {\n        rendered += pre + string[index] + post + string.substring(index + 1, indices[i + 1] ? indices[i + 1] : string.length);\n      });\n      return rendered;\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(pattern, arr, opts) {\n      var _this2 = this;\n\n      opts = opts || {};\n      return arr.reduce(function (prev, element, idx, arr) {\n        var str = element;\n\n        if (opts.extract) {\n          str = opts.extract(element);\n\n          if (!str) {\n            // take care of undefineds / nulls / etc.\n            str = '';\n          }\n        }\n\n        var rendered = _this2.match(pattern, str, opts);\n\n        if (rendered != null) {\n          prev[prev.length] = {\n            string: rendered.rendered,\n            score: rendered.score,\n            index: idx,\n            original: element\n          };\n        }\n\n        return prev;\n      }, []).sort(function (a, b) {\n        var compare = b.score - a.score;\n        if (compare) return compare;\n        return a.index - b.index;\n      });\n    }\n  }]);\n\n  return TributeSearch;\n}();\n\nvar _default = TributeSearch;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _Tribute = _interopRequireDefault(require(\"./Tribute\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/**\n* Tribute.js\n* Native ES6 JavaScript @mention Plugin\n**/\nvar _default = _Tribute[\"default\"];\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{\"./Tribute\":1}],7:[function(require,module,exports){\n\"use strict\";\n\nif (!Array.prototype.find) {\n  Array.prototype.find = function (predicate) {\n    if (this === null) {\n      throw new TypeError('Array.prototype.find called on null or undefined');\n    }\n\n    if (typeof predicate !== 'function') {\n      throw new TypeError('predicate must be a function');\n    }\n\n    var list = Object(this);\n    var length = list.length >>> 0;\n    var thisArg = arguments[1];\n    var value;\n\n    for (var i = 0; i < length; i++) {\n      value = list[i];\n\n      if (predicate.call(thisArg, value, i, list)) {\n        return value;\n      }\n    }\n\n    return undefined;\n  };\n}\n\nif (window && typeof window.CustomEvent !== \"function\") {\n  var CustomEvent = function CustomEvent(event, params) {\n    params = params || {\n      bubbles: false,\n      cancelable: false,\n      detail: undefined\n    };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  };\n\n  if (typeof window.Event !== 'undefined') {\n    CustomEvent.prototype = window.Event.prototype;\n  }\n\n  window.CustomEvent = CustomEvent;\n}\n\n},{}]},{},[6])(6)\n});\n","/* eslint-disable require-jsdoc, no-console */\n\nimport areachart from \"src/decidim/vizzs/areachart\"\n\n$(() => {\n\n  const metricsData = {};\n  const metricsContainer = {};\n  const metricsParams = {};\n\n  const query = () => {\n    let metricsQuery = `metrics(names: ${metricsParams.names}, space_type: \"${metricsParams.spaceType}\", space_id: ${metricsParams.spaceId}) { name history { key value } }`;\n    return {query: `{ ${metricsQuery} }`};\n  }\n\n  const parameterize = (metrics) => {\n    metricsParams.names = JSON.stringify(metrics || []);\n    metricsParams.spaceType = $(\"#metrics #metrics-space_type\").val() || null;\n    metricsParams.spaceId = $(\"#metrics #metrics-space_id\").val() || null;\n  }\n\n  const fetch = (metrics) => $.post(\"/api\", query(metrics));\n\n  const downloadMetricData = (event) => {\n    event.preventDefault();\n    let metricName = $(event.target).parents(\".metric-downloader\").data(\"metric\");\n    let csvContent = \"data:text/csv;charset=utf-8,\";\n\n    csvContent += \"key,value\\r\\n\";\n    metricsData[metricName].forEach((metricData)  => {\n      csvContent += `${metricData.key},${metricData.value}\\r\\n`;\n    });\n\n    // Required for FF\n    let link = document.createElement(\"a\");\n    link.setAttribute(\"href\", encodeURI(csvContent));\n    link.setAttribute(\"download\", `${metricName}_metric_data.csv`);\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n\n  $(\".metric-chart:visible\").each((_index, container) => {\n    metricsContainer[$(container).data(\"metric\")] = container;\n  });\n  $(\".metric-downloader\").each((_index, container) => {\n    container.onclick = downloadMetricData;\n  });\n\n  if (!$.isEmptyObject(metricsContainer)) {\n    parameterize(Object.keys(metricsContainer))\n    fetch().then((response) => {\n      if (response.data) {\n        $.each(response.data.metrics, (_index, metricData) => {\n          let container = metricsContainer[metricData.name];\n          if (metricData.history.length === 0) {\n            $(container).remove();\n            return;\n          }\n          let info = $(container).data(\"info\");\n          metricsData[metricData.name] = $.extend(true, [], metricData.history);\n          areachart({\n            container: `#${container.id}`,\n            data: metricData.history,\n            title: info.title,\n            objectName: info.object,\n            ...$(container).data()\n          });\n        });\n      } else if (response.errors) {\n        console.log(\"Something wrong happened when fetching metrics:\");\n        $.each(response.errors, (_index, error) => {\n          console.log(error.message);\n        });\n        $(\"#metrics\").remove();\n      }\n    }).fail((err) => {\n      console.log(`Something wrong happened when fetching metrics: ${err.statusText}`);\n      $(\"#metrics\").remove();\n    });\n  }\n});\n","/* eslint-disable require-jsdoc, id-length, no-undefined, no-unused-vars, multiline-ternary, no-ternary, no-nested-ternary, no-invalid-this */\n/* eslint prefer-reflect: [\"error\", { \"exceptions\": [\"call\"] }] */\n/* eslint dot-location: [\"error\", \"property\"] */\n/* eslint no-unused-vars: 0 */\n\nimport { select, mouse } from \"d3-selection\";\nimport { min, max, extent, ascending, bisector } from \"d3-array\";\nimport { scaleTime, scaleLinear } from \"d3-scale\";\nimport { axisLeft, axisBottom } from \"d3-axis\";\nimport { timeMonth } from \"d3-time\";\nimport { timeFormat, isoParse } from \"d3-time-format\";\nimport { area, line } from \"d3-shape\";\n\n// lib\nexport default function areachart(opts = {}) {\n\n  const parseData = (data) => {\n    // format the data\n    data.forEach((d) => {\n      d.key = isoParse(d.key)\n      d.value = Number(d.value)\n    });\n\n    // order by date\n    return data.sort((x, y) => ascending(x.key, y.key))\n  }\n\n  // OPTIONAL: Helper function to accumulates all data values\n  const aggregate = (agg) => agg.map((item, index, array) => {\n    if (index > 0) {\n      item.value += array[index - 1].value\n    }\n    return item\n  })\n\n  // parse opts\n  let data = parseData(opts.data)\n  let title = opts.title\n  let objectName = opts.objectName || \"\"\n  let container = select(opts.container)\n  let showAxis = opts.axis || false\n  let ratio = (opts.ratio || \"\").split(\":\").reduce((a, b) => a / b) || (4 / 3)\n  let showTooltip = Object.is(opts.tip, undefined) ? true : opts.tip\n  let cumulative = opts.agg || false\n\n  if (cumulative) {\n    data = aggregate(data)\n  }\n\n  // set the dimensions and margins of the graph\n  let margin = {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  }\n\n  let width = Number(container.node().getBoundingClientRect().width) - margin.left - margin.right\n  let height = (width / ratio) - margin.top - margin.bottom\n  let titlePadding = min([width / 10, 32])\n\n  // set the ranges\n  let x = scaleTime().range([0, width]);\n  let y = scaleLinear().range([height, 0]);\n\n  // define the area\n  let _area = area()\n    .x((d) => x(d.key))\n    .y0(height)\n    .y1((d) => y(d.value));\n\n  // define the line\n  let valueline = line()\n    .x((d) => x(d.key))\n    .y((d) => y(d.value));\n\n  let svg = container.append(\"svg\")\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n    .append(\"g\")\n    .attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n  // scale the range of the data\n  x.domain(extent(data, (d) => d.key));\n  y.domain([0, max(data, (d) => d.value)]).nice();\n\n  // add the valueline path.\n  let topLine = svg.append(\"path\")\n    .data([data])\n    .attr(\"class\", \"line\")\n    .attr(\"d\", valueline)\n\n  // add the area\n  svg.append(\"path\")\n    .data([data])\n    .attr(\"class\", \"area\")\n    .attr(\"d\", _area)\n\n  if (showTooltip) {\n    // tooltip\n    let circle = svg.append(\"circle\")\n      .attr(\"class\", \"circle\")\n      .attr(\"r\", 6)\n      .style(\"display\", \"none\")\n\n    let tooltip = select(\"body\").append(\"div\")\n      .attr(\"id\", `${container.node().id}-tooltip`)\n      .attr(\"class\", \"chart-tooltip\")\n      .style(\"opacity\", 0)\n\n    svg\n      .on(\"mouseover\", () => {\n        circle.style(\"display\", null)\n        tooltip.style(\"opacity\", 1)\n      })\n      .on(\"mouseout\", () => {\n        circle.style(\"display\", \"none\")\n        tooltip.style(\"opacity\", 0)\n      })\n      .on(\"mousemove\", function() {\n        let x0 = x.invert(mouse(this)[0])\n        let i = bisector((d) => d.key).left(data, x0, 1)\n        let d0 = data[i - 1]\n        let d1 = data[i]\n        let d = (x0 - d0.key > d1.key - x0) ? d1 : d0\n\n        // svg position relative to document\n        let coords = {\n          x: window.pageXOffset + container.node().getBoundingClientRect().left,\n          y: window.pageYOffset + container.node().getBoundingClientRect().top\n        }\n\n        let tooltipContent = `\n          <div class=\"tooltip-content\">\n            ${timeFormat(\"%e %B %Y\")(d.key)}<br />\n            ${d.value.toLocaleString()} ${objectName}\n          </div>`\n\n        circle.attr(\"transform\", `translate(${x(d.key)},${y(d.value)})`)\n        tooltip.html(tooltipContent)\n          .style(\"left\", `${coords.x + x(d.key)}px`)\n          .style(\"top\", `${coords.y + y(d.value)}px`)\n      })\n  }\n\n  if (showAxis) {\n    let xAxis = axisBottom(x)\n      .ticks(timeMonth)\n      .tickFormat(timeFormat(\"%b %y\"))\n      .tickSize(-height)\n    let yAxis = axisLeft(y)\n      .ticks(5)\n      .tickSize(8)\n\n    let _xAxis = (g) => {\n      g.call(xAxis)\n      g.select(\".domain\").remove()\n      g.selectAll(\".tick line\").attr(\"class\", \"dashed\")\n      g.selectAll(\".tick text\").attr(\"y\", 6)\n    }\n    let _yAxis = (g) => {\n      g.call(yAxis)\n      g.select(\".domain\").remove()\n      g.select(\".tick:first-of-type\").remove()\n      g.selectAll(\".tick text\").attr(\"text-anchor\", \"start\").attr(\"x\", 6)\n    }\n\n    // custom X-Axis\n    svg.append(\"g\")\n      .attr(\"transform\", `translate(0,${height})`)\n      .call(_xAxis);\n\n    // custom Y-Axis\n    svg.append(\"g\")\n      .call(_yAxis)\n\n    // last circle (current value)\n    let g = svg.append(\"g\")\n      .data([data])\n      .attr(\"transform\", (d) => `translate(${x(d[d.length - 1].key)},${y(d[d.length - 1].value)})`)\n\n    g.append(\"circle\")\n      .attr(\"class\", \"circle\")\n      .attr(\"r\", 8)\n\n    g.append(\"text\")\n      .attr(\"class\", \"sum\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"dx\", -8 * 2)\n      .text((d) => d[d.length - 1].value.toLocaleString())\n\n  } else {\n    // add the title group\n    let g = svg.append(\"g\")\n      .attr(\"text-anchor\", \"start\")\n      .attr(\"transform\", `translate(${titlePadding},${titlePadding})`)\n\n    let titleLines = 0\n\n    if (title.length) {\n      g.append(\"text\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 0)\n        .attr(\"class\", \"title\")\n        .text(title)\n        .call(function(fulltext, wrapwidth, start = 0) {\n          fulltext.each(function() {\n            let text = select(this)\n            let word = \"\"\n            let words = text.text().split(/\\s+/).reverse()\n            let _line = []\n            let lineNumber = 0\n            let lineHeight = 1.1\n            let _x = text.attr(\"x\")\n            let _y = text.attr(\"y\")\n            let dy = 0\n            let tspan = text.text(null)\n              .append(\"tspan\")\n              .attr(\"x\", _x)\n              .attr(\"y\", _y)\n              .attr(\"dy\", `${dy}em`)\n\n            /* eslint-disable no-cond-assign, no-plusplus */\n            while (word = words.pop()) {\n              _line.push(word);\n              tspan.text(_line.join(\" \"));\n              if (tspan.node().getComputedTextLength() > wrapwidth) {\n                _line.pop()\n                tspan.text(_line.join(\" \"))\n                _line = [word]\n                tspan = text.append(\"tspan\")\n                  .attr(\"x\", _x)\n                  .attr(\"y\", _y)\n                  .attr(\"dy\", `${(++lineNumber * lineHeight) + dy}em`)\n                  .text(word);\n              }\n            }\n\n            titleLines = lineNumber * lineHeight\n          });\n        }, width - (titlePadding * 2))\n    }\n\n    let fontSize = parseFloat(getComputedStyle(g.node()).fontSize);\n\n    g.append(\"text\")\n      .attr(\"x\", 0)\n      .attr(\"dy\", title.length ? (titlePadding * 2) + (titleLines * fontSize) : (titlePadding * 1.25))\n      .attr(\"class\", \"sum\")\n      .text(data[data.length - 1].value.toLocaleString())\n  }\n}\n"],"names":["$","document","on","event","preventDefault","link","currentTarget","$modal","concat","dataset","open","html","ajax","type","url","openUrl","success","$html","foundation","error","request","status","_error","_regeneratorRuntime","e","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","gen","reject","_next","_throw","key","info","_defineProperties","target","props","descriptor","input","hint","prim","toPrimitive","undefined","res","String","Number","_toPrimitive","AutoComplete","el","_this","options","arguments","instance","Constructor","_classCallCheck","this","element","stickySelectedSpan","clearStickySelectionSpan","stickyHiddenInput","promptDiv","fn","_src","thresholdTemp","threshold","assign","placeholder","mode","searchPrompt","searchPromptText","selected","maxResults","dataMatchKeys","dataSource","dataFilter","delay","modifyResult","autocomplete","AutoCompleteJS","selector","placeHolder","debounce","data","src","_callee","query","fetchResults","_context","t0","self","args","apply","err","_x","filter","list","resultsList","resultItem","item","events","blur","style","display","acWrapper","closest","ac","stopPropagation","addEventListener","createPromptDiv","createStickySelect","createMultiSelect","protoProps","staticProps","setInput","detail","selection","handleStickyEvents","handleMultiEvents","addMultiSelectItem","addStickySelectItem","removeStickySelection","includes","test","hiddenInput","createElement","prepend","innerHTML","_this2","chosen","classList","add","clearSelection","setAttribute","evt","querySelector","remove","parentElement","appendChild","multiSelectWrapper","inputContainer","insertBefore","createHiddenInput","_this3","focus","className","_this4","DataPicker","pickers","modal","_createModalContainer","appendTo","current","each","_index","picker","activate","$picker","_setCurrentPicker","multiple","_index2","div","hasClass","isMultiPicker","_targetFromEvent","_openPicker","tagName","_removeValue","parentNode","autosort","_sort","toggleClass","attr","map","$link","val","text","get","savedData","_choose","interactive","modify","_load","$target","find","resp","modalContent","_handleLinks","_handleCheckboxes","content","_this5","click","chooseUrl","_this6","checkbox","$checkbox","checked","_targetFromValue","change","close","opts","dataText","_escape","choosenOption","$input","trigger","_removeErrors","_close","children","sort","item1","item2","detach","_this7","fadeoutTime","navigator","webdriver","fadeOut","parent","removeClass","str","replace","_char","charCodeAt","formDatePicker","node","language","initialDate","pickTime","languageProps","fdatepicker","dates","format","disableDblClickSelection","leftArrow","rightArrow","delayed","context","func","wait","timeout","_len","Array","_key","clearTimeout","setTimeout","Reflect","CheckBoxesTree","checkboxesTree","querySelectorAll","globalChecks","global","checkGlobalCheck","checkTheCheckBoxes","checkTheCheckParent","checkboxes","index","theForm","idx","elem","disabled","targetChecks","checkStatus","indeterminate","checksContext","totalInputs","checkedInputs","indeterminateInputs","from","subfilters","nextElementSibling","contains","checkBoxContext","parents","parentCheck","totalCheckSiblings","checkedSiblings","indeterminateSiblings","sibling","FormFilterComponent","$form","id","_getUID","mounted","changeEvents","theCheckBoxesTree","theDataPicker","window","_updateInitialState","_onFormChange","bind","_onFormSubmit","_onPopState","Decidim","PopStateHandler","popStateSubmiter","off","unregisterCallback","queue","contentContainer","currentFormRequest","abort","originalEvent","addClass","setContainerForm","registerCallback","currentState","_this$_currentStateAn2","_slicedToArray","_currentStateAndPath","initialPath","initialState","_path","replaceState","withHost","state","path","location","pathname","search","hash","origin","regexpResult","decodeURIComponent","_getLocation","match","reduce","acc","result","_result$match2","array","order","clear","_clearForm","filterParams","_parseLocationFilterValues","currentOrder","_parseLocationOrderValue","fieldName","isArray","updateChecked","pickerState","load","Rails","fire","ev","eventDetail","_this$_currentStateAn6","newPath","newState","pushState","_saveFilters","formAction","params","serialize","indexOf","save","Date","getUTCMilliseconds","Math","floor","random","pathWithQueryStrings","sessionStorage","pathName","setItem","JSON","stringify","jQuery","lb","days","daysShort","daysMin","months","monthsShort","today","$hashtagContainer","nodatafound","noMatchTemplate","cursor","__quill","getText","tribute","Tribute","cb","post","response","hashtags","fail","always","$parent","removeAttr","remoteSearch","positionMenu","menuContainer","fillAttr","lookup","selectTemplate","range","isContentEditable","quill","insertText","original","Quill","sources","API","position","getLength","setSelection","menuItemTemplate","$qlEditor","attach","isActive","$mentionContainer","callback","users","allowSpaces","menuItemLimit","selectClass","nickname","svg","__typename","iconsPath","config","membersCount","avatarUrl","setupEvents","$element","menu","body","getDocument","sessionTimeOutEnabled","$timeoutModal","timeoutInSeconds","parseInt","secondsUntilTimeoutPath","heartbeatPath","interval","preventTimeOutSeconds","endsAt","dayjs","lastAction","$continueSessionButton","lastActivityCheck","preventTimeOutUntil","css","setTimer","secondsUntilExpiration","heartbeat","contentType","exitInterval","setInterval","seconds","timeSinceLastActivityCheckInSeconds","round","headers","secondsUntilSessionExpires","seconds_remaining","mousemove","scroll","keypress","ajaxComplete","_event","_xhr","settings","clearInterval","enableSessionTimeout","disableSessionTimeout","UTCDate","UTC","Datepicker","that","autoShow","closeButton","split","isRTL","rtl","DPGlobal","parseFormat","formatText","isInline","isInput","is","component","hasInput","onRender","linkField","linkFormat","minuteStep","pickerPosition","faCSSprefix","closeIcon","minView","convertViewMode","maxView","modes","startViewMode","startView","viewMode","forceParse","template","proxy","mousedown","show","hide","siblings","append","autoclose","keyboardNavigation","todayBtn","todayHighlight","calendarWeeks","weekStart","weekEnd","startDate","Infinity","endDate","daysOfWeekDisabled","datesDisabled","setStartDate","setEndDate","setDaysOfWeekDisabled","setDatesDisabled","date","viewDate","parseDate","setValue","fillDow","fillMonths","update","showMode","_attachEvents","_events","_detachEvents","keyup","keydown","dblclick","height","outerHeight","place","datepicker","getDate","getUTCDate","getTime","getTimezoneOffset","setDate","setUTCDate","formatted","getFormattedDate","formatDate","updateNavArrows","valueOf","zIndexes","zIndex","b","textbox","offset","width","outerWidth","fullOffsetTop","top","offsetLeft","left","canShowTop","scrollTop","canShowBottom","fromArgs","currentVal","fill","dowCnt","cell","year","getUTCFullYear","month","getUTCMonth","dayMonth","hours","getUTCHours","minutes","getUTCMinutes","startYear","startMonth","endYear","endMonth","currentDate","titleFormat","en","toggle","prevMonth","day","getDaysInMonth","getUTCDay","nextMonth","clsName","getDay","getFullYear","calWeek","getMonth","inArray","empty","join","actual","currentYear","end","eq","yearCont","hour","visibility","nodeName","toLowerCase","dir","navStep","moveHour","moveDate","moveMonth","moveYear","getHours","getMinutes","getSeconds","_setDate","getUTCSeconds","setUTCMonth","setUTCFullYear","substr","oldViewMode","which","new_date","setUTCHours","new_month","mag","abs","dateWithinRange","keyCode","newDate","newViewDate","dateChanged","ctrlKey","shiftKey","newViewMode","max","min","changeViewDate","option","shift","_data","$this","extend","defaults","_toConsumableArray","navFnc","isLeapYear","validParts","nonpunctuation","separators","parts","part_re","part","exec","Datetimepicker","filtered","parsed","setters_order","setters_map","hh","ii","setUTCMinutes","ss","setUTCSeconds","yyyy","yy","m","_d","M","MM","mm","dd","cnt","toString","substring","seps","headTemplate","contTemplate","footTemplate","code","exports","require","module","_TributeEvents","_interopRequireDefault","_TributeMenuEvents","_TributeRange","_TributeSearch","obj","__esModule","arr","_arrayWithHoles","_arr","_n","_e","_s","_i","_iterableToArrayLimit","_nonIterableRest","_default","_ref","_ref$values","_ref$iframe","iframe","_ref$selectClass","_ref$trigger","_ref$autocompleteMode","autocompleteMode","_ref$selectTemplate","_ref$menuItemTemplate","_ref$lookup","_ref$fillAttr","_ref$collection","collection","_ref$menuContainer","_ref$noMatchTemplate","_ref$requireLeadingSp","requireLeadingSpace","_ref$allowSpaces","_ref$replaceTextSuffi","replaceTextSuffix","_ref$positionMenu","_ref$spaceSelectsMatc","spaceSelectsMatch","_ref$searchOpts","searchOpts","_ref$menuItemLimit","menuSelected","inputEvent","hasTrailingSpace","defaultSelectTemplate","defaultMenuItemTemplate","console","warn","matchItem","string","NodeList","HTMLCollection","_attach","hasAttribute","ensureEditable","inputTypes","contentEditable","wrapper","ul","scrollTo","mentionText","currentMentionTextSnapshot","createMenu","tributeMenu","menuEvents","processValues","items","pre","skip","extract","filteredItems","positionMenuAtCaret","noMatchEvent","CustomEvent","dispatchEvent","hideMenu","fragment","createDocumentFragment","li","_this2$_findLiTarget2","_findLiTarget","movementY","setActiveLi","getAttribute","collectionIndex","activeElement","placeCaretAtEnd","externalTrigger","insertTextAtCursor","insertAtCaret","showMenuFor","getSelection","createRange","selectNodeContents","collapse","sel","removeAllRanges","addRange","createTextRange","textRange","moveToElementText","select","getRangeAt","deleteContents","textNode","createTextNode","insertNode","textarea","scrollPos","caretPos","selectionStart","front","back","selectionEnd","cssText","replaceText","replaceTriggerText","newValues","_append","_detach","unbind","removeAttribute","TributeEvents","boundKeydown","boundKeyup","boundInput","removeEventListener","shouldDeactivate","commandEvent","callbacks","getElementsByClassName","selectItemAtIndex","updateSelection","triggerChar","getKeyCode","triggers","eventKeyPressed","getTriggerInfo","mentionTriggerChar","selectedPath","mentionSelectedPath","selectedOffset","mentionSelectedOffset","collectionItem","enter","escape","tab","space","up","count","scrollHeight","down","lis","liClientRect","getBoundingClientRect","menuClientRect","bottom","scrollDistance","_scrollDistance","includeMargin","currentStyle","getComputedStyle","parseFloat","marginTop","marginBottom","TributeMenuEvents","menuClickEvent","menuContainerScrollEvent","windowResizeEvent","immediate","_arguments","callNow","TributeRange","contentWindow","coordinates","getContentEditableCaretPosition","mentionPosition","getTextAreaOrInputUnderlinePosition","right","scrollIntoView","menuDimensions","offsetWidth","offsetHeight","menuIsOffScreen","isMenuOffScreen","menuIsOffScreenHorizontally","innerWidth","menuIsOffScreenVertically","innerHeight","targetElement","childNodes","nextSibling","previousSibling","getWindowSelection","setStart","setEnd","replaceEvent","pasteHtml","myField","textSuffix","startPos","endPos","anchorNode","lastNode","frag","firstChild","cloneRange","setStartAfter","ctx","ce","getNodePositionInParent","startOffset","selectedElem","workingNodeContent","textContent","selectStartOffset","textComponent","wordsArray","trim","menuAlreadyActive","isAutocomplete","selectionInfo","getContentEditableSelectedPath","effectiveRange","getTextPrecedingCurrentSelection","lastWordOfEffectiveRange","getLastWordInText","mentionSelectedElement","mostRecentTriggerCharPos","lastIndexWithLeadingSpace","lastIndexOf","currentTriggerSnippet","firstSnippetChar","leadingSpace","regex","reversedStr","cidx","len","firstChar","windowWidth","windowHeight","doc","documentElement","windowLeft","pageXOffset","scrollLeft","clientLeft","windowTop","pageYOffset","clientTop","menuTop","menuRight","menuBottom","menuLeft","ceil","dimensions","flipped","isFirefox","mozInnerScreenX","computed","whiteSpace","wordWrap","prop","overflowY","overflow","span","rect","menuContainerIsBody","offsetTop","borderTopWidth","fontSize","borderLeftWidth","getMenuDimensions","parentHeight","scrollStillAvailable","removeChild","selectedNodePosition","markerEl","markerId","prevRange","clientRect","elemTop","elemBottom","maxY","targetY","TributeSearch","pattern","compareString","caseSensitive","rendered","score","patternCache","traverse","render","cache","stringIndex","patternIndex","calculateScore","best","temp","indices","compare","predicate","thisArg","bubbles","cancelable","createEvent","initCustomEvent","Event","metricsQuery","metrics","metricsData","metricsContainer","metricsParams","downloadMetricData","metricName","csvContent","metricData","encodeURI","container","onclick","isEmptyObject","names","spaceType","spaceId","history","isoParse","x","ascending","parseData","title","objectName","showAxis","axis","ratio","showTooltip","tip","agg","margin","titlePadding","scaleTime","scaleLinear","_area","area","y0","y1","valueline","line","domain","extent","nice","circle","tooltip","x0","invert","mouse","bisector","d0","d1","coords","tooltipContent","timeFormat","toLocaleString","xAxis","axisBottom","ticks","timeMonth","tickFormat","tickSize","yAxis","axisLeft","selectAll","_g","titleLines","fulltext","wrapwidth","word","words","_line","lineNumber","_y","tspan","getComputedTextLength","areachart","_objectSpread","object","errors","log","message","statusText"],"sourceRoot":""}