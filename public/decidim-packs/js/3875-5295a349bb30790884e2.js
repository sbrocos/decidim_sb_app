/*! For license information please see 3875-5295a349bb30790884e2.js.LICENSE.txt */
(self.webpackChunkdecidim_sb_app=self.webpackChunkdecidim_sb_app||[]).push([[3875],{23191:function(){$((function(){$(document).on("click","a[data-open-url],button[data-open-url]",(function(t){t.preventDefault();var e=t.currentTarget,n=$("#".concat(e.dataset.open));n.html("<div class='loading-spinner'></div>"),$.ajax({type:"get",url:e.dataset.openUrl,success:function(t){var e=$(t);n.html(e),e.foundation()},error:function(t,e,i){n.html("<h3>".concat(e,"</h3><p>").concat(i,"</p>"))}})}))}))},32616:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var i=n(53957),r=n.n(i);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function o(){o=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,n){return t[e]=n}}function d(t,e,n,i){var a=e&&e.prototype instanceof b?e:b,o=Object.create(a.prototype),s=new L(i||[]);return r(o,"_invoke",{value:E(t,n,s)}),o}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var p="suspendedStart",m="suspendedYield",v="executing",g="completed",y={};function b(){}function k(){}function w(){}var T={};h(T,c,(function(){return this}));var S=Object.getPrototypeOf,C=S&&S(S(O([])));C&&C!==n&&i.call(C,c)&&(T=C);var D=w.prototype=b.prototype=Object.create(T);function x(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function M(t,e){function n(r,o,s,c){var l=f(t[r],t,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==a(h)&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(h).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,c)}))}c(l.arg)}var o;r(this,"_invoke",{value:function(t,i){function r(){return new e((function(e,r){n(t,i,e,r)}))}return o=o?o.then(r,r):r()}})}function E(e,n,i){var r=p;return function(a,o){if(r===v)throw new Error("Generator is already running");if(r===g){if("throw"===a)throw o;return{value:t,done:!0}}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var c=_(s,i);if(c){if(c===y)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===p)throw r=g,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=v;var l=f(e,n,i);if("normal"===l.type){if(r=i.done?g:m,l.arg===y)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(r=g,i.method="throw",i.arg=l.arg)}}}function _(e,n){var i=n.method,r=e.iterator[i];if(r===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,_(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var a=f(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function U(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function O(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(a(e)+" is not iterable")}return k.prototype=w,r(D,"constructor",{value:w,configurable:!0}),r(w,"constructor",{value:k,configurable:!0}),k.displayName=h(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,h(t,u,"GeneratorFunction")),t.prototype=Object.create(D),t},e.awrap=function(t){return{__await:t}},x(M.prototype),h(M.prototype,l,(function(){return this})),e.AsyncIterator=M,e.async=function(t,n,i,r,a){void 0===a&&(a=Promise);var o=new M(d(t,n,i,r),a);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},x(D),h(D,u,"Generator"),h(D,c,(function(){return this})),h(D,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=O,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(U),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return s.type="throw",s.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),U(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;U(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:O(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function s(t,e,n,i,r,a,o){try{var s=t[a](o),c=s.value}catch(l){return void n(l)}s.done?e(c):Promise.resolve(c).then(i,r)}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===a(o)?o:String(o)),i)}var r,o}var l=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.stickySelectedSpan=null,this.clearStickySelectionSpan=null,this.stickyHiddenInput=null,this.promptDiv=null;var a,c,l=i.threshold||2;this.options=Object.assign({name:null,placeholder:"",mode:null,searchPrompt:!1,searchPromptText:"Type at least ".concat(l," characters to search"),selected:null,threshold:l,maxResults:10,dataMatchKeys:null,dataSource:function(){return[]},dataFilter:null,delay:200,modifyResult:null},i),this.autocomplete=new(r())({selector:function(){return n.element},placeHolder:i.placeholder,debounce:200,threshold:this.options.threshold,data:{keys:this.options.dataMatchKeys,src:(a=o().mark((function t(e){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=function(){return new Promise((function(t){n.options.dataSource(e,t)}))},t.prev=1,t.next=4,i();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})),c=function(){var t=this,e=arguments;return new Promise((function(n,i){var r=a.apply(t,e);function o(t){s(r,n,i,o,c,"next",t)}function c(t){s(r,n,i,o,c,"throw",t)}o(void 0)}))},function(t){return c.apply(this,arguments)}),filter:function(t){return n.options.dataFilter?n.options.dataFilter(t):t}},resultsList:{maxResults:this.options.maxResults},resultItem:{element:function(t,e){n.options.modifyResult&&n.options.modifyResult(t,e.value)}},events:{input:{blur:function(){n.promptDiv.style.display="none"}}}}),this.acWrapper=this.element.closest(".autoComplete_wrapper"),this.element.ac=this.autocomplete;var u=function(t){t.stopPropagation()};switch(this.element.addEventListener("close",u),this.element.addEventListener("open",u),this.createPromptDiv(),this.options.mode){case"sticky":this.createStickySelect(this.options.name);break;case"multi":this.createMultiSelect(this.options.name)}}var e,n,i;return e=t,(n=[{key:"setInput",value:function(t){this.autocomplete.input.value=t}},{key:"handleEvent",value:function(t){switch(this.options.mode){case"single":this.setInput(t.detail.selection.value[t.detail.selection.key]);break;case"sticky":this.handleStickyEvents(t);break;case"multi":this.handleMultiEvents(t)}}},{key:"handleMultiEvents",value:function(t){"selection"===t.type&&this.addMultiSelectItem(t.detail.selection)}},{key:"handleStickyEvents",value:function(t){switch(t.type){case"selection":this.addStickySelectItem(t.detail.selection);break;case"click":t.target===this.clearStickySelectionSpan&&this.removeStickySelection();break;case"keyup":""!==this.stickyHiddenInput.value&&t.target===this.element&&(["Escape","Backspace","Delete"].includes(t.key)||/^[a-z0-9]$/i.test(t.key))?this.removeStickySelection():this.options.searchPrompt&&(""===this.stickyHiddenInput.value&&this.element.value.length<this.options.threshold?this.promptDiv.style.display="block":this.promptDiv.style.display="none")}}},{key:"createHiddenInput",value:function(t){var e=document.createElement("input");return e.name=this.options.name,e.type="hidden",t&&(e.value=t),this.acWrapper.prepend(e),e}},{key:"removeStickySelection",value:function(){this.stickyHiddenInput.value="",this.element.placeholder=this.options.placeholder,this.clearStickySelectionSpan.style.display="none",this.stickySelectedSpan.style.display="none"}},{key:"addStickySelectItem",value:function(t){this.stickyHiddenInput.value=t.value.value,this.element.placeholder="",this.stickySelectedSpan.innerHTML=t.value[t.key],this.stickySelectedSpan.style.display="block",this.clearStickySelectionSpan.style.display="block",this.setInput("")}},{key:"addMultiSelectItem",value:function(t){var e=this;this.setInput("");var n=document.createElement("span");n.classList.add("label","primary","autocomplete__selected-item","multi"),n.innerHTML=t.value[t.key];var i=document.createElement("span");i.classList.add("clear-multi-selection"),i.innerHTML="&times;",i.setAttribute("data-remove",t.value.value),i.addEventListener("click",(function(n){var i=e.acWrapper.querySelector("input[type='hidden'][value='".concat(t.value.value,"']"));i&&(i.remove(),n.target.parentElement.remove())})),n.appendChild(i);var r=this.acWrapper.querySelector(".multiselect"),a=r.querySelector("span.input-container");r.insertBefore(n,a),this.createHiddenInput(t.value.value)}},{key:"createStickySelect",value:function(){var t=this;this.stickySelectedSpan=document.createElement("span"),this.stickySelectedSpan.classList.add("autocomplete__selected-item","sticky"),this.stickySelectedSpan.style.display="none",this.stickySelectedSpan.addEventListener("click",(function(){return t.element.focus()})),this.stickyHiddenInput=this.createHiddenInput(),this.clearStickySelectionSpan=document.createElement("span"),this.clearStickySelectionSpan.className="clear-sticky-selection",this.clearStickySelectionSpan.innerHTML="&times;",this.clearStickySelectionSpan.style.display="none",this.clearStickySelectionSpan.addEventListener("click",this),this.element.addEventListener("selection",this),this.element.addEventListener("keyup",this),this.acWrapper.insertBefore(this.clearStickySelectionSpan,this.element),this.acWrapper.insertBefore(this.stickySelectedSpan,this.element),this.options.selected&&this.addStickySelectItem(this.options.selected)}},{key:"createMultiSelect",value:function(){var t=this,e=document.createElement("div");e.classList.add("multiselect");var n=document.createElement("span");n.classList.add("input-container"),e.appendChild(n),this.acWrapper.prepend(e),n.appendChild(this.element),this.element.addEventListener("selection",this),e.addEventListener("click",(function(){t.element.focus()})),this.options.selected&&this.options.selected.forEach((function(e){t.addMultiSelectItem(e)}))}},{key:"createPromptDiv",value:function(){this.promptDiv=document.createElement("div"),this.promptDiv.classList.add("search-prompt"),this.promptDiv.style.display="none",this.promptDiv.innerHTML=this.options.searchPromptText,this.acWrapper.appendChild(this.promptDiv)}}])&&c(e.prototype,n),i&&c(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},85201:function(t,e,n){"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(a=r.key,o=void 0,o=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(a,"string"),"symbol"===i(o)?o:String(o)),r)}var a,o}n.d(e,{Z:function(){return a}});var a=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.modal=this._createModalContainer(),this.modal.appendTo($("body")),this.current=null,e.each((function(t,e){n.activate(e)}))}var e,n,i;return e=t,n=[{key:"activate",value:function(t){var e=this,n=$(t);this._setCurrentPicker(n,null);var i=this.current.name,r=this.current.values;this.current.multiple&&(i+="[]"),$("div",r).each((function(t,e){var n=$("a",e).data("picker-value");$(e).prepend($('<input type="'.concat("hidden",'" checked name="').concat(i,'" value="').concat(n,'"/>')))})),n.on("click","a",(function(t){if(t.preventDefault(),!n.hasClass("disabled")){var i=n.hasClass("picker-multiple");$(e._targetFromEvent(t)).hasClass("picker-prompt")||!i?e._openPicker(n,e._targetFromEvent(t)):"A"===e._targetFromEvent(t).tagName?e._removeValue(n,e._targetFromEvent(t).parentNode):e._removeValue(n,e._targetFromEvent(t))}})),n.on("click","input",(function(t){e._removeValue(n,e._targetFromEvent(t))})),this.current.autosort&&this._sort()}},{key:"enabled",value:function(t,e){$(t).toggleClass("disabled",!e),$("input",t).attr("disabled",!e)}},{key:"clear",value:function(t){$(".picker-values",t).html("")}},{key:"save",value:function(t){return $(".picker-values div:has(input:checked)",t).map((function(t,e){var n=$("a",e);return{value:$("input",e).val(),text:n.text(),url:n.attr("href")}})).get()}},{key:"load",value:function(t,e){var n=this;this._setCurrentPicker($(t),null),$.each(e,(function(t,e){n._choose(e,{interactive:!1,modify:!1})})),this.current.autosort&&this._sort()}},{key:"_createModalContainer",value:function(){return $('<div class="small reveal" id="data_picker-modal" aria-hidden="true" aria-live="assertive" role="dialog" aria-labelledby="data_picker-title" data-reveal data-multiple-opened="true">\n             <div class="data_picker-modal-content">'.concat('<div class="scope-picker picker-header"><h6 id="data_picker-title" class="h2"></h6></div>','</div>\n             <button class="close-button" data-close type="button" data-reveal-id="data_picker-modal"><span aria-hidden="true">&times;</span></button>\n             </div>'))}},{key:"_openPicker",value:function(t,e){this._setCurrentPicker(t,e),this._load($("a",e).attr("href"))}},{key:"_setCurrentPicker",value:function(t,e){var n=!1;e&&!$(e).hasClass("picker-prompt")&&(n=$(e)),this.current={picker:t,name:t.data("picker-name"),values:t.find(".picker-values"),multiple:t.hasClass("picker-multiple"),autosort:t.hasClass("picker-multiple")&&t.hasClass("picker-autosort"),target:n}}},{key:"_load",value:function(t){var e=this;$.ajax(t).done((function(t){var n=$(".data_picker-modal-content",e.modal);n.html(t),e._handleLinks(n),e._handleCheckboxes(n),e.modal.foundation("open")}))}},{key:"_handleLinks",value:function(t){var e=this;$("a",t).each((function(t,n){var i=$(n);i.click((function(t){if(t.preventDefault(),!i.data("close")&&""!==i.data("close")){var n=i.attr("href");n&&("undefined"===typeof i.data("picker-choose")?e._load(n):e._choose({url:n,value:i.data("picker-value")||"",text:i.data("picker-text")||""}))}}))}))}},{key:"_handleCheckboxes",value:function(t){var e=this;$("input[type=checkbox][data-picker-choose]",t).each((function(t,n){var i=$(n);n.checked=null!==e._targetFromValue(i.val())})).change((function(t){var n=$(t.target);t.target.checked?e._choose({url:n.data("picker-url"),value:n.val()||"",text:n.data("picker-text")||""},{modify:!1,close:!1}):e._removeValue(e.current.picker,e._targetFromValue(n.val()))}))}},{key:"_choose",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({interactive:!0,modify:!0,close:!0},e),i=this._escape(t.text),r=null;if(!this.current.target&&n.modify&&(this.current.target=this._targetFromValue(t.value)),this.current.target&&n.modify){var a=$("a",this.current.target);a.data("picker-value",t.value),a.attr("href",t.url),r=this.current.target,this.current.multiple?a.html("&times;&nbsp;".concat(i)):a.text(i)}else{var o="hidden",s=this.current.name;this.current.multiple?(s+="[]",r=$('<div><input type="'.concat(o,'" checked name="').concat(s,'"/><a href="').concat(t.url,'" data-picker-value="').concat(t.value,'" class="label primary">&times;&nbsp;').concat(i,"</a></div>"))):r=$('<div><input type="'.concat(o,'" checked name="').concat(s,'"/><a href="').concat(t.url,'" data-picker-value="').concat(t.value,'">').concat(i,"</a></div>")),r.appendTo(this.current.values),this.current.target||(this.current.target=r)}var c=$("input",r);c.attr("value",t.value),this.current.autosort&&this._sort(),n.interactive&&(c.trigger("change"),this._removeErrors(),n.close&&this._close())}},{key:"_sort",value:function(){var t=$(".picker-values",this.current.picker);t.children().sort((function(t,e){return $("input",t).val()-$("input",e).val()})).detach().appendTo(t)}},{key:"_close",value:function(){this.modal.foundation("close"),this.current.target=null}},{key:"_removeValue",value:function(t,e){var n=this;if(e){this._setCurrentPicker(t,e);var i=500;navigator&&navigator.webdriver&&(i=0),this.current.target.fadeOut(i,(function(){n.current.target.remove(),n.current.target=null}))}}},{key:"_removeErrors",value:function(){var t=this.current.picker.parent();$(".is-invalid-input",t).removeClass("is-invalid-input"),$(".is-invalid-label",t).removeClass("is-invalid-label"),$(".form-error.is-visible",t).removeClass("is-visible")}},{key:"_escape",value:function(t){return t.replace(/[\u00A0-\u9999<>&]/gim,(function(t){return"&#".concat(t.charCodeAt(0),";")}))}},{key:"_targetFromEvent",value:function(t){return t.target.parentNode}},{key:"_targetFromValue",value:function(t){return $("[data-picker-value=".concat(t,"]"),this.current.picker).parent()[0]||null}}],n&&r(e.prototype,n),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},49205:function(t,e,n){"use strict";function i(){$("[data-datepicker]").each((function(t,e){var n=$("html").attr("lang")||"en",i=$(e).data("startdate")||"",r=""===$(e).data("timepicker"),a=$(e).fdatepicker.dates[n]&&$(e).fdatepicker.dates[n].format,o=$(e).data("date-format")||a||"mm/dd/yyyy";$(e).fdatepicker({format:o,initialDate:i,language:n,pickTime:r,disableDblClickSelection:!0,leftArrow:"<<",rightArrow:">>"})}))}n.d(e,{Z:function(){return i}})},93084:function(t,e,n){"use strict";function i(t,e,n){var i=null;return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];i&&clearTimeout(i),i=setTimeout((function(){i=null,Reflect.apply(e,t,a)}),n)}}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,o=void 0,o=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(a,"string"),"symbol"===r(o)?o:String(o)),i)}var a,o}n.d(e,{Z:function(){return p}});var o=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.checkboxesTree=document.querySelectorAll("[data-checkboxes-tree]"),this.checkboxesTree&&(this.globalChecks=document.querySelectorAll("[data-global-checkbox] input"),this.globalChecks.forEach((function(t){""===t.value&&t.classList.add("ignore-filter")})),this.checkGlobalCheck(),this.checkboxesTree.forEach((function(t){return t.addEventListener("click",(function(t){return e.checkTheCheckBoxes(t.target)}))})),document.querySelectorAll("[data-children-checkbox] input").forEach((function(t){t.addEventListener("change",(function(t){return e.checkTheCheckParent(t.target)}))})),document.querySelectorAll("[data-children-checkbox] input").forEach((function(t){e.checkTheCheckParent(t)})))}var e,n,i;return e=t,(n=[{key:"updateChecked",value:function(t,e){var n=this;t.each((function(t,i){(""===i.value&&1===e.length||""!==i.value&&e.includes(i.value))&&(i.checked=!0,n.checkTheCheckBoxes(i),n.checkTheCheckParent(i))}))}},{key:"setContainerForm",value:function(t){t.on("submit ajax:before",(function(){t.find(".ignore-filters input, input.ignore-filter").each((function(t,e){e.disabled=!0}))})),t.on("ajax:send",(function(){t.find(".ignore-filters input, input.ignore-filter").each((function(t,e){e.disabled=!1}))}))}},{key:"checkTheCheckBoxes",value:function(t){var e=t.dataset.checkboxesTree,n=t.checked;document.querySelectorAll("#".concat(e," input[type='checkbox']")).forEach((function(t){t.checked=n,t.indeterminate=!1,t.classList.add("ignore-filter")}))}},{key:"checkGlobalCheck",value:function(){this.globalChecks.forEach((function(t){var e=t.dataset.checkboxesTree,n=document.querySelectorAll("#".concat(e," input[type='checkbox']")),i=document.querySelectorAll("#".concat(e," input[type='checkbox']:checked")),r=Array.from(n).filter((function(t){return t.indeterminate}));0===i.length&&0===r.length?(t.checked=!1,t.indeterminate=!1):i.length===n.length&&0===r.length?(t.checked=!0,t.indeterminate=!1):(t.checked=!0,t.indeterminate=!0),n.forEach((function(e){t.indeterminate&&!e.indeterminate?e.classList.remove("ignore-filter"):e.classList.add("ignore-filter");var n=e.parentNode.parentNode.nextElementSibling;n&&n.classList.contains("filters__subfilters")&&(e.indeterminate?n.classList.remove("ignore-filters"):n.classList.add("ignore-filters"))}))}))}},{key:"checkTheCheckParent",value:function(t){var e=$(t).parents(".filters__subfilters").attr("id");if(e){var n=document.querySelector("[data-checkboxes-tree=".concat(e,"]")),i=document.querySelectorAll("#".concat(e," > div > [data-children-checkbox] > input, #").concat(e," > [data-children-checkbox] > input")),r=document.querySelectorAll("#".concat(e," > div > [data-children-checkbox] > input:checked, #").concat(e," > [data-children-checkbox] > input:checked")),a=Array.from(i).filter((function(t){return t.indeterminate}));0===r.length&&0===a.length?(n.checked=!1,n.indeterminate=!1):r.length===i.length&&0===a.length?(n.checked=!0,n.indeterminate=!1):(n.checked=!0,n.indeterminate=!0),i.forEach((function(t){parent.indeterminate&&!t.indeterminate?t.classList.remove("ignore-filter"):t.classList.add("ignore-filter");var e=t.parentNode.parentNode.nextElementSibling;e&&e.classList.contains("filters__subfilters")&&(t.indeterminate?e.classList.remove("ignore-filters"):e.classList.add("ignore-filters"))})),this.checkTheCheckParent(n)}else this.checkGlobalCheck()}}])&&a(e.prototype,n),i&&a(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),s=n(3432),c=n(85201);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,a,o,s=[],c=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=a.call(n)).done)&&(s.push(i.value),s.length!==e);c=!0);}catch(t){l=!0,r=t}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw r}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,f(i.key),i)}}function f(t){var e=function(t,e){if("object"!==l(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==l(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===l(e)?e:String(e)}var p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$form=e,this.id=this.$form.attr("id")||this._getUID(),this.mounted=!1,this.changeEvents=!0,this.theCheckBoxesTree=new o,this.theDataPicker=window.theDataPicker||new c.Z($(".data-picker")),this._updateInitialState(),this._onFormChange=i(this,this._onFormChange.bind(this)),this._onFormSubmit=i(this,this._onFormSubmit.bind(this)),this._onPopState=this._onPopState.bind(this),window.Decidim.PopStateHandler?this.popStateSubmiter=!1:(this.popStateSubmiter=!0,window.Decidim.PopStateHandler=this.id)}var e,n,r;return e=t,n=[{key:"unmountComponent",value:function(){this.mounted&&(this.mounted=!1,this.$form.off("change","input, select",this._onFormChange),this.$form.off("submit",this._onFormSubmit),(0,s.AP)("filters-".concat(this.id)))}},{key:"mountComponent",value:function(){var t=this;if(this.$form.length>0&&!this.mounted){this.mounted=!0;var e=0,n=$(this.$form.closest(".filters").parent().find(".skip").attr("href"));0===n.length&&this.$form.data("remoteFill")&&(n=this.$form.data("remoteFill")),this.$form.on("change","input:not([data-disable-dynamic-change]), select:not([data-disable-dynamic-change])",this._onFormChange),this.$form.on("submit",this._onFormSubmit),this.currentFormRequest=null,this.$form.on("ajax:beforeSend",(function(i){t.currentFormRequest&&t.currentFormRequest.abort(),t.currentFormRequest=i.originalEvent.detail[0],(e+=1)>0&&n.length>0&&!n.hasClass("spinner-container")&&n.addClass("spinner-container")})),this.$form.on("ajax:success",(function(){(e-=1)<=0&&n.length>0&&n.removeClass("spinner-container")})),this.$form.on("ajax:error",(function(){(e-=1)<=0&&n.length>0&&n.removeClass("spinner-container"),t.$form.find(".spinner-container").addClass("hide")})),this.theCheckBoxesTree.setContainerForm(this.$form),(0,s.jC)("filters-".concat(this.id),(function(e){t._onPopState(e)}))}}},{key:"_updateInitialState",value:function(){var t=u(this._currentStateAndPath(),2),e=t[0],n=t[1];n._path=e,(0,s.lO)(null,n)}},{key:"_getLocation",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=(0,s.SB)(),n="";return n=e&&e._path?e._path:window.location.pathname+window.location.search+window.location.hash,t?window.location.origin+n:n}},{key:"_parseLocationFilterValues",value:function(){var t=decodeURIComponent(this._getLocation()).match(/filter\[([^\]]*)\](?:\[\])?=([^&]*)/g);return t?t.reduce((function(t,e){var n=u(e.match(/filter\[([^\]]*)\](\[\])?=([^&]*)/),4),i=n[1],r=n[2],a=n[3];return r?(t[i]||(t[i]=[]),t[i].push(a)):t[i]=a,t}),{}):null}},{key:"_parseLocationOrderValue",value:function(){var t=this._getLocation().match(/order=([^&]*)/),e=this.$form.find(".order-by .menu").find(".menu a:first").data("order");return t&&(e=t[1]),e}},{key:"_clearForm",value:function(){var t=this;this.$form.find("input[type=checkbox]").each((function(t,e){e.checked=e.indeterminate=!1})),this.$form.find("input[type=radio]").attr("checked",!1),this.$form.find(".data-picker").each((function(e,n){t.theDataPicker.clear(n)})),this.$form.find("fieldset input[type=radio]:first").each((function(){$(this)[0].checked=!0}))}},{key:"_onPopState",value:function(t){var e=this;this.changeEvents=!1,this._clearForm();var n=this._parseLocationFilterValues(),i=this._parseLocationOrderValue();this.$form.find("input.order_filter").val(i),n&&Object.keys(n).forEach((function(t){var i=n[t];if(Array.isArray(i)){var r=e.$form.find('input[type=checkbox][name="filter['.concat(t,'][]"]'));e.theCheckBoxesTree.updateChecked(r,i)}else e.$form.find('*[name="filter['.concat(t,']"]')).each((function(t,e){switch(e.type){case"hidden":break;case"radio":case"checkbox":e.checked=i===e.value;break;default:e.value=i}}))})),$(".data-picker",this.$form).each((function(n,i){var r=t[i.id];r&&e.theDataPicker.load(i,r)})),this.popStateSubmiter&&Rails.fire(this.$form[0],"submit",{from:"pop"}),this.changeEvents=!0}},{key:"_onFormChange",value:function(){this.changeEvents&&u(this._currentStateAndPath(),1)[0]!==this._getLocation(!1)&&Rails.fire(this.$form[0],"submit")}},{key:"_onFormSubmit",value:function(t){var e=t.originalEvent.detail;if(!e||"pop"!==e.from){var n=u(this._currentStateAndPath(),2),i=n[0],r=n[1];(0,s.qA)(i,r),this._saveFilters(i)}}},{key:"_currentStateAndPath",value:function(){var t=this,e=this.$form.attr("action"),n=this.$form.find(":not(.ignore-filters)").find("select:not(.ignore-filter), input:not(.ignore-filter)").serialize(),i="",r={};return i=e.indexOf("?")<0?"".concat(e,"?").concat(n):"".concat(e,"&").concat(n),$(".data-picker",this.$form).each((function(e,n){r[n.id]=t.theDataPicker.save(n)})),[i,r]}},{key:"_getUID",value:function(){return"filter-form-".concat((new Date).getUTCMilliseconds(),"-").concat(Math.floor(1e7*Math.random()))}},{key:"_saveFilters",value:function(t){if(window.sessionStorage){var e,n,i,r=this.$form.attr("action");sessionStorage.setItem("filteredParams",JSON.stringify((e={},i=t,(n=f(n=r))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e)))}}}],n&&d(e.prototype,n),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()},23746:function(){!function(t){t.fn.fdatepicker.dates.lb={days:["Sonndeg","M\xe9indeg","D\xebnschdeg","M\xebttwoch","Donneschdeg","Freideg","Samschdeg","Sonndeg"],daysShort:["Son","M\xe9i","D\xebn","M\xebt","Don","Fre","Sam","Son"],daysMin:["So","M\xe9","D\xeb","M\xeb","Do","Fr","Sa","So"],months:["Januar","Februar","M\xe4erz","Abr\xebll","Mee","Juni","Juli","August","September","Oktober","November","Dezember"],monthsShort:["Jan","Febr","Mrz","Abr","Mee","Jun","Jul","Aug","Sept","Okt","Nov","Dez"],today:"Haut"}}(jQuery)},16135:function(t,e,n){"use strict";n(96896),n(54498),n(23875),n(39646),n(74097),n(25247),n(61729),n(41802),n(88454),n(57883),n(52668),n(14851),n(82348),n(7386),n(96055),n(5207),n(66418),n(34090),n(63364),n(29476),n(59184),n(42656),n(11623),n(27945),n(66050),n(32766),n(1064),n(83685),n(86462),n(14728),n(22345),n(81090),n(63922),n(13265),n(30269),n(21302),n(11805),n(28322),n(36798),n(57733),n(96025),n(21268),n(34486),n(40705),n(64058),n(54402),n(32016),n(11219),n(95692),n(35426),n(53489),n(47200),n(6348),n(82722),n(70401),n(4808),n(63406),n(25013),n(31092),n(61342),n(42675),n(36341),n(45042),n(29167),n(23746)},70815:function(){$((function(){$(".gallery__container").on("closed.zf.callout",(function(t){$(t.target).remove()}))}))},55174:function(t,e,n){"use strict";var i=n(20653),r=n.n(i);$((function(){var t=$(".js-hashtags"),e=t.attr("data-noresults"),n=null;e&&(n=function(){return"<li>".concat(e,"</li>")});var i="";t.on("quill-position",(function(t){null!==t.detail&&("#"===t.target.__quill.getText(t.detail.index-1,1)&&(i=t.detail.index))}));var a=new(r())({trigger:"#",values:function(t,e){!function(t,e){$.post("/api",{query:'{hashtags(name:"'.concat(t,'") {name}}')}).then((function(t){var n=t.data.hashtags||{};e(n)})).fail((function(){e([])})).always((function(){var t=$(a.current.element).parent();t.addClass("is-active"),t.find(".tribute-container").removeAttr("style")}))}(t,(function(t){return e(t)}))},positionMenu:!0,menuContainer:null,fillAttr:"name",noMatchTemplate:n,lookup:function(t){return t.name},selectTemplate:function(t){if("undefined"===typeof t)return null;if(this.range.isContentEditable(this.current.element)){if($(this.current.element).hasClass("ql-editor")){var e=$(this.current.element).parent().get(0).__quill;e.insertText(i-1,"#".concat(t.original.name," "),Quill.sources.API);var n=i+t.original.name.length+2,r=0;return r=e.getLength()>n?n:e.getLength()-1,setTimeout((function(){e.setSelection(r,0)}),500),""}return'<span contenteditable="false">#'.concat(t.original.name,"</span>")}return"#".concat(t.original.name)},menuItemTemplate:function(t){return"<strong>".concat(t.original.name,"</strong>")}});setTimeout((function(){t.each((function(t,e){var n=$(".ql-editor",e);n.length>0?a.attach(n):a.attach(e)}))}),1e3),t.on("focusin",(function(t){a.menuContainer=t.target.parentNode})),t.on("focusout",(function(t){var e=$(t.target).parent();e.hasClass("is-active")&&e.removeClass("is-active")})),t.on("input",(function(t){var e=$(t.target).parent();a.isActive?($(".tribute-container").appendTo(e),e.addClass("is-active")):e.removeClass("is-active")}))}))},19421:function(t,e,n){"use strict";var i=n(20653),r=n.n(i);$((function(){var t=$(".js-mentions"),e=t.attr("data-noresults"),n=null;e&&(n=function(){return"<li>".concat(e,"</li>")});var i="";t.on("quill-position",(function(t){null!==t.detail&&("@"===t.target.__quill.getText(t.detail.index-1,1)&&(i=t.detail.index))}));var a=new(r())({trigger:"@",values:function(t,e){var n=this,i=null;return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var s=n;clearTimeout(i),i=setTimeout((function(){return t.apply(s,a)}),e)}}((function(t,e){!function(t,e){var n='{users(filter:{wildcard:"'.concat(t,'"}){nickname,name,avatarUrl,__typename,...on UserGroup{membersCount}}}');$.post("/api",{query:n}).then((function(t){var n=t.data.users||{};e(n)})).fail((function(){e([])})).always((function(){var t=$(a.current.element).parent();t.addClass("is-active"),t.find(".tribute-container").removeAttr("style")}))}(t,(function(t){return e(t)}))}),250),positionMenu:!0,menuContainer:null,allowSpaces:!0,menuItemLimit:5,fillAttr:"nickname",selectClass:"highlight",noMatchTemplate:n,lookup:function(t){return t.nickname+t.name},selectTemplate:function(t){if("undefined"===typeof t)return null;if(this.range.isContentEditable(this.current.element)){if($(this.current.element).hasClass("ql-editor")){var e=$(this.current.element).parent().get(0).__quill;e.insertText(i-1,"".concat(t.original.nickname," "),Quill.sources.API);var n=i+t.original.nickname.length+2,r=0;return r=e.getLength()>n?n:e.getLength()-1,setTimeout((function(){e.setSelection(r,0)}),500),""}return'<span contenteditable="false">'.concat(t.original.nickname,"</span>")}return t.original.nickname},menuItemTemplate:function(t){var e="";if(window.Decidim&&"UserGroup"===t.original.__typename){var n=window.Decidim.config.get("icons_path");e='<span class="is-group">'.concat(t.original.membersCount,'x <svg class="icon--members icon"><use href="').concat(n,'#icon-members"/></svg></span>')}return'<div class="tribute-item '.concat(t.original.__typename,'">\n      <span class="author__avatar"><img src="').concat(t.original.avatarUrl,'" alt="author-avatar"></span>\n        <strong>').concat(t.original.nickname,"</strong>\n        <small>").concat(t.original.name,"</small>\n        ").concat(e,"\n      </div>")}}),o=function(t){t.on("focusin",(function(t){a.menuContainer=t.target.parentNode})),t.on("focusout",(function(t){var e=$(t.target).parent();e.hasClass("is-active")&&e.removeClass("is-active")})),t.on("input",(function(t){var e=$(t.target).parent();a.isActive?($(".tribute-container").appendTo(e),e.addClass("is-active")):e.removeClass("is-active")}))};o(t),$(document).on("attach-mentions-element",(function(t,e){e&&(a.attach(e),a.menu&&!document.body.contains(a.menu)&&a.range.getDocument().body.appendChild(a.menu),o($(e)))})),setTimeout((function(){t.each((function(t,e){var n=$(".ql-editor",e);n.length>0?a.attach(n):a.attach(e)}))}),1e3)}))},93320:function(t,e,n){"use strict";var i=n(27484),r=n.n(i);$((function(){var t=!0,e=$("#timeoutModal"),n=parseInt(e.data("session-timeout"),10),i=e.data("seconds-until-timeout-path"),a=e.data("heartbeat-path"),o=parseInt(e.data("session-timeout-interval"),10),s=e.data("prevent-timeout-seconds"),c=r()().add(n,"seconds"),l=r()(),u=$("#continueSession"),h=r()(),d=r()().add(s,"seconds");if(u.on("click",(function(){e.foundation("close"),$(".reveal-overlay").css("display","none"),h=r()()})),!isNaN(o)&&n){var f=function(t){t&&(c=r()().add(t,"seconds"))},p=function(){return $.ajax({method:"POST",url:a,contentType:"application/javascript"})},m=setInterval((function(){var n,a=Math.round((r()()-h)/1e3);!("block"===$("#timeoutModal").parent().css("display"))&&a>=300&&(h=r()(),n=300,(r()()-l)/1e3<n)?p():Math.round((c-r()())/1e3)>170||(r()()<d?p():$.ajax({method:"GET",url:i,contentType:"application/json",headers:{"X-CSRF-Token":$("meta[name=csrf-token]").attr("content")}}).then((function(n){var i=n.seconds_remaining;f(i),t?i<=90?e.find("#reveal-hidden-sign-out")[0].click():i<=150&&e.foundation("open"):p()})))}),o);$(document).mousemove((function(){l=r()()})),$(document).scroll((function(){l=r()()})),$(document).keypress((function(){l=r()()})),$(document).on("ajax:complete",(function(){f(n)})),$(document).ajaxComplete((function(t,e,r){r&&r.url===i||f(n)})),window.addEventListener("beforeunload",(function(){clearInterval(m)})),window.Decidim.enableSessionTimeout=function(){t=!0},window.Decidim.disableSessionTimeout=function(){t=!1}}}))},41397:function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"===typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}!function(e){function i(){return new Date(Date.UTC.apply(Date,arguments))}var r=function(t,n){var i=this;this.element=e(t),this.autoShow=void 0==n.autoShow||n.autoShow,this.appendTo=n.appendTo||"body",this.closeButton=n.closeButton,this.language=n.language||this.element.data("date-language")||"en",this.language=this.language in a?this.language:this.language.split("-")[0],this.language=this.language in a?this.language:"en",this.isRTL=a[this.language].rtl||!1,this.format=o.parseFormat(n.format||this.element.data("date-format")||a[this.language].format||"mm/dd/yyyy"),this.formatText=n.format||this.element.data("date-format")||a[this.language].format||"mm/dd/yyyy",this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".prefix, .postfix"),this.hasInput=this.component&&this.element.find("input").length,this.disableDblClickSelection=n.disableDblClickSelection,this.onRender=n.onRender||function(){},this.component&&0===this.component.length&&(this.component=!1),this.linkField=n.linkField||this.element.data("link-field")||!1,this.linkFormat=o.parseFormat(n.linkFormat||this.element.data("link-format")||"yyyy-mm-dd hh:ii:ss"),this.minuteStep=n.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=n.pickerPosition||this.element.data("picker-position")||"bottom-right",this.initialDate=n.initialDate||null,this.faCSSprefix=n.faCSSprefix||"fa",this.leftArrow=n.leftArrow||'<i class="'.concat(this.faCSSprefix," ").concat(this.faCSSprefix,'-chevron-left fi-arrow-left"/>'),this.rightArrow=n.rightArrow||'<i class="'.concat(this.faCSSprefix," ").concat(this.faCSSprefix,'-chevron-right fi-arrow-right"/>'),this.closeIcon=n.closeIcon||'<i class="'.concat(this.faCSSprefix," ").concat(this.faCSSprefix,"-remove ").concat(this.faCSSprefix,'-times fi-x"></i>'),this.minView=0,"minView"in n?this.minView=n.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=o.convertViewMode(this.minView),this.maxView=o.modes.length-1,"maxView"in n?this.maxView=n.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=o.convertViewMode(this.maxView),this.startViewMode="month","startView"in n?this.startViewMode=n.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=o.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,"minView"in n||"maxView"in n||this.element.data("min-view")||this.element.data("max-view")||(this.pickTime=!1,"pickTime"in n&&(this.pickTime=n.pickTime),1==this.pickTime?(this.minView=0,this.maxView=4):(this.minView=2,this.maxView=4)),this.forceParse=!0,"forceParse"in n?this.forceParse=n.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse")),this.picker=e(o.template(this.leftArrow,this.rightArrow,this.closeIcon)).appendTo(this.isInline?this.element:this.appendTo).on({click:e.proxy(this.click,this),mousedown:e.proxy(this.mousedown,this)}),this.closeButton?this.picker.find("a.datepicker-close").show():this.picker.find("a.datepicker-close").hide(),this.isInline?this.picker.addClass("datepicker-inline"):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.isRTL&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".date-switch").each((function(){e(this).parent().prepend(e(this).siblings(".next")),e(this).parent().append(e(this).siblings(".prev"))})),this.picker.find(".prev, .next").toggleClass("prev next")),e(document).on("mousedown",(function(t){i.isInput&&t.target===i.element[0]||0===e(t.target).closest(".datepicker.datepicker-inline, .datepicker.datepicker-dropdown").length&&i.hide()})),this.autoclose=!0,"autoclose"in n?this.autoclose=n.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in n?this.keyboardNavigation=n.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=n.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=n.todayHighlight||this.element.data("date-today-highlight")||!1,this.calendarWeeks=!1,"calendarWeeks"in n?this.calendarWeeks=n.calendarWeeks:"dateCalendarWeeks"in this.element.data()&&(this.calendarWeeks=this.element.data("date-calendar-weeks")),this.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",(function(t,e){return parseInt(e)+1})),this.weekStart=(n.weekStart||this.element.data("date-weekstart")||a[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-1/0,this.endDate=1/0,this.daysOfWeekDisabled=[],this.datesDisabled=[],this.setStartDate(n.startDate||this.element.data("date-startdate")),this.setEndDate(n.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(n.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.setDatesDisabled(n.datesDisabled||this.element.data("dates-disabled")),null!=this.initialDate&&(this.date=this.viewDate=o.parseDate(this.initialDate,this.format,this.language),this.setValue()),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show(),this._attachEvents()};r.prototype={constructor:r,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this.keyboardNavigation?this._events=[[this.element,{focus:this.autoShow?e.proxy(this.show,this):function(){},keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this),click:this.element.attr("readonly")?e.proxy(this.show,this):function(){}}]]:this._events=[[this.element,{focus:this.autoShow?e.proxy(this.show,this):function(){}}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:this.autoShow?e.proxy(this.show,this):function(){},keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this.disableDblClickSelection&&(this._events[this._events.length]=[this.element,{dblclick:function(t){t.preventDefault(),t.stopPropagation(),e(this).blur()}}]);for(var t,n,i=0;i<this._events.length;i++)t=this._events[i][0],n=this._events[i][1],t.on(n)},_detachEvents:function(){for(var t,e,n=0;n<this._events.length;n++)t=this._events[n][0],e=this._events[n][1],t.off(e);this._events=[]},show:function(t){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.update(),this.place(),e(window).on("resize",e.proxy(this.place,this)),t&&(t.stopPropagation(),t.preventDefault()),this.element.trigger({type:"show",date:this.date})},hide:function(t){this.isInline||this.picker.is(":visible")&&(this.picker.hide(),e(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||e(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.element.trigger({type:"hide",date:this.date}))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.element.data().datepicker},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){this.date=t,this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):(this.component&&this.element.find("input").val(t),this.element.data("date",t))},getFormattedDate:function(t){return void 0===t&&(t=this.format),o.formatDate(this.date,t,this.language)},setStartDate:function(t){this.startDate=t||-1/0,this.startDate!==-1/0&&(this.startDate=o.parseDate(this.startDate,this.format,this.language)),this.update(),this.updateNavArrows()},setEndDate:function(t){this.endDate=t||1/0,this.endDate!==1/0&&(this.endDate=o.parseDate(this.endDate,this.format,this.language)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this.daysOfWeekDisabled=t||[],e.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=e.map(this.daysOfWeekDisabled,(function(t){return parseInt(t,10)})),this.update(),this.updateNavArrows()},setDatesDisabled:function(t){this.datesDisabled=t||[],e.isArray(this.datesDisabled)||(this.datesDisabled=this.datesDisabled.split(/,\s*/)),this.datesDisabled=e.map(this.datesDisabled,(function(t){return o.parseDate(t,this.format,this.language).valueOf()})),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var t=[];this.element.parents().map((function(){"auto"!=e(this).css("z-index")&&t.push(parseInt(e(this).css("z-index")))}));var n=t.sort((function(t,e){return t-e})).pop()+10,i=this.component?this.component:this.element,r=i.offset(),a=i.outerHeight()+parseInt(i.css("margin-top")),o=i.outerWidth()+parseInt(i.css("margin-left")),s=r.top+a,c=r.left;this.picker.removeClass("datepicker-top datepicker-bottom");var l=e(window).scrollTop()<r.top-this.picker.outerHeight(),u=s+this.picker.outerHeight()<e(window).scrollTop()+e(window).height();!u&&l?(s=r.top-this.picker.outerHeight(),this.picker.addClass("datepicker-top")):(u||e(window).scrollTop(r.top),this.picker.addClass("datepicker-bottom")),r.left+this.picker.width()>=e(window).width()&&(c=r.left+o-this.picker.width()),this.picker.css({top:s,left:c,zIndex:n})}},update:function(){var t,e=!1,n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();arguments&&arguments.length&&("string"===typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],e=!0):t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),this.date=o.parseDate(t,this.format,this.language),e?this.setValue():""==n&&this.element.trigger({type:"changeDate",date:null}),this.date<this.startDate?this.viewDate=new Date(this.startDate.valueOf()):this.date>this.endDate?this.viewDate=new Date(this.endDate.valueOf()):this.viewDate=new Date(this.date.valueOf()),this.fill()},fillDow:function(){var t=this.weekStart,e="<tr>";if(this.calendarWeeks){var n='<th class="cw">&nbsp;</th>';e+=n,this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}for(;t<this.weekStart+7;)e+='<th class="dow">'.concat(a[this.language].daysMin[t++%7],"</th>");e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;e<12;)t+='<span class="month">'.concat(a[this.language].monthsShort[e++],"</span>");this.picker.find(".datepicker-months td").html(t)},fill:function(){if(null!=this.date&&null!=this.viewDate){var t=new Date(this.viewDate.valueOf()),n=t.getUTCFullYear(),r=t.getUTCMonth(),s=t.getUTCDate(),c=t.getUTCHours(),l=t.getUTCMinutes(),u=this.startDate!==-1/0?this.startDate.getUTCFullYear():-1/0,h=this.startDate!==-1/0?this.startDate.getUTCMonth():-1/0,d=this.endDate!==1/0?this.endDate.getUTCFullYear():1/0,f=this.endDate!==1/0?this.endDate.getUTCMonth():1/0,p=this.date&&i(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),m=new Date;a[this.language].titleFormat||a.en.titleFormat;this.picker.find(".datepicker-days thead th:eq(1)").text("".concat(a[this.language].months[r]," ").concat(n)),this.picker.find(".datepicker-hours thead th:eq(1)").text("".concat(s," ").concat(a[this.language].months[r]," ").concat(n)),this.picker.find(".datepicker-minutes thead th:eq(1)").text("".concat(s," ").concat(a[this.language].months[r]," ").concat(n)),this.picker.find("tfoot th.today").text(a[this.language].today).toggle(!1!==this.todayBtn),this.updateNavArrows(),this.fillMonths();var v=i(n,r-1,28,0,0,0,0),g=o.getDaysInMonth(v.getUTCFullYear(),v.getUTCMonth());v.setUTCDate(g),v.setUTCDate(g-(v.getUTCDay()-this.weekStart+7)%7);var y=new Date(v.valueOf());y.setUTCDate(y.getUTCDate()+42),y=y.valueOf();for(var b,k=[];v.valueOf()<y;){if(v.getUTCDay()==this.weekStart&&(k.push("<tr>"),this.calendarWeeks)){var w=new Date(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()-v.getDay()+10-(this.weekStart&&this.weekStart%7<5&&7)),T=new Date(w.getFullYear(),0,4),S=~~((w-T)/864e5/7+1.5);k.push('<td class="cw">'.concat(S,"</td>"))}b=" ".concat(this.onRender(v)," "),v.getUTCFullYear()<n||v.getUTCFullYear()==n&&v.getUTCMonth()<r?b+=" old":(v.getUTCFullYear()>n||v.getUTCFullYear()==n&&v.getUTCMonth()>r)&&(b+=" new"),this.todayHighlight&&v.getUTCFullYear()==m.getFullYear()&&v.getUTCMonth()==m.getMonth()&&v.getUTCDate()==m.getDate()&&(b+=" today"),p&&v.valueOf()==p&&(b+=" active"),(v.valueOf()<this.startDate||v.valueOf()>this.endDate||-1!==e.inArray(v.getUTCDay(),this.daysOfWeekDisabled)||-1!==e.inArray(v.valueOf(),this.datesDisabled))&&(b+=" disabled"),k.push('<td class="day'.concat(b,'">').concat(v.getUTCDate(),"</td>")),v.getUTCDay()==this.weekEnd&&k.push("</tr>"),v.setUTCDate(v.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(k.join("")),k=[];for(var C=0;C<24;C++){b="",(D=i(n,r,s,C)).valueOf()+36e5<this.startDate||D.valueOf()>this.endDate?b+=" disabled":c==C&&(b+=" active"),k.push('<span class="hour'.concat(b,'">').concat(C,":00</span>"))}this.picker.find(".datepicker-hours td").html(k.join("")),k=[];for(C=0;C<60;C+=this.minuteStep){var D;b="",(D=i(n,r,s,c,C)).valueOf()<this.startDate||D.valueOf()>this.endDate?b+=" disabled":Math.floor(l/this.minuteStep)==Math.floor(C/this.minuteStep)&&(b+=" active"),k.push('<span class="minute'.concat(b,'">').concat(c,":").concat(C<10?"0".concat(C):C,"</span>"))}this.picker.find(".datepicker-minutes td").html(k.join(""));var x=this.date&&this.date.getUTCFullYear(),M=this.picker.find(".datepicker-months").find("th:eq(1)").text(n).end().find("span").removeClass("active");x&&x==n&&M.eq(this.date.getUTCMonth()).addClass("active"),(n<u||n>d)&&M.addClass("disabled"),n==u&&M.slice(0,h).addClass("disabled"),n==d&&M.slice(f+1).addClass("disabled"),k="",n=10*parseInt(n/10,10);var E=this.picker.find(".datepicker-years").find("th:eq(1)").text("".concat(n,"-").concat(n+9)).end().find("td");n-=1;for(C=-1;C<11;C++)k+='<span class="year'.concat(-1==C||10==C?" old":"").concat(x==n?" active":"").concat(n<u||n>d?" disabled":"",'">').concat(n,"</span>"),n+=1;E.html(k)}},updateNavArrows:function(){var t=new Date(this.viewDate),e=t.getUTCFullYear(),n=t.getUTCMonth(),i=t.getUTCDate(),r=t.getUTCHours();switch(this.viewMode){case 0:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()&&i<=this.startDate.getUTCDate()&&r<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()&&i>=this.endDate.getUTCDate()&&r>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()&&i<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()&&i>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(t){t.stopPropagation(),t.preventDefault(),(e(t.target).hasClass("datepicker-close")||e(t.target).parent().hasClass("datepicker-close"))&&this.hide();var n=e(t.target).closest("span, td, th");if(1==n.length){if(n.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"date-switch":this.showMode(1);break;case"prev":case"next":var r=o.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,r);break;case 1:this.viewDate=this.moveDate(this.viewDate,r);break;case 2:this.viewDate=this.moveMonth(this.viewDate,r);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,r)}this.fill();break;case"today":var a=new Date;a=i(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(a)}break;case"span":if(!n.is(".disabled")){if(n.is(".month"))if(3===this.minView){var s=n.parent().find("span").index(n)||0,c=this.viewDate.getUTCFullYear(),l=1,u=this.viewDate.getUTCHours(),h=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds();this._setDate(i(c,s,l,u,h,d,0))}else{this.viewDate.setUTCDate(1);s=n.parent().find("span").index(n);this.viewDate.setUTCMonth(s),this.element.trigger({type:"changeMonth",date:this.viewDate})}else if(n.is(".year"))if(4===this.minView){c=parseInt(n.text(),10)||0,s=0,l=1,u=this.viewDate.getUTCHours(),h=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds();this._setDate(i(c,s,l,u,h,d,0))}else{this.viewDate.setUTCDate(1);c=parseInt(n.text(),10)||0;this.viewDate.setUTCFullYear(c),this.element.trigger({type:"changeYear",date:this.viewDate})}else if(n.is(".hour")){u=parseInt(n.text(),10)||0,c=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),l=this.viewDate.getUTCDate(),h=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds();this._setDate(i(c,s,l,u,h,d,0))}else if(n.is(".minute")){h=parseInt(n.text().substr(n.text().indexOf(":")+1),10)||0,c=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),l=this.viewDate.getUTCDate(),u=this.viewDate.getUTCHours(),d=this.viewDate.getUTCSeconds();this._setDate(i(c,s,l,u,h,d,0))}if(0!=this.viewMode){var f=this.viewMode;this.showMode(-1),this.fill(),f==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){l=parseInt(n.text(),10)||1,c=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),u=this.viewDate.getUTCHours(),h=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds();n.is(".old")?0===s?(s=11,c-=1):s-=1:n.is(".new")&&(11==s?(s=0,c+=1):s+=1),this._setDate(i(c,s,l,u,h,d,0))}f=this.viewMode;this.showMode(-1),this.fill(),f==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(t,e){var n;e&&"date"!=e||(this.date=t),e&&"view"!=e||(this.viewDate=t),this.fill(),this.setValue(),this.element.trigger({type:"changeDate",date:this.date}),this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&(n.change(),this.autoclose)},moveHour:function(t,e){if(!e)return t;var n=new Date(t.valueOf());return e=e>0?1:-1,n.setUTCHours(n.getUTCHours()+e),n},moveDate:function(t,e){if(!e)return t;var n=new Date(t.valueOf());return e=e>0?1:-1,n.setUTCDate(n.getUTCDate()+e),n},moveMonth:function(t,e){if(!e)return t;var n,i,r=new Date(t.valueOf()),a=r.getUTCDate(),o=r.getUTCMonth(),s=Math.abs(e);if(e=e>0?1:-1,1==s)i=-1==e?function(){return r.getUTCMonth()==o}:function(){return r.getUTCMonth()!=n},n=o+e,r.setUTCMonth(n),(n<0||n>11)&&(n=(n+12)%12);else{for(var c=0;c<s;c++)r=this.moveMonth(r,e);n=r.getUTCMonth(),r.setUTCDate(a),i=function(){return n!=r.getUTCMonth()}}for(;i();)r.setUTCDate(--a),r.setUTCMonth(n);return r},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.startDate&&t<=this.endDate},keydown:function(t){if(!this.keyboardNavigation)return!0;if(this.picker.is(":not(:visible)"))27==t.keyCode&&this.show();else{var e,n,i,r,a=!1;switch(t.keyCode){case 27:case 13:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;e=37==t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.date,e),i=this.moveYear(this.viewDate,e)):t.shiftKey?(n=this.moveMonth(this.date,e),i=this.moveMonth(this.viewDate,e)):((n=new Date(this.date.valueOf())).setUTCDate(this.date.getUTCDate()+e),(i=new Date(this.viewDate.valueOf())).setUTCDate(this.viewDate.getUTCDate()+e)),this.dateWithinRange(n)&&(this.date=n,this.viewDate=i,this.setValue(),this.update(),t.preventDefault(),a=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;e=38==t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.date,e),i=this.moveYear(this.viewDate,e)):t.shiftKey?(n=this.moveMonth(this.date,e),i=this.moveMonth(this.viewDate,e)):((n=new Date(this.date.valueOf())).setUTCDate(this.date.getUTCDate()+7*e),(i=new Date(this.viewDate.valueOf())).setUTCDate(this.viewDate.getUTCDate()+7*e)),this.dateWithinRange(n)&&(this.date=n,this.viewDate=i,this.setValue(),this.update(),t.preventDefault(),a=!0);break;case 9:this.hide()}if(a)this.element.trigger({type:"changeDate",date:this.date}),this.isInput?r=this.element:this.component&&(r=this.element.find("input")),r&&r.change()}},showMode:function(t){if(t){var e=Math.max(0,Math.min(o.modes.length-1,this.viewMode+t));e>=this.minView&&e<=this.maxView&&(this.viewMode=e)}this.picker.find(">div").hide().filter(".datepicker-".concat(o.modes[this.viewMode].clsName)).css("display","block"),this.updateNavArrows()},changeViewDate:function(t){this.date=t,this.viewDate=t,this.fill()},reset:function(t){this._setDate(null,"date")}},e.fn.fdatepicker=function(i){var a=Array.apply(void 0,arguments);return a.shift(),this.each((function(){var o,s=e(this),c=s.data("datepicker"),l="object"===n(i)&&i;(c||s.data("datepicker",c=new r(this,e.extend({},e.fn.fdatepicker.defaults,l))),"string"===typeof i&&"function"===typeof c[i])&&(o=c)[i].apply(o,t(a))}))},e.fn.fdatepicker.defaults={onRender:function(t){return""}},e.fn.fdatepicker.Constructor=r;var a=e.fn.fdatepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",titleFormat:"MM yyyy"}},o={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,o.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/hh?|ii?|ss?|dd?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\0").split("\0"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw new Error("Invalid date format.");return this.formatText=t,{separators:e,parts:n}},parseDate:function(t,n,r){if(t instanceof Date)return new Date(t.valueOf()-6e4*t.getTimezoneOffset());if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(t)&&(n=this.parseFormat("yyyy-mm-dd")),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(t)&&(n=this.parseFormat("yyyy-mm-dd hh:ii")),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(t)&&(n=this.parseFormat("yyyy-mm-dd hh:ii:ss")),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(t)){var o,s=/([-+]\d+)([dmwy])/,c=t.match(/([-+]\d+)([dmwy])/g);t=new Date;for(var l=0;l<c.length;l++)switch(d=s.exec(c[l]),o=parseInt(d[1]),d[2]){case"d":t.setUTCDate(t.getUTCDate()+o);break;case"m":t=Datetimepicker.prototype.moveMonth.call(Datetimepicker.prototype,t,o);break;case"w":t.setUTCDate(t.getUTCDate()+7*o);break;case"y":t=Datetimepicker.prototype.moveYear.call(Datetimepicker.prototype,t,o)}return i(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())}c=t&&t.match(this.nonpunctuation)||[],t=new Date;var u,h,d,f={},p=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","d","dd"],m={hh:function(t,e){return t.setUTCHours(e)},h:function(t,e){return t.setUTCHours(e)},ii:function(t,e){return t.setUTCMinutes(e)},i:function(t,e){return t.setUTCMinutes(e)},ss:function(t,e){return t.setUTCSeconds(e)},s:function(t,e){return t.setUTCSeconds(e)},yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};if(m.M=m.MM=m.mm=m.m,m.dd=m.d,t=i(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),c.length==n.parts.length){l=0;for(var v=n.parts.length;l<v;l++){if(u=parseInt(c[l],10),d=n.parts[l],isNaN(u))switch(d){case"MM":h=e(a[r].months).filter((function(){var t=this.slice(0,c[l].length);return t==c[l].slice(0,t.length)})),u=e.inArray(h[0],a[r].months)+1;break;case"M":h=e(a[r].monthsShort).filter((function(){var t=this.slice(0,c[l].length);return t==c[l].slice(0,t.length)})),u=e.inArray(h[0],a[r].monthsShort)+1}f[d]=u}var g;for(l=0;l<p.length;l++)(g=p[l])in f&&!isNaN(f[g])&&m[g](t,f[g])}return t},formatDate:function(t,n,i){if(null==t)return"";var r={h:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds(),d:t.getUTCDate(),m:t.getUTCMonth()+1,M:a[i].monthsShort[t.getUTCMonth()],MM:a[i].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};r.hh=(r.h<10?"0":"")+r.h,r.ii=(r.i<10?"0":"")+r.i,r.ss=(r.s<10?"0":"")+r.s,r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m;t=[];for(var o=e.extend([],n.separators),s=0,c=n.parts.length;s<c;s++)o.length&&t.push(o.shift()),t.push(r[n.parts[s]]);return t.join("")},convertViewMode:function(t){switch(t){case 4:case"decade":t=4;break;case 3:case"year":t=3;break;case 2:case"month":t=2;break;case 1:case"day":t=1;break;case 0:case"hour":t=0}return t},headTemplate:function(t,e){return"".concat('<thead><tr><th class="prev">').concat(t,"</th>")+'<th colspan="5" class="date-switch"></th>'+'<th class="next">'.concat(e,"</th>")+"</tr></thead>"},contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>',template:function(t,e,n){return"".concat('<div class="datepicker"><div class="datepicker-minutes"><table class=" table-condensed">').concat(o.headTemplate(t,e)).concat(o.contTemplate).concat(o.footTemplate,"</table>")+'</div><div class="datepicker-hours">'+'<table class=" table-condensed">'.concat(o.headTemplate(t,e)).concat(o.contTemplate).concat(o.footTemplate,"</table>")+'</div><div class="datepicker-days">'+'<table class=" table-condensed">'.concat(o.headTemplate(t,e),"<tbody></tbody>").concat(o.footTemplate,"</table>")+'</div><div class="datepicker-months">'+'<table class="table-condensed">'.concat(o.headTemplate(t,e)).concat(o.contTemplate).concat(o.footTemplate,"</table>")+'</div><div class="datepicker-years">'+'<table class="table-condensed">'.concat(o.headTemplate(t,e)).concat(o.contTemplate).concat(o.footTemplate,"</table>")+"</div>"+'<a class="button datepicker-close tiny alert right" style="width:auto;">'.concat(n,"</a>")+"</div>"}};e.fn.fdatepicker.DPGlobal=o}(window.jQuery)},20653:function(t,e){var n,i,r,a;function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}a=function(){return function t(e,n,i){function r(o,s){if(!n[o]){if(!e[o]){if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};e[o][0].call(l.exports,(function(t){return r(e[o][1][t]||t)}),l,l.exports,t,e,n,i)}return n[o].exports}for(var a=void 0,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,t("./utils");var i=s(t("./TributeEvents")),r=s(t("./TributeMenuEvents")),a=s(t("./TributeRange")),o=s(t("./TributeSearch"));function s(t){return t&&t.__esModule?t:{default:t}}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(c){r=!0,a=c}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var u=function(){function t(e){var n,s=this,c=e.values,l=void 0===c?null:c,u=e.iframe,h=void 0===u?null:u,d=e.selectClass,f=void 0===d?"highlight":d,p=e.trigger,m=void 0===p?"@":p,v=e.autocompleteMode,g=void 0!==v&&v,y=e.selectTemplate,b=void 0===y?null:y,k=e.menuItemTemplate,w=void 0===k?null:k,T=e.lookup,S=void 0===T?"key":T,C=e.fillAttr,D=void 0===C?"value":C,x=e.collection,M=void 0===x?null:x,E=e.menuContainer,_=void 0===E?null:E,A=e.noMatchTemplate,U=void 0===A?null:A,L=e.requireLeadingSpace,O=void 0===L||L,I=e.allowSpaces,$=void 0!==I&&I,P=e.replaceTextSuffix,F=void 0===P?null:P,N=e.positionMenu,j=void 0===N||N,R=e.spaceSelectsMatch,H=void 0!==R&&R,V=e.searchOpts,W=void 0===V?{}:V,Y=e.menuItemLimit,q=void 0===Y?null:Y;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.autocompleteMode=g,this.menuSelected=0,this.current={},this.inputEvent=!1,this.isActive=!1,this.menuContainer=_,this.allowSpaces=$,this.replaceTextSuffix=F,this.positionMenu=j,this.hasTrailingSpace=!1,this.spaceSelectsMatch=H,this.autocompleteMode&&(m="",$=!1),l)this.collection=[{trigger:m,iframe:h,selectClass:f,selectTemplate:(b||t.defaultSelectTemplate).bind(this),menuItemTemplate:(w||t.defaultMenuItemTemplate).bind(this),noMatchTemplate:(n=U,"function"===typeof n?n.bind(s):U||function(){return""}.bind(s)),lookup:S,fillAttr:D,values:l,requireLeadingSpace:O,searchOpts:W,menuItemLimit:q}];else{if(!M)throw new Error("[Tribute] No collection specified.");this.autocompleteMode&&console.warn("Tribute in autocomplete mode does not work for collections"),this.collection=M.map((function(e){return{trigger:e.trigger||m,iframe:e.iframe||h,selectClass:e.selectClass||f,selectTemplate:(e.selectTemplate||t.defaultSelectTemplate).bind(s),menuItemTemplate:(e.menuItemTemplate||t.defaultMenuItemTemplate).bind(s),noMatchTemplate:function(t){return"function"===typeof t?t.bind(s):null}(U),lookup:e.lookup||S,fillAttr:e.fillAttr||D,values:e.values,requireLeadingSpace:e.requireLeadingSpace,searchOpts:e.searchOpts||W,menuItemLimit:e.menuItemLimit||q}}))}new a.default(this),new i.default(this),new r.default(this),new o.default(this)}var e,n,s;return e=t,s=[{key:"defaultSelectTemplate",value:function(t){return"undefined"===typeof t?null:this.range.isContentEditable(this.current.element)?'<span class="tribute-mention">'+(this.current.collection.trigger+t.original[this.current.collection.fillAttr])+"</span>":this.current.collection.trigger+t.original[this.current.collection.fillAttr]}},{key:"defaultMenuItemTemplate",value:function(t){return t.string}},{key:"inputTypes",value:function(){return["TEXTAREA","INPUT"]}}],(n=[{key:"triggers",value:function(){return this.collection.map((function(t){return t.trigger}))}},{key:"attach",value:function(t){if(!t)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if("undefined"!==typeof jQuery&&t instanceof jQuery&&(t=t.get()),t.constructor===NodeList||t.constructor===HTMLCollection||t.constructor===Array)for(var e=t.length,n=0;n<e;++n)this._attach(t[n]);else this._attach(t)}},{key:"_attach",value:function(t){t.hasAttribute("data-tribute")&&console.warn("Tribute was already bound to "+t.nodeName),this.ensureEditable(t),this.events.bind(t),t.setAttribute("data-tribute",!0)}},{key:"ensureEditable",value:function(e){if(-1===t.inputTypes().indexOf(e.nodeName)){if(!e.contentEditable)throw new Error("[Tribute] Cannot bind to "+e.nodeName);e.contentEditable=!0}}},{key:"createMenu",value:function(){var t=this.range.getDocument().createElement("div"),e=this.range.getDocument().createElement("ul");return t.className="tribute-container",t.setAttribute("aria-expanded","true"),e.setAttribute("id","results"),t.appendChild(e),this.menuContainer?this.menuContainer.appendChild(t):this.range.getDocument().body.appendChild(t)}},{key:"showMenuFor",value:function(t,e){var n=this;if(!this.isActive||this.current.element!==t||this.current.mentionText!==this.currentMentionTextSnapshot){this.currentMentionTextSnapshot=this.current.mentionText,this.menu||(this.menu=this.createMenu(),t.tributeMenu=this.menu,this.menuEvents.bind(this.menu)),this.isActive=!0,this.menuSelected=0,this.current.mentionText||(this.current.mentionText="");var i=function(t){if(n.isActive){var i=n.search.filter(n.current.mentionText,t,{pre:n.current.collection.searchOpts.pre||"<span>",post:n.current.collection.searchOpts.post||"</span>",skip:n.current.collection.searchOpts.skip,extract:function(t){if("string"===typeof n.current.collection.lookup)return t[n.current.collection.lookup];if("function"===typeof n.current.collection.lookup)return n.current.collection.lookup(t,n.current.mentionText);throw new Error("Invalid lookup attribute, lookup must be string or function.")}});n.current.collection.menuItemLimit&&(i=i.slice(0,n.current.collection.menuItemLimit)),n.current.filteredItems=i;var r=n.menu.querySelector("ul");if(n.range.positionMenuAtCaret(e),!i.length){var a=new CustomEvent("tribute-no-match",{detail:n.menu});return n.current.element.dispatchEvent(a),void("function"===typeof n.current.collection.noMatchTemplate&&!n.current.collection.noMatchTemplate()||!n.current.collection.noMatchTemplate?n.hideMenu():"function"===typeof n.current.collection.noMatchTemplate?r.innerHTML=n.current.collection.noMatchTemplate():r.innerHTML=n.current.collection.noMatchTemplate)}r.innerHTML="";var o=n.range.getDocument().createDocumentFragment();i.forEach((function(t,e){var i=n.range.getDocument().createElement("li");i.setAttribute("role","option"),i.setAttribute("data-index",e),i.addEventListener("mousemove",(function(t){var e=c(n._findLiTarget(t.target),2),i=(e[0],e[1]);0!==t.movementY&&n.events.setActiveLi(i)})),n.menuSelected===e&&(i.className=n.current.collection.selectClass),i.innerHTML=n.current.collection.menuItemTemplate(t),o.appendChild(i)})),r.appendChild(o)}};"function"===typeof this.current.collection.values?this.current.collection.values(this.current.mentionText,i):i(this.current.collection.values)}}},{key:"_findLiTarget",value:function(t){if(!t)return[];var e=t.getAttribute("data-index");return e?[t,e]:this._findLiTarget(t.parentNode)}},{key:"showMenuForCollection",value:function(t,e){t!==document.activeElement&&this.placeCaretAtEnd(t),this.current.collection=this.collection[e||0],this.current.externalTrigger=!0,this.current.element=t,t.isContentEditable?this.insertTextAtCursor(this.current.collection.trigger):this.insertAtCaret(t,this.current.collection.trigger),this.showMenuFor(t)}},{key:"placeCaretAtEnd",value:function(t){if(t.focus(),"undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){var e=document.createRange();e.selectNodeContents(t),e.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(e)}else if("undefined"!=typeof document.body.createTextRange){var i=document.body.createTextRange();i.moveToElementText(t),i.collapse(!1),i.select()}}},{key:"insertTextAtCursor",value:function(t){var e,n;(n=(e=window.getSelection()).getRangeAt(0)).deleteContents();var i=document.createTextNode(t);n.insertNode(i),n.selectNodeContents(i),n.collapse(!1),e.removeAllRanges(),e.addRange(n)}},{key:"insertAtCaret",value:function(t,e){var n=t.scrollTop,i=t.selectionStart,r=t.value.substring(0,i),a=t.value.substring(t.selectionEnd,t.value.length);t.value=r+e+a,i+=e.length,t.selectionStart=i,t.selectionEnd=i,t.focus(),t.scrollTop=n}},{key:"hideMenu",value:function(){this.menu&&(this.menu.style.cssText="display: none;",this.isActive=!1,this.menuSelected=0,this.current={})}},{key:"selectItemAtIndex",value:function(t,e){if("number"===typeof(t=parseInt(t))&&!isNaN(t)){var n=this.current.filteredItems[t],i=this.current.collection.selectTemplate(n);null!==i&&this.replaceText(i,e,n)}}},{key:"replaceText",value:function(t,e,n){this.range.replaceTriggerText(t,!0,!0,e,n)}},{key:"_append",value:function(t,e,n){if("function"===typeof t.values)throw new Error("Unable to append to values, as it is a function.");t.values=n?e:t.values.concat(e)}},{key:"append",value:function(t,e,n){var i=parseInt(t);if("number"!==typeof i)throw new Error("please provide an index for the collection to update.");var r=this.collection[i];this._append(r,e,n)}},{key:"appendCurrent",value:function(t,e){if(!this.isActive)throw new Error("No active state. Please use append instead and pass an index.");this._append(this.current.collection,t,e)}},{key:"detach",value:function(t){if(!t)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if("undefined"!==typeof jQuery&&t instanceof jQuery&&(t=t.get()),t.constructor===NodeList||t.constructor===HTMLCollection||t.constructor===Array)for(var e=t.length,n=0;n<e;++n)this._detach(t[n]);else this._detach(t)}},{key:"_detach",value:function(t){var e=this;this.events.unbind(t),t.tributeMenu&&this.menuEvents.unbind(t.tributeMenu),setTimeout((function(){t.removeAttribute("data-tribute"),e.isActive=!1,t.tributeMenu&&t.tributeMenu.remove()}))}}])&&l(e.prototype,n),s&&l(e,s),t}();n.default=u,e.exports=n.default},{"./TributeEvents":2,"./TributeMenuEvents":3,"./TributeRange":4,"./TributeSearch":5,"./utils":7}],2:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tribute=e,this.tribute.events=this}var e,n,r;return e=t,r=[{key:"keys",value:function(){return[{key:9,value:"TAB"},{key:8,value:"DELETE"},{key:13,value:"ENTER"},{key:27,value:"ESCAPE"},{key:32,value:"SPACE"},{key:38,value:"UP"},{key:40,value:"DOWN"}]}}],(n=[{key:"bind",value:function(t){t.boundKeydown=this.keydown.bind(t,this),t.boundKeyup=this.keyup.bind(t,this),t.boundInput=this.input.bind(t,this),t.addEventListener("keydown",t.boundKeydown,!1),t.addEventListener("keyup",t.boundKeyup,!1),t.addEventListener("input",t.boundInput,!1)}},{key:"unbind",value:function(t){t.removeEventListener("keydown",t.boundKeydown,!1),t.removeEventListener("keyup",t.boundKeyup,!1),t.removeEventListener("input",t.boundInput,!1),delete t.boundKeydown,delete t.boundKeyup,delete t.boundInput}},{key:"keydown",value:function(e,n){e.shouldDeactivate(n)&&(e.tribute.isActive=!1,e.tribute.hideMenu());var i=this;e.commandEvent=!1,t.keys().forEach((function(t){t.key===n.keyCode&&(e.commandEvent=!0,e.callbacks()[t.value.toLowerCase()](n,i))}))}},{key:"input",value:function(t,e){t.inputEvent=!0,t.keyup.call(this,t,e)}},{key:"click",value:function(t,e){var n=t.tribute;if(n.menu&&n.menu.contains(e.target)){var i=e.target;for(e.preventDefault(),e.stopPropagation();"li"!==i.nodeName.toLowerCase();)if(!(i=i.parentNode)||i===n.menu)throw new Error("cannot find the <li> container for the click");void 0==i.getElementsByClassName("disabled-tribute-element")[0]&&(n.selectItemAtIndex(i.getAttribute("data-index"),e),n.hideMenu())}else n.current.element&&!n.current.externalTrigger&&(n.current.externalTrigger=!1,setTimeout((function(){return n.hideMenu()})))}},{key:"keyup",value:function(t,e){if(t.inputEvent&&(t.inputEvent=!1),t.updateSelection(this),27!==e.keyCode){if(!t.tribute.allowSpaces&&t.tribute.hasTrailingSpace)return t.tribute.hasTrailingSpace=!1,t.commandEvent=!0,void t.callbacks().space(e,this);if(!t.tribute.isActive)if(t.tribute.autocompleteMode)t.callbacks().triggerChar(e,this,"");else{var n=t.getKeyCode(t,this,e);if(isNaN(n)||!n)return;var i=t.tribute.triggers().find((function(t){return t.charCodeAt(0)===n}));"undefined"!==typeof i&&t.callbacks().triggerChar(e,this,i)}((t.tribute.current.trigger||t.tribute.autocompleteMode)&&!1===t.commandEvent||t.tribute.isActive&&8===e.keyCode)&&t.tribute.showMenuFor(this,!0)}}},{key:"shouldDeactivate",value:function(e){if(!this.tribute.isActive)return!1;if(0===this.tribute.current.mentionText.length){var n=!1;return t.keys().forEach((function(t){e.keyCode===t.key&&(n=!0)})),!n}return!1}},{key:"getKeyCode",value:function(t,e,n){var i=t.tribute,r=i.range.getTriggerInfo(!1,i.hasTrailingSpace,!0,i.allowSpaces,i.autocompleteMode);return!!r&&r.mentionTriggerChar.charCodeAt(0)}},{key:"updateSelection",value:function(t){this.tribute.current.element=t;var e=this.tribute.range.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);e&&(this.tribute.current.selectedPath=e.mentionSelectedPath,this.tribute.current.mentionText=e.mentionText,this.tribute.current.selectedOffset=e.mentionSelectedOffset)}},{key:"callbacks",value:function(){var t=this;return{triggerChar:function(e,n,i){var r=t.tribute;r.current.trigger=i;var a=r.collection.find((function(t){return t.trigger===i}));r.current.collection=a,r.inputEvent&&r.showMenuFor(n,!0)},enter:function(e,n){t.tribute.isActive&&t.tribute.current.filteredItems&&(e.preventDefault(),e.stopPropagation(),setTimeout((function(){t.tribute.selectItemAtIndex(t.tribute.menuSelected,e),t.tribute.hideMenu()}),0))},escape:function(e,n){t.tribute.isActive&&(e.preventDefault(),e.stopPropagation(),t.tribute.isActive=!1,t.tribute.hideMenu())},tab:function(e,n){t.callbacks().enter(e,n)},space:function(e,n){t.tribute.isActive&&(t.tribute.spaceSelectsMatch?t.callbacks().enter(e,n):t.tribute.allowSpaces||(e.stopPropagation(),setTimeout((function(){t.tribute.hideMenu(),t.tribute.isActive=!1}),0)))},up:function(e,n){if(t.tribute.isActive&&t.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();var i=t.tribute.current.filteredItems.length,r=t.tribute.menuSelected;i>r&&r>0?(t.tribute.menuSelected--,t.setActiveLi()):0===r&&(t.tribute.menuSelected=i-1,t.setActiveLi(),t.tribute.menu.scrollTop=t.tribute.menu.scrollHeight)}},down:function(e,n){if(t.tribute.isActive&&t.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();var i=t.tribute.current.filteredItems.length-1,r=t.tribute.menuSelected;i>r?(t.tribute.menuSelected++,t.setActiveLi()):i===r&&(t.tribute.menuSelected=0,t.setActiveLi(),t.tribute.menu.scrollTop=0)}},delete:function(e,n){t.tribute.isActive&&t.tribute.current.mentionText.length<1?t.tribute.hideMenu():t.tribute.isActive&&t.tribute.showMenuFor(n)}}}},{key:"setActiveLi",value:function(t){var e=this.tribute.menu.querySelectorAll("li"),n=e.length>>>0;t&&(this.tribute.menuSelected=parseInt(t));for(var i=0;i<n;i++){var r=e[i];if(i===this.tribute.menuSelected){r.classList.add(this.tribute.current.collection.selectClass);var a=r.getBoundingClientRect(),o=this.tribute.menu.getBoundingClientRect();if(a.bottom>o.bottom){var s=a.bottom-o.bottom;this.tribute.menu.scrollTop+=s}else if(a.top<o.top){var c=o.top-a.top;this.tribute.menu.scrollTop-=c}}else r.classList.remove(this.tribute.current.collection.selectClass)}}},{key:"getFullHeight",value:function(t,e){var n=t.getBoundingClientRect().height;if(e){var i=t.currentStyle||window.getComputedStyle(t);return n+parseFloat(i.marginTop)+parseFloat(i.marginBottom)}return n}}])&&i(e.prototype,n),r&&i(e,r),t}();n.default=r,e.exports=n.default},{}],3:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tribute=e,this.tribute.menuEvents=this,this.menu=this.tribute.menu}var e,n,r;return e=t,n=[{key:"bind",value:function(t){var e=this;this.menuClickEvent=this.tribute.events.click.bind(null,this),this.menuContainerScrollEvent=this.debounce((function(){e.tribute.isActive&&e.tribute.showMenuFor(e.tribute.current.element,!1)}),300,!1),this.windowResizeEvent=this.debounce((function(){e.tribute.isActive&&e.tribute.range.positionMenuAtCaret(!0)}),300,!1),this.tribute.range.getDocument().addEventListener("MSPointerDown",this.menuClickEvent,!1),this.tribute.range.getDocument().addEventListener("mousedown",this.menuClickEvent,!1),window.addEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.addEventListener("scroll",this.menuContainerScrollEvent,!1):window.addEventListener("scroll",this.menuContainerScrollEvent)}},{key:"unbind",value:function(t){this.tribute.range.getDocument().removeEventListener("mousedown",this.menuClickEvent,!1),this.tribute.range.getDocument().removeEventListener("MSPointerDown",this.menuClickEvent,!1),window.removeEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.removeEventListener("scroll",this.menuContainerScrollEvent,!1):window.removeEventListener("scroll",this.menuContainerScrollEvent)}},{key:"debounce",value:function(t,e,n){var i,r=this,a=arguments;return function(){var o=r,s=a,c=n&&!i;clearTimeout(i),i=setTimeout((function(){i=null,n||t.apply(o,s)}),e),c&&t.apply(o,s)}}}],n&&i(e.prototype,n),r&&i(e,r),t}(),a=r;n.default=a,e.exports=n.default},{}],4:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tribute=e,this.tribute.range=this}var e,n,r;return e=t,(n=[{key:"getDocument",value:function(){var t;return this.tribute.current.collection&&(t=this.tribute.current.collection.iframe),t?t.contentWindow.document:document}},{key:"positionMenuAtCaret",value:function(t){var e,n=this,i=this.tribute.current,r=this.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);if("undefined"!==typeof r){if(!this.tribute.positionMenu)return void(this.tribute.menu.style.cssText="display: block;");e=this.isContentEditable(i.element)?this.getContentEditableCaretPosition(r.mentionPosition):this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element,r.mentionPosition),this.tribute.menu.style.cssText="top: ".concat(e.top,"px;\n                                     left: ").concat(e.left,"px;\n                                     right: ").concat(e.right,"px;\n                                     bottom: ").concat(e.bottom,"px;\n                                     position: absolute;\n                                     display: block;"),"auto"===e.left&&(this.tribute.menu.style.left="auto"),"auto"===e.top&&(this.tribute.menu.style.top="auto"),t&&this.scrollIntoView(),window.setTimeout((function(){var i={width:n.tribute.menu.offsetWidth,height:n.tribute.menu.offsetHeight},r=n.isMenuOffScreen(e,i),a=window.innerWidth>i.width&&(r.left||r.right),o=window.innerHeight>i.height&&(r.top||r.bottom);(a||o)&&(n.tribute.menu.style.cssText="display: none",n.positionMenuAtCaret(t))}),0)}else this.tribute.menu.style.cssText="display: none"}},{key:"selectElement",value:function(t,e,n){var i,r=t;if(e)for(var a=0;a<e.length;a++){if(void 0===(r=r.childNodes[e[a]]))return;for(;r.length<n;)n-=r.length,r=r.nextSibling;0!==r.childNodes.length||r.length||(r=r.previousSibling)}var o=this.getWindowSelection();(i=this.getDocument().createRange()).setStart(r,n),i.setEnd(r,n),i.collapse(!0);try{o.removeAllRanges()}catch(s){}o.addRange(i),t.focus()}},{key:"replaceTriggerText",value:function(t,e,n,i,r){var a=this.getTriggerInfo(!0,n,e,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(void 0!==a){var o=this.tribute.current,s=new CustomEvent("tribute-replaced",{detail:{item:r,instance:o,context:a,event:i}});if(this.isContentEditable(o.element))t+="string"==typeof this.tribute.replaceTextSuffix?this.tribute.replaceTextSuffix:"\xa0",this.pasteHtml(t,a.mentionPosition,a.mentionPosition+a.mentionText.length+!this.tribute.autocompleteMode);else{var c=this.tribute.current.element,l="string"==typeof this.tribute.replaceTextSuffix?this.tribute.replaceTextSuffix:" ";t+=l;var u=a.mentionPosition,h=a.mentionPosition+a.mentionText.length+l.length;c.value=c.value.substring(0,u)+t+c.value.substring(h,c.value.length),c.selectionStart=u+t.length,c.selectionEnd=u+t.length}o.element.dispatchEvent(s)}}},{key:"pasteHtml",value:function(t,e,n){var i,r;r=this.getWindowSelection(),(i=this.getDocument().createRange()).setStart(r.anchorNode,e),i.setEnd(r.anchorNode,n),i.deleteContents();var a=this.getDocument().createElement("div");a.innerHTML=t;for(var o,s,c=this.getDocument().createDocumentFragment();o=a.firstChild;)s=c.appendChild(o);i.insertNode(c),s&&((i=i.cloneRange()).setStartAfter(s),i.collapse(!0),r.removeAllRanges(),r.addRange(i))}},{key:"getWindowSelection",value:function(){return this.tribute.collection.iframe?this.tribute.collection.iframe.contentWindow.getSelection():window.getSelection()}},{key:"getNodePositionInParent",value:function(t){if(null===t.parentNode)return 0;for(var e=0;e<t.parentNode.childNodes.length;e++)if(t.parentNode.childNodes[e]===t)return e}},{key:"getContentEditableSelectedPath",value:function(t){var e=this.getWindowSelection(),n=e.anchorNode,i=[];if(null!=n){for(var r,a=n.contentEditable;null!==n&&"true"!==a;)r=this.getNodePositionInParent(n),i.push(r),null!==(n=n.parentNode)&&(a=n.contentEditable);return i.reverse(),{selected:n,path:i,offset:e.getRangeAt(0).startOffset}}}},{key:"getTextPrecedingCurrentSelection",value:function(){var t=this.tribute.current,e="";if(this.isContentEditable(t.element)){var n=this.getWindowSelection().anchorNode;if(null!=n){var i=n.textContent,r=this.getWindowSelection().getRangeAt(0).startOffset;i&&r>=0&&(e=i.substring(0,r))}}else{var a=this.tribute.current.element;if(a){var o=a.selectionStart;a.value&&o>=0&&(e=a.value.substring(0,o))}}return e}},{key:"getLastWordInText",value:function(t){var e=(t=t.replace(/\u00A0/g," ")).split(/\s+/);return e[e.length-1].trim()}},{key:"getTriggerInfo",value:function(t,e,n,i,r){var a,o,s,c=this,l=this.tribute.current;if(this.isContentEditable(l.element)){var u=this.getContentEditableSelectedPath(l);u&&(a=u.selected,o=u.path,s=u.offset)}else a=this.tribute.current.element;var h=this.getTextPrecedingCurrentSelection(),d=this.getLastWordInText(h);if(r)return{mentionPosition:h.length-d.length,mentionText:d,mentionSelectedElement:a,mentionSelectedPath:o,mentionSelectedOffset:s};if(void 0!==h&&null!==h){var f,p=-1;if(this.tribute.collection.forEach((function(t){var e=t.trigger,i=t.requireLeadingSpace?c.lastIndexWithLeadingSpace(h,e):h.lastIndexOf(e);i>p&&(p=i,f=e,n=t.requireLeadingSpace)})),p>=0&&(0===p||!n||/[\xA0\s]/g.test(h.substring(p-1,p)))){var m=h.substring(p+1,h.length);f=h.substring(p,p+1);var v=m.substring(0,1),g=m.length>0&&(" "===v||"\xa0"===v);e&&(m=m.trim());var y=i?/[^\S ]/g:/[\xA0\s]/g;if(this.tribute.hasTrailingSpace=y.test(m),!g&&(t||!y.test(m)))return{mentionPosition:p,mentionText:m,mentionSelectedElement:a,mentionSelectedPath:o,mentionSelectedOffset:s,mentionTriggerChar:f}}}}},{key:"lastIndexWithLeadingSpace",value:function(t,e){for(var n=t.split("").reverse().join(""),i=-1,r=0,a=t.length;r<a;r++){var o=r===t.length-1,s=/\s/.test(n[r+1]);if(e===n[r]&&(o||s)){i=t.length-1-r;break}}return i}},{key:"isContentEditable",value:function(t){return"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName}},{key:"isMenuOffScreen",value:function(t,e){var n=window.innerWidth,i=window.innerHeight,r=document.documentElement,a=(window.pageXOffset||r.scrollLeft)-(r.clientLeft||0),o=(window.pageYOffset||r.scrollTop)-(r.clientTop||0),s="number"===typeof t.top?t.top:o+i-t.bottom-e.height,c="number"===typeof t.right?t.right:t.left+e.width,l="number"===typeof t.bottom?t.bottom:t.top+e.height,u="number"===typeof t.left?t.left:a+n-t.right-e.width;return{top:s<Math.floor(o),right:c>Math.ceil(a+n),bottom:l>Math.ceil(o+i),left:u<Math.floor(a)}}},{key:"getMenuDimensions",value:function(){var t={width:null,height:null};return this.tribute.menu.style.cssText="top: 0px;\n                                 left: 0px;\n                                 position: fixed;\n                                 display: block;\n                                 visibility; hidden;",t.width=this.tribute.menu.offsetWidth,t.height=this.tribute.menu.offsetHeight,this.tribute.menu.style.cssText="display: none;",t}},{key:"getTextAreaOrInputUnderlinePosition",value:function(t,e,n){var i=null!==window.mozInnerScreenX,r=this.getDocument().createElement("div");r.id="input-textarea-caret-position-mirror-div",this.getDocument().body.appendChild(r);var a=r.style,o=window.getComputedStyle?getComputedStyle(t):t.currentStyle;a.whiteSpace="pre-wrap","INPUT"!==t.nodeName&&(a.wordWrap="break-word"),a.position="absolute",a.visibility="hidden",["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"].forEach((function(t){a[t]=o[t]})),i?(a.width="".concat(parseInt(o.width)-2,"px"),t.scrollHeight>parseInt(o.height)&&(a.overflowY="scroll")):a.overflow="hidden",r.textContent=t.value.substring(0,e),"INPUT"===t.nodeName&&(r.textContent=r.textContent.replace(/\s/g," "));var s=this.getDocument().createElement("span");s.textContent=t.value.substring(e)||".",r.appendChild(s);var c=t.getBoundingClientRect(),l=document.documentElement,u=(window.pageXOffset||l.scrollLeft)-(l.clientLeft||0),h=(window.pageYOffset||l.scrollTop)-(l.clientTop||0),d=0,f=0;this.menuContainerIsBody&&(d=c.top,f=c.left);var p={top:d+h+s.offsetTop+parseInt(o.borderTopWidth)+parseInt(o.fontSize)-t.scrollTop,left:f+u+s.offsetLeft+parseInt(o.borderLeftWidth)},m=window.innerWidth,v=window.innerHeight,g=this.getMenuDimensions(),y=this.isMenuOffScreen(p,g);y.right&&(p.right=m-p.left,p.left="auto");var b=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(y.bottom){var k=b-(v-(this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect()).top);p.bottom=k+(v-c.top-s.offsetTop),p.top="auto"}return(y=this.isMenuOffScreen(p,g)).left&&(p.left=m>g.width?u+m-g.width:u,delete p.right),y.top&&(p.top=v>g.height?h+v-g.height:h,delete p.bottom),this.getDocument().body.removeChild(r),p}},{key:"getContentEditableCaretPosition",value:function(t){var e,n,i="sel_".concat((new Date).getTime(),"_").concat(Math.random().toString().substr(2)),r=this.getWindowSelection(),a=r.getRangeAt(0);(n=this.getDocument().createRange()).setStart(r.anchorNode,t),n.setEnd(r.anchorNode,t),n.collapse(!1),(e=this.getDocument().createElement("span")).id=i,e.appendChild(this.getDocument().createTextNode("\ufeff")),n.insertNode(e),r.removeAllRanges(),r.addRange(a);var o=e.getBoundingClientRect(),s=document.documentElement,c=(window.pageXOffset||s.scrollLeft)-(s.clientLeft||0),l=(window.pageYOffset||s.scrollTop)-(s.clientTop||0),u=0,h=0;this.menuContainerIsBody?(u=o.left,h=o.top):(u=e.offsetLeft,h=e.offsetTop);var d={left:u+c,top:h+e.offsetHeight+l},f=window.innerWidth,p=window.innerHeight,m=this.getMenuDimensions(),v=this.isMenuOffScreen(d,m);v.right&&(d.left="auto",d.right=f-o.left-c);var g=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(v.bottom){var y=g-(p-(this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect()).top);d.top="auto",d.bottom=y+(p-o.top)}return(v=this.isMenuOffScreen(d,m)).left&&(d.left=f>m.width?c+f-m.width:c,delete d.right),v.top&&(d.top=p>m.height?l+p-m.height:l,delete d.bottom),e.parentNode.removeChild(e),d}},{key:"scrollIntoView",value:function(t){var e,n=this.menu;if("undefined"!==typeof n){for(;void 0===e||0===e.height;)if(0===(e=n.getBoundingClientRect()).height&&(void 0===(n=n.childNodes[0])||!n.getBoundingClientRect))return;var i=e.top,r=i+e.height;if(i<0)window.scrollTo(0,window.pageYOffset+e.top-20);else if(r>window.innerHeight){var a=window.pageYOffset+e.top-20;a-window.pageYOffset>100&&(a=window.pageYOffset+100);var o=window.pageYOffset-(window.innerHeight-r);o>a&&(o=a),window.scrollTo(0,o)}}}},{key:"menuContainerIsBody",get:function(){return this.tribute.menuContainer===document.body||!this.tribute.menuContainer}}])&&i(e.prototype,n),r&&i(e,r),t}();n.default=r,e.exports=n.default},{}],5:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tribute=e,this.tribute.search=this}var e,n,r;return e=t,(n=[{key:"simpleFilter",value:function(t,e){var n=this;return e.filter((function(e){return n.test(t,e)}))}},{key:"test",value:function(t,e){return null!==this.match(t,e)}},{key:"match",value:function(t,e,n){n=n||{},e.length;var i=n.pre||"",r=n.post||"",a=n.caseSensitive&&e||e.toLowerCase();if(n.skip)return{rendered:e,score:0};t=n.caseSensitive&&t||t.toLowerCase();var o=this.traverse(a,t,0,0,[]);return o?{rendered:this.render(e,o.cache,i,r),score:o.score}:null}},{key:"traverse",value:function(t,e,n,i,r){if(e.length===i)return{score:this.calculateScore(r),cache:r.slice()};if(!(t.length===n||e.length-i>t.length-n)){for(var a,o,s=e[i],c=t.indexOf(s,n);c>-1;){if(r.push(c),o=this.traverse(t,e,c+1,i+1,r),r.pop(),!o)return a;(!a||a.score<o.score)&&(a=o),c=t.indexOf(s,c+1)}return a}}},{key:"calculateScore",value:function(t){var e=0,n=1;return t.forEach((function(i,r){r>0&&(t[r-1]+1===i?n+=n+1:n=1),e+=n})),e}},{key:"render",value:function(t,e,n,i){var r=t.substring(0,e[0]);return e.forEach((function(a,o){r+=n+t[a]+i+t.substring(a+1,e[o+1]?e[o+1]:t.length)})),r}},{key:"filter",value:function(t,e,n){var i=this;return n=n||{},e.reduce((function(e,r,a,o){var s=r;n.extract&&((s=n.extract(r))||(s=""));var c=i.match(t,s,n);return null!=c&&(e[e.length]={string:c.rendered,score:c.score,index:a,original:r}),e}),[]).sort((function(t,e){var n=e.score-t.score;return n||t.index-e.index}))}}])&&i(e.prototype,n),r&&i(e,r),t}();n.default=r,e.exports=n.default},{}],6:[function(t,e,n){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=((i=t("./Tribute"))&&i.__esModule?i:{default:i}).default;n.default=r,e.exports=n.default},{"./Tribute":1}],7:[function(t,e,n){"use strict";if(Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),i=n.length>>>0,r=arguments[1],a=0;a<i;a++)if(e=n[a],t.call(r,e,a,n))return e}),window&&"function"!==typeof window.CustomEvent){var i=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n};"undefined"!==typeof window.Event&&(i.prototype=window.Event.prototype),window.CustomEvent=i}},{}]},{},[6])(6)},"object"===o(e)?t.exports=a():(i=[],void 0===(r="function"===typeof(n=a)?n.apply(e,i):n)||(t.exports=r))},50051:function(t,e,n){"use strict";var i=n(94017),r=n(43095),a=n(80091),o=n(80458),s=n(66216),c=n(4584),l=n(23376),u=n(65611),h=n(37633),d=n(25049);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function m(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==f(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===f(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}$((function(){var t,e,n={},f={},v={},g=function(t){t.preventDefault();var e=$(t.target).parents(".metric-downloader").data("metric"),i="data:text/csv;charset=utf-8,";i+="key,value\r\n",n[e].forEach((function(t){i+="".concat(t.key,",").concat(t.value,"\r\n")}));var r=document.createElement("a");r.setAttribute("href",encodeURI(i)),r.setAttribute("download","".concat(e,"_metric_data.csv")),document.body.appendChild(r),r.click(),document.body.removeChild(r)};$(".metric-chart:visible").each((function(t,e){f[$(e).data("metric")]=e})),$(".metric-downloader").each((function(t,e){e.onclick=g})),$.isEmptyObject(f)||(e=Object.keys(f),v.names=JSON.stringify(e||[]),v.spaceType=$("#metrics #metrics-space_type").val()||null,v.spaceId=$("#metrics #metrics-space_id").val()||null,$.post("/api",(t="metrics(names: ".concat(v.names,', space_type: "').concat(v.spaceType,'", space_id: ').concat(v.spaceId,") { name history { key value } }"),{query:"{ ".concat(t," }")})).then((function(t){t.data?$.each(t.data.metrics,(function(t,e){var v=f[e.name];if(0!==e.history.length){var g=$(v).data("info");n[e.name]=$.extend(!0,[],e.history),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=function(t){return t.forEach((function(t){t.key=(0,l.Z)(t.key),t.value=Number(t.value)})),t.sort((function(t,e){return(0,a.j2)(t.key,e.key)}))}(t.data),n=t.title,f=t.objectName||"",p=(0,i.Z)(t.container),m=t.axis||!1,v=(t.ratio||"").split(":").reduce((function(t,e){return t/e}))||4/3,g=!!Object.is(t.tip,void 0)||t.tip;t.agg&&(e=e.map((function(t,e,n){return e>0&&(t.value+=n[e-1].value),t})));var y=0,b=0,k=0,w=0,T=Number(p.node().getBoundingClientRect().width)-w-b,S=T/v-y-k,C=(0,a.VV)([T/10,32]),D=(0,o.Xf)().range([0,T]),x=(0,o.BY)().range([S,0]),M=(0,h.Z)().x((function(t){return D(t.key)})).y0(S).y1((function(t){return x(t.value)})),E=(0,d.Z)().x((function(t){return D(t.key)})).y((function(t){return x(t.value)})),_=p.append("svg").attr("width",T+w+b).attr("height",S+y+k).append("g").attr("transform","translate(".concat(w,",").concat(y,")"));if(D.domain((0,a.We)(e,(function(t){return t.key}))),x.domain([0,(0,a.Fp)(e,(function(t){return t.value}))]).nice(),_.append("path").data([e]).attr("class","line").attr("d",E),_.append("path").data([e]).attr("class","area").attr("d",M),g){var A=_.append("circle").attr("class","circle").attr("r",6).style("display","none"),U=(0,i.Z)("body").append("div").attr("id","".concat(p.node().id,"-tooltip")).attr("class","chart-tooltip").style("opacity",0);_.on("mouseover",(function(){A.style("display",null),U.style("opacity",1)})).on("mouseout",(function(){A.style("display","none"),U.style("opacity",0)})).on("mousemove",(function(){var t=D.invert((0,r.Z)(this)[0]),n=(0,a.YF)((function(t){return t.key})).left(e,t,1),i=e[n-1],o=e[n],s=t-i.key>o.key-t?o:i,c=window.pageXOffset+p.node().getBoundingClientRect().left,l=window.pageYOffset+p.node().getBoundingClientRect().top,h='\n          <div class="tooltip-content">\n            '.concat((0,u.i$)("%e %B %Y")(s.key),"<br />\n            ").concat(s.value.toLocaleString()," ").concat(f,"\n          </div>");A.attr("transform","translate(".concat(D(s.key),",").concat(x(s.value),")")),U.html(h).style("left","".concat(c+D(s.key),"px")).style("top","".concat(l+x(s.value),"px"))}))}if(m){var L=(0,s.LL)(D).ticks(c.Z).tickFormat((0,u.i$)("%b %y")).tickSize(-S),O=(0,s.y4)(x).ticks(5).tickSize(8);_.append("g").attr("transform","translate(0,".concat(S,")")).call((function(t){t.call(L),t.select(".domain").remove(),t.selectAll(".tick line").attr("class","dashed"),t.selectAll(".tick text").attr("y",6)})),_.append("g").call((function(t){t.call(O),t.select(".domain").remove(),t.select(".tick:first-of-type").remove(),t.selectAll(".tick text").attr("text-anchor","start").attr("x",6)}));var I=_.append("g").data([e]).attr("transform",(function(t){return"translate(".concat(D(t[t.length-1].key),",").concat(x(t[t.length-1].value),")")}));I.append("circle").attr("class","circle").attr("r",8),I.append("text").attr("class","sum").attr("text-anchor","end").attr("dx",-16).text((function(t){return t[t.length-1].value.toLocaleString()}))}else{var $=_.append("g").attr("text-anchor","start").attr("transform","translate(".concat(C,",").concat(C,")")),P=0;n.length&&$.append("text").attr("x",0).attr("y",0).attr("class","title").text(n).call((function(t,e){t.each((function(){for(var t=(0,i.Z)(this),n="",r=t.text().split(/\s+/).reverse(),a=[],o=0,s=t.attr("x"),c=t.attr("y"),l=t.text(null).append("tspan").attr("x",s).attr("y",c).attr("dy","".concat(0,"em"));n=r.pop();)a.push(n),l.text(a.join(" ")),l.node().getComputedTextLength()>e&&(a.pop(),l.text(a.join(" ")),a=[n],l=t.append("tspan").attr("x",s).attr("y",c).attr("dy","".concat(1.1*++o+0,"em")).text(n));P=1.1*o}))}),T-2*C);var F=parseFloat(getComputedStyle($.node()).fontSize);$.append("text").attr("x",0).attr("dy",n.length?2*C+P*F:1.25*C).attr("class","sum").text(e[e.length-1].value.toLocaleString())}}(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({container:"#".concat(v.id),data:e.history,title:g.title,objectName:g.object},$(v).data()))}else $(v).remove()})):t.errors&&(console.log("Something wrong happened when fetching metrics:"),$.each(t.errors,(function(t,e){console.log(e.message)})),$("#metrics").remove())})).fail((function(t){console.log("Something wrong happened when fetching metrics: ".concat(t.statusText)),$("#metrics").remove()})))}))}}]);
//# sourceMappingURL=3875-5295a349bb30790884e2.js.map